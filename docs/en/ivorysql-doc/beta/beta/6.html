<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Installation Deployment :: IvorySQL Document Site</title>
    <link rel="canonical" href="https://docs.ivorysql.org/ivorysql-doc/beta/beta/6.html">
    <link rel="prev" href="5.html">
    <link rel="next" href="7.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.ivorysql.org">IvorySQL Document Site</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://www.ivorysql.org/">Home</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ivorysql-doc" data-version="beta">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="welcome.html">IvorySQL</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="welcome.html">Welcome</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1.html">Release</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="2.html">About</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started with IvorySQL</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="3.html">User manual</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="4.html">Administrator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="5.html">Operating personnel</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="6.html">Installation Deployment</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="7.html">Developer</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="8.html">Operation Management</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="9.html">Migration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="10.html">Community contribution</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="11.html">Tool Reference</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="12.html">FAQ</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">List of features</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="14.html">1、Ivorysql frame design</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="15.html">2、GUC Framework</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="16.html">3、Case conversion</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="17.html">4、Dual-mode design</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="18.html">5、Compatible with oracle like</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="19.html">6、Compatible with oracle anonymous block</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="20.html">7、Compatible with Oracle functions and stored procedures</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="21.html">8、Built-in data types and built-in functions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="22.html">9、Added Oracle compatibility mode ports and IP</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">IvorySQL</span>
    <span class="version">beta</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="welcome.html">IvorySQL</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="welcome.html">beta</a>
        </li>
        <li class="version">
          <a href="../../v2.3/v2.3/welcome.html">v2.3</a>
        </li>
        <li class="version">
          <a href="../../v2.2/v2.2/welcome.html">v2.2</a>
        </li>
        <li class="version">
          <a href="../../v2.1/v2.1/welcome.html">v2.1</a>
        </li>
        <li class="version">
          <a href="../../v1.5/v1.5/welcome.html">v1.5</a>
        </li>
        <li class="version">
          <a href="../../v1.4/v1.4/welcome.html">v1.4</a>
        </li>
        <li class="version">
          <a href="../../v1.3/v1.3/welcome.html">v1.3</a>
        </li>
        <li class="version">
          <a href="../../v1.2/v1.2/welcome.html">v1.2</a>
        </li>
        <li class="version">
          <a href="../../v1.1/v1.1/welcome.html">v1.1</a>
        </li>
        <li class="version">
          <a href="../../v1.0/v1.0/welcome.html">v1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="welcome.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="welcome.html">IvorySQL</a></li>
    <li><a href="6.html">Installation Deployment</a></li>
  </ul>
</nav>
  <div class="page-versions">
  <button class="version-menu-toggle" title="switch to Chinese">EN</button>
  <div class="version-menu">
    <a class="version is-current" href="">EN</a>
    <a class="version" href="../../../../cn/ivorysql-doc/beta/beta/6.html">CN</a>
  </div>
  </div>
  <div class="edit-this-page"><a href="https://github.com/IvorySQL/ivorysql_docs/edit/developer/EN/modules/ROOT/pages/beta/6.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page"><strong>Installation Deployment</strong></h1>
<div class="sect1">
<h2 id="installation-overview"><a class="anchor" href="#installation-overview"></a>1. Installation overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This article introduces the installation process and precautions of Ivorysql on Linux platform. This article mainly demonstrates the yum source installation steps, rpm package installation steps, and source code installation steps of the database under the Centos 7 environment.</p>
</div>
<div class="sect2">
<h3 id="software-and-hardware-requirements"><a class="anchor" href="#software-and-hardware-requirements"></a>1.1. Software and hardware requirements</h3>
<div class="sect3">
<h4 id="introduction-to-software-resources"><a class="anchor" href="#introduction-to-software-resources"></a>1.1.1. Introduction to software resources</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">operating system</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yum source download address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CentOS 7、CentOS 8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://yum.highgo.ca/ivorysql.html" class="bare">https://yum.highgo.ca/ivorysql.html</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="hardware-resource-preparation"><a class="anchor" href="#hardware-resource-preparation"></a>1.1.2. Hardware resource preparation</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuration parameters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Minimum configuration</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Recommended configuration</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CPU</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 cores</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16 cores</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Memory</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Storage</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">800MB，mechanical hard disk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Above 5GB，SSD or NvMe</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Network</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gigabit lan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Gigabit network</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="environment-and-configuration-check"><a class="anchor" href="#environment-and-configuration-check"></a>1.2. Environment and configuration check</h3>
<div class="paragraph">
<p>Before deploying the IvorySQL database, you need to check the system environment and configuration</p>
</div>
<div class="sect3">
<h4 id="view-resources"><a class="anchor" href="#view-resources"></a>1.2.1. View resources</h4>
<div class="paragraph">
<p>The IvorySQL database supports CentOS 7. X, 8. X operating systems. For details, refer to <a href="#_software_and_hardware_requirements">[_software_and_hardware_requirements]</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="view-the-operating-system"><a class="anchor" href="#view-the-operating-system"></a>1.2.2. View the operating system</h4>
<div class="paragraph">
<p>Run the following command to view the operating system information：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">cat /etc/redhat-release</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="view-kernel-parameters"><a class="anchor" href="#view-kernel-parameters"></a>1.2.3. View kernel parameters</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">uname -r</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="view-memory-and-clear-cache"><a class="anchor" href="#view-memory-and-clear-cache"></a>1.2.4. View memory and clear cache</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">free -g

echo 3 &gt; /proc/sys/vm/drop_caches</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="get-installation-package"><a class="anchor" href="#get-installation-package"></a>1.3. Get installation package</h3>
<div class="paragraph">
<p>You can install the IvorySql database or RPM package through the source code.</p>
</div>
<div class="sect3">
<h4 id="use-source-code-to-build-ivorysql-database"><a class="anchor" href="#use-source-code-to-build-ivorysql-database"></a>1.3.1. Use source code to build IvorySQL database</h4>
<div class="paragraph">
<p>1.Get the source code: Run the following command to clone the source code of the IvorySQL database to your build machine:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">git clone https://github.com/IvorySQL/IvorySQL.git</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Note: To clone code, you need to install and configure Git first. For details, refer to <a href="https://git-scm.com/doc">Git doc</a>.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>2.Install dependent packages: To compile IvorySQL from source code, you must ensure that prerequisite packages are available on the system. Execute the following command to install related packages：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">sudo yum install -y bison-devel readline-devel zlib-devel openssl-devel wget
sudo yum groupinstall -y 'Development Tools'</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Note: "Development Tools" includes gcc, make, flex, bison.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>3.Self-compilation and installation: The source code obtained previously is in the folder IvorySQL. Next, we will enter this folder for operation.</p>
</div>
<div class="paragraph">
<p>Configuration: Root users execute the following commands to configure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">./configure --prefix=/usr/local/ivorysql/ivorysql-3.0</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Note: Because&#8201;&#8212;&#8201;prefix is not provided, it is installed in/usr/local/pgsql by default, so you need to specify the path</p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Note: We should remember the specified directory, because the system cannot find out where the compiled and installed programs are. More configure parameters can be viewed through "./configure&#8201;&#8212;&#8201;help". You can also view the PostgreSQL manual</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Compile and install: After the configuration is completed, execute make to compile:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">make</code></pre>
</div>
</div>
<div class="paragraph">
<p>Perform a regression test before installing the newly compiled service (the following commands can be used):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">make check
make check-world</code></pre>
</div>
</div>
<div class="paragraph">
<p>Installation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">make install</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="install-the-ivorysql-database-using-the-rpm-package"><a class="anchor" href="#install-the-ivorysql-database-using-the-rpm-package"></a>1.3.2. Install the IvorySql database using the RPM package</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the following command to download the IvorySQL installation package.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>wget  https://yum.highgo.ca/dists/ivorysql-rpms/1/redhat/rhel-7-x86_64/ivorysql3-3.0-1.rhel7.x86_64.rpm

wget  https://yum.highgo.ca/dists/ivorysql-rpms/1/redhat/rhel-7-x86_64/ivorysql3-contrib-3.0-1.rhel7.x86_64.rpm

wget  https://yum.highgo.ca/dists/ivorysql-rpms/1/redhat/rhel-7-x86_64/ivorysql3-libs-3.0-1.rhel7.x86_64.rpm

wget  https://yum.highgo.ca/dists/ivorysql-rpms/1/redhat/rhel-7-x86_64/ivorysql3-server-3.0-1.rhel7.x86_64.rpm
```

&gt; Note: The installation package in the example may not be the latest version. It is recommended that you download the latest installation package.

2.Run the following command to install IvorySQL.

```
yum install -y libicu libxslt python3                   --Install dependencies first
rpm -ivh ivorysql3-libs-3.0-1.rhel7.x86_64.rpm
rpm -ivh ivorysql3-3.0-1.rhel7.x86_64.rpm
rpm -ivh ivorysql3-contrib-3.0-1.rhel7.x86_64.rpm --nodeps
rpm -ivh ivorysql3-server-3.0-1.rhel7.x86_64.rpm
```



### 1.1.4 Initialize database service

#### Initialize database

1.Create an operating system user: under the user root session, create a new user ivorysql:

```
/usr/sbin/groupadd ivorysql
/usr/sbin/useradd -g ivorysql ivorysql -c "IvorySQL3.0 Server"
passwd ivorysql
```

2.Create a data directory and modify permissions: Execute the following command in the root session:

```
chown -R ivorysql.ivorysql /var/lib/ivorysql/ivorysql-3
```

&gt; Note: The data directory is not placed in "/var/lib/ivorysql/ivorysql-3/data" according to RPM installation.

3.Environment variable: switch to user ivorysql, modify the file "/home/ivorysql/. bash_profile", and configure the environment variable：

```
umask 022
export LD_LIBRARY_PATH=/usr/local/ivorysql/ivorysql-3/lib:$LD_LIBRARY_PATH
export PATH=/usr/local/ivorysql/ivorysql-3/bin:$PATH
export PGDATA=/var/lib/ivorysql/ivorysql-3/data
```

Make the environment variable effective in the current ivorysql user session:

```
source .bash_profile
```

You can also log in again or open a new user ivorysql session.

4.Set the firewall: If the firewall is enabled, port 5333 needs to be opened:

```
firewall-cmd --zone=public --add-port=5333/tcp --permanent
firewall-cmd --reload
```

&gt; Note: The default port is 5333. If the port is not opened, the external client will fail to connect via IP.

5.Initialization: Under user ivorysql, simply execute initdb to complete initialization:

```
initdb
```

&gt; Note: The initdb operation is the same as PostgreSQL. It can be initialized according to the habits of PG.

6.Start database: use pg_ Ctl starts the database service:

```
pg_ctl start
```

View the status and start successfully:

```
pg_ctl status
```

=== Configure service

1.Client authentication: modify/ivorysql/1.2/data/pg_ Hba.conf, add the following:

```
host    all             all             0.0.0.0/0               trust
```

&gt; Note: This is trust, which means that you can log in without password.

Execute the following command to load the configuration:

```
pg_ctl reload
```

2.Basic parameters

Connect to the database through psql:

```
psql
```

Modify listening address

```
alter system set listen_addresses = '*';
```

&gt; Note: The default is listening at 127.0.0.1. The service cannot be connected outside the host.

3.Guard service

Create a service file:

```
touch /usr/lib/systemd/system/ivorysql.service
```

The editing contents are as follows:

```
[Unit]
Description=IvorySQL 3.0 database server
Documentation=https://www.ivorysql.org
Requires=network.target local-fs.target
After=network.target local-fs.target

[Service]
Type=forking

User=ivorysql
Group=ivorysql

Environment=PGDATA=/ivorysql/1.2/data/

OOMScoreAdjust=-1000

ExecStart=/usr/local/ivorysql/bin/pg_ctl start -D ${PGDATA}
ExecStop=/usr/local/ivorysql/bin/pg_ctl stop -D ${PGDATA}
ExecReload=/usr/local/ivorysql/bin/pg_ctl reload -D ${PGDATA}
A}

TimeoutSec=0

[Install]
WantedBy=multi-user.target
```

&gt; Note: There are many ways to write a service. Be careful when using it in a production environment. Please repeat the test several times.

Stop pg_ The database service started by ctl enables the systemd service and starts:

```
systemctl enable --now ivorysql.service
```

IvorSQL database service operation command:

```
systemctl start ivorysql.service
systemctl stop ivorysql.service
systemctl restart ivorysql.service
systemctl status ivorysql.service
systemctl reload ivorysql.service
```

=== installation

==== Yum source

1.Download YUM source: use wget to download on Centos7

```
wget https://yum.highgo.ca/dists/ivorysql-rpms/repo/ivorysql-release-1.0-1.noarch.rpm
```

Install ivorysql-release-1.0-1.noarch.rpm：

```
rpm -ivh ivorysql-release-1.0-1.noarch.rpm
```

After installation, the YUM source profile will be created：/etc/yum.repos.d/ivorysql.repo。

Search to view relevant installation packages：

```
yum search ivorysql
```

Table 1 for the description of search results：

.YUM source description
|====
| **serial number** | **Package name** | **description**
|1| https://yum.highgo.ca/dists/ivorysql-rpms/1/redhat/rhel-7-x86_64/ivorysql1-1.2-1.rhel7.x86_64.rpm[ivorysql1.x86_64] | IvorySQL client program and library files
|2| https://yum.highgo.ca/dists/ivorysql-rpms/1/redhat/rhel-7-x86_64/ivorysql1-contrib-1.2-1.rhel7.x86_64.rpm[ivorysql1-contrib.x86_64] | Contributed source code and binaries released with IvorySQL
|3| ivorysql1-devel.x86_64 | IvorySQL develops header files and libraries
|4| ivorysql1-docs.x86_64 | Additional documentation for IvorySQL
|5| https://yum.highgo.ca/dists/ivorysql-rpms/1/redhat/rhel-7-x86_64/ivorysql1-libs-1.2-1.rhel7.x86_64.rpm[ivorysql1-libs.x86_64] | Shared libraries required by all IvorySQL clients
|6| ivorysql1-llvmjit.x86_64 | Just-in-time compilation support for IvorySQL
|7| ivorysql1-plperl.x86_64 | Perl, the procedural language used for IvorySQL
|8| ivorysql1-plpython3.x86_64 | Python3, the procedural language for IvorySQL
|9| ivorysql1-pltcl.x86_64 | Tcl, the procedural language used for IvorySQL
|10| https://yum.highgo.ca/dists/ivorysql-rpms/1/redhat/rhel-7-x86_64/ivorysql1-server-1.2-1.rhel7.x86_64.rpm[ivorysql1-server.x86_64] | The programs required to create and run the IvorySQL server
|11| ivorysql1-test.x86_64 | Test suite released with IvorySQL
|12| vorysql-release.noarch | The Yum source configuration RPM package of Hanco Basic Software Co., Ltd
|====

2.Install IvorySQL
To install the database service, you need to install ivorysql1-server. Execute the following command in the user root session:

```
yum install -y ivorysql1-server
```

**Installation list:：**

```
ivorysql1-server.x86_64 0:1.2-1.rhel7
```

**Dependencies Installation: **

```
ivorysql1.x86_64 0:1.2-1.rhel7 ivorysql1-contrib.x86_64 0:1.2-1.rhel7
ivorysql1-libs.x86_64 0:1.2-1.rhel7 libicu.x86_64 0:50.2-4.el7_7
libtirpc.x86_64 0:0.2.4-0.16.el7 libxslt.x86_64 0:1.1.28-6.el7
python3.x86_64 0:3.6.8-18.el7 python3-libs.x86_64 0:3.6.8-18.el7
python3-pip.noarch 0:9.0.3-8.el7 python3-setuptools.noarch 0:39.2.0-10.el7
```

3.Installed directory
Table 2 describes the file directories generated during YUM installation.


.Description of installation directory file
|====
|**serial number** | **File path** | **description**
|1| /usr/local/ivorysql/ivorysql-1 | Software installation directory
|2| /var/lib/ivorysql/ivorysql-1/data | Data directory (default)
|3| /usr/bin/ivorysql-1-setup | Helps system administrators with basic database cluster management
|4| /usr/lib/systemd/system/ivorysql-1.service | Guardian services
|====

==== deb pckage

Verification environment: Linux 20.04.1-Ubuntu

1、Get deb from the official website

explain：ivorysql.deb is not currently available

2、Install deb package

```
dpkg -i ivorysql.deb
```

3、Configure environment variables

```
vi ~/.bashrc
    export PATH=/xxx/ivorysql/bin:$PATH
    export LD_LIBRARY_PATH=/xxx/ivorysql/lib

source .bashrc
```

4、Uninstall deb package

```
dpkg -r ivorysql
```

=== Uninstall the IvorySQL database

==== Compile Uninstall

1.Backup data: The data directory is under "/ivorysql/1.2/data", so we can protect the directory. It is better to stop the database service and make a backup.

```
systemctl stop ivorysql-1.service
```

2.Compile and uninstall: switch the root session to the source directory and execute the following commands respectively:

```
make uninstall
make clean
```

3.Delete residual directories and files:

```
systemctl disable ivorysql.servicemake                  --disable Service
mv /usr/lib/systemd/system/ivorysql.service /tmp/       --the service file can be moved                                                             to/tmp or deleted
rm -fr /usr/local/ivorysql/ivorysql-3                                --remove residual installation                                                             directory
```

&gt; Note: There are also user ivorysql and corresponding environment variables, which can be cleaned according to the situation. The rest is the data directory "/var/lib/ivorysql/ivorysql-3/data". Please make sure to make a backup before processing. There are also installed dependent packages, which can be uninstalled according to the situation.


==== YUM Uninstall

1.Stop database service:

```
systemctl stop ivorysql-1.service
```

First use "yum history list" to determine the transaction ID of yum installation:

```
[root@Node02 ~]# yum history list
Loaded plugins: fastestmirror
ID     | Login user               | Date and time    | Action(s)      | Altered
-------------------------------------------------------------------------------
     5 | root &lt;root&gt;              | 2022-04-27 12:38 | Install        |   11  &lt;
     4 | root &lt;root&gt;              | 2022-03-26 16:08 | Install        |   35 &gt;
     3 | root &lt;root&gt;              | 2022-03-26 16:07 | I, U           |   19
     2 | root &lt;root&gt;              | 2022-03-26 16:07 | I, U           |   73
     1 | System &lt;unset&gt;           | 2022-03-26 15:59 | Install        |  299
history list
```

You can see that the transaction with ID 5 is to execute the installation. Execute the command to uninstall (replace XX with "5"):

```
yum history undo XX
```

2.unload：

```
yum remove ivorysql-server
```

However, this command is not completely uninstalled. Only 2 dependencies have been uninstalled, and 8 dependencies have not been uninstalled. You can decide whether to uninstall in this way based on whether to retain these dependencies.</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="5.html">Operating personnel</a></span>
  <span class="next"><a href="7.html">Developer</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">

</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
