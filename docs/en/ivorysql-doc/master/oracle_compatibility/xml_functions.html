<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>XML :: IvorySQL Document Site</title>
    <link rel="canonical" href="https://docs.ivorysql.org/ivorysql-doc/master/oracle_compatibility/xml_functions.html">
    <link rel="prev" href="port_ip.html">
    <link rel="next" href="sequence.html">
    <meta name="generator" content="Antora 3.1.7">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.ivorysql.org">IvorySQL Document Site</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://www.ivorysql.org/">Home</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ivorysql-doc" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../welcome.html">IvorySQL</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../welcome.html">Welcome</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../release_notes.html">Release</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../about_ivorysql.html">About</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started with IvorySQL</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/quick_start.html">Quick Start</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/daily_monitoring.html">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/daily_maintenance.html">Maintenance</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">IvorySQL Advanced Feature</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation_guide.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cluster_setup.html">Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migration_guide.html">Migration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developer_guide.html">Developer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Containerization</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../containerization/k8s_deployment.html">K8S deployment</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../containerization/operator_deployment.html">Operator deployment</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../containerization/docker_podman_deployment.html">Docker &amp; Podman deployment</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../containerization/docker_swarm_compose_deployment.html">Docker Swarm &amp; Docker Compose deployment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operation_guide.html">Operation Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Cloud Service Platform</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cloud_platform/ivorysql_cloud_installation.html">IvorySQL Cloud Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cloud_platform/ivorysql_cloud_usage.html">IvorySQL Cloud Usage</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">IvorySQL Ecosystem</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cpu_os_adaptation/cpu_architecture_adaptation.html">CPU Architecture Adaption</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cpu_os_adaptation/os_architecture_adaptation.html">Operating System Adaption</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Eco Component Adaption</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../ecosystem_components/ecosystem_overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../ecosystem_components/postgis.html">postgis</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../ecosystem_components/pgvector.html">pgvector</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../ecosystem_components/pgddl.html">pgddl(DDL Extractor)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../ecosystem_components/pg_cron.html">pg_cron</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../ecosystem_components/pgsql_http.html">pgsql-http</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../ecosystem_components/plpgsql_check.html">plpgsql_check</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../ecosystem_components/pgroonga.html">pgroonga</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../ecosystem_components/pgaudit.html">pgaudit</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../ecosystem_components/pgrouting.html">pgrouting</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../ecosystem_components/system_stats.html">system_stats</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">IvorySQL Architecture Design</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Query Processing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../architecture/dual_parser.html">Dual Parser</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Compatibility Framework</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../architecture/framework_design.html">Ivorysql frame design</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../architecture/guc_framework.html">GUC Framework</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../architecture/dual_mode_design.html">Dual-mode design</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../architecture/initdb_process.html">initdb Process</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Compatibility Features</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../compatibility_features_design/like_operator.html">like</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../compatibility_features_design/rowid.html">RowID</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../compatibility_features_design/out_parameter.html">OUT Parameter</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../compatibility_features_design/type_rowtype.html">%Type &amp; %Rowtype</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../compatibility_features_design/nls_parameter.html">NLS Parameters</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../compatibility_features_design/function_procedure.html">Function and stored procedure</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../compatibility_features_design/nested_function.html">Nested Subfunctions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../compatibility_features_design/force_view.html">Force View</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../compatibility_features_design/case_conversion.html">Case Conversion</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../compatibility_features_design/sys_guid_function.html">sys_guid Function</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../compatibility_features_design/empty_string_to_null.html">Empty String to NULL</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../compatibility_features_design/call_into.html">CALL INTO</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Built-in Functions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../oracle_builtin_functions/sys_context.html">sys_context</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../oracle_builtin_functions/userenv.html">userenv</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../gb18030.html">GB18030 Character Set</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">List of Oracle compatible features</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="compat_case_conversion.html">1、Case conversion</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="compat_like_operator.html">2、LIKE operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="anonymous_block.html">3、anonymous block</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="compat_function_procedure.html">4、functions and stored procedures</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="builtin_types_functions.html">5、Built-in data types and built-in functions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="port_ip.html">6、ports and IP</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="xml_functions.html">7、XML Function</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sequence.html">8、sequence</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="package.html">9、Package</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="invisible_column.html">10、Invisible Columns</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="compat_rowid.html">11、RowID Column</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="compat_out_parameter.html">12、OUT Parameter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="compat_type_rowtype.html">13、%Type &amp; %Rowtype</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="compat_nls_parameter.html">14、NLS Parameters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="compat_force_view.html">15、Force View</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="compat_nested_function.html">16、Nested Subfunctions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="compat_sys_guid.html">17、sys_guid Function</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="compat_empty_string_to_null.html">18、Empty String to NULL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="compat_call_into.html">19、CALL INTO</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../contribution/community_contribution_guide.html">Community contribution</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tools_reference.html">Tool Reference</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../contribution/faq.html">FAQ</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">IvorySQL</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../welcome.html">IvorySQL</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../welcome.html">master</a>
        </li>
        <li class="version">
          <a href="../../v5.1/v5.1/welcome.html">v5.1</a>
        </li>
        <li class="version">
          <a href="../../v5.0/v5.0/welcome.html">v5.0</a>
        </li>
        <li class="version">
          <a href="../../v4.6/v4.6/welcome.html">v4.6</a>
        </li>
        <li class="version">
          <a href="../../v1.17/v1.17/welcome.html">v1.17</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../welcome.html">IvorySQL</a></li>
    <li>List of Oracle compatible features</li>
    <li><a href="xml_functions.html">7、XML Function</a></li>
  </ul>
</nav>
  <div class="page-versions">
  <button class="version-menu-toggle" title="switch to Chinese">EN</button>
  <div class="version-menu">
    <a class="version is-current" href="">EN</a>
    <a class="version" href="../../../../cn/ivorysql-doc/master/oracle_compatibility/xml_functions.html">CN</a>
  </div>
  </div>
  <div class="edit-this-page"><a href="https://github.com/IvorySQL/ivorysql_docs/edit/master/EN/modules/ROOT/pages/master/oracle_compatibility/xml_functions.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">XML</h1>
<div class="sect1">
<h2 id="objective"><a class="anchor" href="#objective"></a>1. Objective</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Oracle, SQL code often contains XML functions. To ensure consistency in data format and structure when migrating from Oracle to IvorySQL, IvorySQL achieves high compatibility with Oracle XML functions, building upon the foundation of PostgreSQL.</p>
</div>
<div class="paragraph">
<p>This compatibility means that users do not need to make extensive modifications to their existing XML processing logic, thereby ensuring the integrity and accuracy of the data. Furthermore, IvorySQL&#8217;s cross-platform compatibility reduces the additional user maintenance and upgrade costs caused by format differences, making data processing and management more efficient, reliable, and flexible.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>XML (eXtended Markup Language) is a text-based format language used to structure any document that can be tagged. It is a lightweight, extensible, standard, and easy-to-understand language for storing data.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="implementation-principle"><a class="anchor" href="#implementation-principle"></a>2. Implementation Principle</h2>
<div class="sectionbody">
<div class="paragraph">
<p>IvorySQL achieves compatibility with commonly used XML SQL functions. It maintains consistency with PostgreSQL by utilizing the same underlying processing functions, which are provided by the libxml2 library interface. These XML functions are provided as a sub-plugin of the ivorysql_ora plugin, ensuring compatibility and consistency with PostgreSQL databases in terms of XML processing.</p>
</div>
<div class="paragraph">
<p>Due to Oracle&#8217;s XML functions requiring certain parameter types to be XMLType, such as the existsnode() function below:</p>
</div>
<div class="paragraph">
<p>Prototype:
EXISTSNODE(XMLType_instance, XPath_string [, namespace_string ])</p>
</div>
<div class="paragraph">
<p>Demo:
SELECT existsnode(XMLType('&lt;a&gt;&lt;b&gt;d&lt;/b&gt;&lt;/a&gt;'), '/a') from dual;</p>
</div>
<div class="paragraph">
<p>Therefore, for compatibility purposes, an XMLType data type has been added. Its function is to convert the string provided by the user into an internal XMLType type, allowing SQL statements to be migrated from Oracle to IvorySQL without modification.</p>
</div>
<div class="paragraph">
<p>Additionally, to avoid confusion with the existing keyword "extract" in PostgreSQL, IvorySQL has renamed the original keyword to "PGEXTRACT" to ensure clarity and accuracy in function calls.</p>
</div>
<div class="paragraph">
<p>When implementing these Oracle-compatible XML functions, IvorySQL adopted two different approaches. Among them, besides the UPDATEXML function, the other functions are implemented using SQL functions. Since the number of parameters for the UPDATEXML function is uncertain, an expression-based approach was used for its implementation. This required writing specialized syntax parsing and executor code to ensure the correctness and flexibility of its functionality.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compatible-function"><a class="anchor" href="#compatible-function"></a>3. Compatible Function</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Num</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Function Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Function Introduction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#extract(XML)">extract(XML)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This function is used to return the corresponding content under the XML node path. The parameter XMLType_instance is used to specify the XMLType instance, while Xpath_string is used to specify the XML node path.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#extractvalue">extractvalue</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This function provides retrieval functionality for XML content. The extractvalue function can only return one value from one node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#existsnode">existsnode</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This function is used to check whether the XML content matches the specified path expression.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#deletexml">deletexml</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This function is used to delete XML nodes at specified paths.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#appendchildxml">appendchildxml</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This function is used to insert child nodes into an XML object. It takes an XML object and an XML fragment as parameters, and inserts the XML fragment as a child node into the XML object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#updatexml">updatexml</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This function is used to update the content of a specific XML node path.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#insertxmlbefore">insertxmlbefore</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This function is used to insert child nodes before a specified path in XML.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#insertxmlafter">insertxmlafter</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This function is used to insert child nodes after a specified path in XML.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#insertchildxml">insertchildxml</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This function is used to insert child nodes into a specified XML path.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#insertchildxmlbefore">insertchildxmlbefore</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This function is used to insert child nodes before a specified XML path.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#insertchildxmlafter">insertchildxmlafter</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This function is used to insert child nodes after a specified XML path.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#xmlisvalid">xmlisvalid</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This functions is used to check the xml content is valid or not</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="xml-function-demo"><a class="anchor" href="#xml-function-demo"></a>4. XML Function Demo</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="prepare-table-and-data"><a class="anchor" href="#prepare-table-and-data"></a>4.1. Prepare table and data</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# set ivorysql.compatible_mode to oracle;
SET
ivorysql=# create table inaf(a int, b xmltype);
CREATE TABLE
ivorysql=# insert into inaf values(1,xmltype('&lt;a&gt;&lt;b&gt;100&lt;/b&gt;&lt;/a&gt;'));
INSERT 0 1
ivorysql=# insert into inaf values(2, '');
INSERT 0 1
ivorysql=# select * from inaf;
 a |         b
---+-------------------
 1 | &lt;a&gt;&lt;b&gt;100&lt;/b&gt;&lt;/a&gt;
 2 |
(2 rows)
ivorysql=# create table xmltest(id int, data XMLType);
CREATE TABLE
ivorysql=# insert into xmltest values(1, '&lt;value&gt;one&lt;/value&gt;');
INSERT 0 1
ivorysql=# insert into xmltest values(2, '&lt;value&gt;two&lt;/value&gt;');
INSERT 0 1
ivorysql=# select * from xmltest;
 id |        data
----+--------------------
  1 | &lt;value&gt;one&lt;/value&gt;
  2 | &lt;value&gt;two&lt;/value&gt;
(2 rows)
ivorysql=# create table xmlnstest(id int, data xmltype);
CREATE TABLE
ivorysql=# INSERT INTO xmlnstest VALUES(1, xmltype('&lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://www.def.com" xmlns:web="http://www.abc.com"&gt;&lt;soapenv:Body&gt;&lt;web:BBB&gt;&lt;typ:EEE&gt;41&lt;/typ:EEE&gt;&lt;typ:FFF&gt;42&lt;/typ:FFF&gt;&lt;/web:BBB&gt;&lt;/soapenv:Body&gt;&lt;/soapenv:Envelope&gt;'));
INSERT 0 1</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="extract(XML)"><a class="anchor" href="#extract(XML)"></a>4.2. extract(XML)</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql# SELECT extract(XMLType('&lt;AA&gt;&lt;ID&gt;1&lt;/ID&gt;&lt;/AA&gt;'), '/AA/ID') from dual;
  extract
------------
 &lt;ID&gt;1&lt;/ID&gt;
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="extractvalue"><a class="anchor" href="#extractvalue"></a>4.3. extractvalue</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql# SELECT extractvalue(XMLType('&lt;a&gt;&lt;b&gt;100&lt;/b&gt;&lt;/a&gt;'),'/a/b') from dual;
 extractvalue
--------------
 100
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="existsnode"><a class="anchor" href="#existsnode"></a>4.4. existsnode</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# SELECT existsnode(XMLType('&lt;a&gt;&lt;b&gt;d&lt;/b&gt;&lt;/a&gt;'), '/a/b') from dual;
 existsnode
------------
          1
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="deletexml"><a class="anchor" href="#deletexml"></a>4.5. deletexml</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# SELECT deletexml(XMLType('&lt;test&gt;&lt;value&gt;oldnode&lt;/value&gt;&lt;value&gt;oldnode&lt;/value&gt;&lt;/test&gt;'),  '/test/value') from dual;
 deletexml
-----------
 &lt;test/&gt;
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="appendchildxml"><a class="anchor" href="#appendchildxml"></a>4.6. appendchildxml</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# SELECT appendchildxml(XMLType('&lt;test&gt;&lt;value&gt;&lt;/value&gt;&lt;value&gt;&lt;/value&gt;&lt;/test&gt;'),  '/test/value', XMLTYPE('&lt;name&gt;newnode&lt;/name&gt;')) from dual;
      appendchildxml
--------------------------
 &lt;test&gt;                  +
   &lt;value&gt;               +
     &lt;name&gt;newnode&lt;/name&gt;+
   &lt;/value&gt;              +
   &lt;value&gt;               +
     &lt;name&gt;newnode&lt;/name&gt;+
   &lt;/value&gt;              +
 &lt;/test&gt;
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="updatexml"><a class="anchor" href="#updatexml"></a>4.7. updatexml</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# SELECT updatexml(xmltype('&lt;value&gt;one&lt;/value&gt;'), '/value', xmltype('&lt;newvalue&gt;1111&lt;/newvalue&gt;')) FROM dual;
         updatexml
---------------------------
 &lt;newvalue&gt;1111&lt;/newvalue&gt;
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="insertxmlbefore"><a class="anchor" href="#insertxmlbefore"></a>4.8. insertxmlbefore</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# SELECT insertxmlbefore(XMLType('&lt;a&gt;222&lt;b&gt;100&lt;/b&gt;&lt;b&gt;200&lt;/b&gt;&lt;/a&gt;'), '/a/b', XMLTYPE('&lt;c&gt;88&lt;/c&gt;')) from dual;
                 insertxmlbefore
--------------------------------------------------
 &lt;a&gt;222&lt;c&gt;88&lt;/c&gt;&lt;b&gt;100&lt;/b&gt;&lt;c&gt;88&lt;/c&gt;&lt;b&gt;200&lt;/b&gt;&lt;/a&gt;
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="insertxmlafter"><a class="anchor" href="#insertxmlafter"></a>4.9. insertxmlafter</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# SELECT insertxmlafter(XMLType('&lt;a&gt;&lt;b&gt;100&lt;/b&gt;&lt;/a&gt;'),'/a/b',XMLType('&lt;c&gt;88&lt;/c&gt;')) from dual;
 insertxmlafter
----------------
 &lt;a&gt;           +
   &lt;b&gt;100&lt;/b&gt;  +
   &lt;c&gt;88&lt;/c&gt;   +
 &lt;/a&gt;
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="insertchildxml"><a class="anchor" href="#insertchildxml"></a>4.10. insertchildxml</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# SELECT insertchildxml(XMLType('&lt;a&gt;one&lt;b&gt;&lt;/b&gt;three&lt;b&gt;&lt;/b&gt;&lt;/a&gt;'), '//b', 'name', XMLTYPE('&lt;name&gt;newnode&lt;/name&gt;')) from dual;
                            insertchildxml
-----------------------------------------------------------------------
 &lt;a&gt;one&lt;b&gt;&lt;name&gt;newnode&lt;/name&gt;&lt;/b&gt;three&lt;b&gt;&lt;name&gt;newnode&lt;/name&gt;&lt;/b&gt;&lt;/a&gt;
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="insertchildxmlbefore"><a class="anchor" href="#insertchildxmlbefore"></a>4.11. insertchildxmlbefore</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# SELECT insertchildxmlbefore(XMLType('&lt;a&gt;&lt;b&gt;100&lt;/b&gt;&lt;/a&gt;'), '/a', 'b', XMLType('&lt;c&gt;88&lt;/c&gt;')) from dual;
 insertchildxmlbefore
----------------------
 &lt;a&gt;                 +
   &lt;c&gt;88&lt;/c&gt;         +
   &lt;b&gt;100&lt;/b&gt;        +
 &lt;/a&gt;
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="insertchildxmlafter"><a class="anchor" href="#insertchildxmlafter"></a>4.12. insertchildxmlafter</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# SELECT insertchildxmlafter(XMLType('&lt;a&gt;&lt;b&gt;100&lt;/b&gt;&lt;/a&gt;'), '/a', 'b', XMLType('&lt;c&gt;88&lt;/c&gt;')) from dual;
 insertchildxmlafter
---------------------
 &lt;a&gt;                +
   &lt;b&gt;100&lt;/b&gt;       +
   &lt;c&gt;88&lt;/c&gt;        +
 &lt;/a&gt;
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="xmlisvalid"><a class="anchor" href="#xmlisvalid"></a>4.13. xmlisvalid</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# SELECT xmlisvalid(XMLTYPE('&lt;a&gt;'));
xmlisvalid
------------
f
(1 row)

ivorysql=# SELECT xmlisvalid(XMLTYPE('&lt;a/&gt;'));
xmlisvalid
------------
t
(1 row)</code></pre>
</div>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="port_ip.html">6、ports and IP</a></span>
  <span class="next"><a href="sequence.html">8、sequence</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">

</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
