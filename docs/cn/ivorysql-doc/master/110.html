<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>IvorySQL :: IvorySQL文档中心</title>
    <link rel="canonical" href="https://docs.ivorysql.org/ivorysql-doc/master/110.html">
    <link rel="prev" href="100.html">
    <meta name="generator" content="Antora 3.1.7">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.ivorysql.org">IvorySQL文档中心</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://www.ivorysql.org/">官方网站</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ivorysql-doc" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="welcome.html">文档中心</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">IvorySQL</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="welcome.html">欢迎</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="1.html">发行说明</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="2.html">关于IvorySQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">IvorySQL入门</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="3.1.html">快速开始</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="3.2.html">日常监控</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="3.3.html">日常维护</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">IvorySQL高级</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="4.1.html">安装指南</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="4.2.html">集群搭建</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="4.3.html">开发者指南</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="4.4.html">运维管理指南</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="4.5.html">迁移指南</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">IvorySQL生态</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="5.1.html">PostGIS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="5.2.html">pgvector</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">IvorySQL架构设计</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">查询处理</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="6.1.1.html">双parser</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">兼容框架</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="6.2.1.html">initdb过程</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">兼容特性</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="6.3.1.html">like</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="6.3.3.html">RowID</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="6.3.2.html">OUT 参数</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="6.3.4.html">%TYPE、%ROWTYPE</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="6.3.5.html">NLS 参数</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="6.3.6.html">函数与存储过程</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="6.3.7.html">嵌套子函数</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="6.3.8.html">Force View</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="6.3.9.html">大小写转换</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#master/6.4.adoc">国标GB18030</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">内置函数</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="6.4.1.html">sys_context</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="6.4.2.html">userenv</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="6.5.html">国标GB18030</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Oracle兼容功能列表</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="7.1.html">1、框架设计</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="7.2.html">2、GUC框架</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="7.3.html">3、大小写转换</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="7.4.html">4、双模式设计</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="7.5.html">5、兼容Oracle like</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="7.6.html">6、兼容Oracle匿名块</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="7.7.html">7、兼容Oracle函数与存储过程</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="7.8.html">8、内置数据类型与内置函数</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="7.9.html">9、新增Oracle兼容模式的端口与IP</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="7.10.html">10、XML函数</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="7.11.html">11、兼容Oracle sequence</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="7.12.html">12、包</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="7.13.html">13、不可见列</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="7.14.html">14、RowID</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="7.15.html">15、OUT 参数</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="7.16.html">16、%TYPE、%ROWTYPE</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="7.17.html">17、NLS 参数</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="7.18.html">18、Force View</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="7.19.html">19、嵌套子函数</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">IvorySQL贡献指南</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="8.1.html">社区贡献指南</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="8.2.html">asciidoc语法快速参考</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="9.html">工具参考</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="10.html">FAQ</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">PostgreSQL</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="100.html">PG参数参考手册</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="110.html">PG函数参考手册</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">文档中心</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="welcome.html">文档中心</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="welcome.html">master</a>
        </li>
        <li class="version">
          <a href="../v4.6/v4.6/welcome.html">v4.6</a>
        </li>
        <li class="version">
          <a href="../v4.5/v4.5/welcome.html">v4.5</a>
        </li>
        <li class="version">
          <a href="../v4.4/v4.4/welcome.html">v4.4</a>
        </li>
        <li class="version">
          <a href="../v4.2/v4.2/welcome.html">v4.2</a>
        </li>
        <li class="version">
          <a href="../v4.0/v4.0/welcome.html">v4.0</a>
        </li>
        <li class="version">
          <a href="../v3.4/v3.4/welcome.html">v3.4</a>
        </li>
        <li class="version">
          <a href="../v3.3/v3.3/welcome.html">v3.3</a>
        </li>
        <li class="version">
          <a href="../v3.2/v3.2/welcome.html">v3.2</a>
        </li>
        <li class="version">
          <a href="../v3.1/v3.1/welcome.html">v3.1</a>
        </li>
        <li class="version">
          <a href="../v3.0/v3.0/welcome.html">v3.0</a>
        </li>
        <li class="version">
          <a href="../v2.3/v2.3/welcome.html">v2.3</a>
        </li>
        <li class="version">
          <a href="../v2.2/v2.2/welcome.html">v2.2</a>
        </li>
        <li class="version">
          <a href="../v2.1/v2.1/welcome.html">v2.1</a>
        </li>
        <li class="version">
          <a href="../v1.17/v1.17/welcome.html">v1.17</a>
        </li>
        <li class="version">
          <a href="../v1.8/v1.8/welcome.html">v1.8</a>
        </li>
        <li class="version">
          <a href="../v1.5/v1.5/welcome.html">v1.5</a>
        </li>
        <li class="version">
          <a href="../v1.4/v1.4/welcome.html">v1.4</a>
        </li>
        <li class="version">
          <a href="../v1.3/v1.3/welcome.html">v1.3</a>
        </li>
        <li class="version">
          <a href="../v1.2/v1.2/welcome.html">v1.2</a>
        </li>
        <li class="version">
          <a href="../v1.1/v1.1/welcome.html">v1.1</a>
        </li>
        <li class="version">
          <a href="../v1.0/v1.0/welcome.html">v1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="welcome.html">文档中心</a></li>
    <li>PostgreSQL</li>
    <li><a href="110.html">PG函数参考手册</a></li>
  </ul>
</nav>
  <div class="page-versions">
  <button class="version-menu-toggle" title="switch to English">CN</button>
  <div class="version-menu">
    <a class="version is-current" href="">CN</a>
    <a class="version" href="../../../../en/ivorysql-doc/master/110.html">EN</a>
  </div>
  </div>
  <div class="edit-this-page"><a href="https://github.com/IvorySQL/ivorysql_docs/edit/master/CN/modules/ROOT/pages/master/110.adoc">编辑此页面</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="目录" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect1 text-center">
<h2 id="postgresql-函数参考手册"><a class="anchor" href="#postgresql-函数参考手册"></a>1. PostgreSQL 函数参考手册</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="current_catalog"><a class="anchor" href="#current_catalog"></a>1.1. current_catalog</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">current_catalog</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获得当前的database 名称。<br>
注意：在SQL标准中，databases被称之为catalogs。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select current_catalog;
 current_catalog
-----------------
 postgres
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="current_database"><a class="anchor" href="#current_database"></a>1.2. current_database()</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">current_database()</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获得当前的database 名称。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select current_database();
 current_database
------------------
 postgres
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="current_query"><a class="anchor" href="#current_query"></a>1.3. current_query()</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">current_query()</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获得client端提交的当前执行的SQL语句的文本</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=#   BEGIN;
BEGIN
postgres=*# select 1,current_query();
 ?column? |       current_query
----------+---------------------------
        1 | select 1,current_query();
(1 row)

postgres=*# select 2,current_query();
 ?column? |       current_query
----------+---------------------------
        2 | select 2,current_query();
(1 row)

postgres=*# ROLLBACK;
ROLLBACK
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="current_role"><a class="anchor" href="#current_role"></a>1.4. current_role</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">current_role</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">与current_user作用相同，获得当前执行上下文的username</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select current_role;
 current_role
--------------
 pg131
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="current_schema"><a class="anchor" href="#current_schema"></a>1.5. current_schema</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">current_schema</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获得search path中的第一个schema名称（当search path为空时，返回空值）。当表或者其他对象建立不带schema名称时，本函数返回的schema就是该表或者该对象的schema</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select current_schema;
 current_schema
----------------
 public
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="current_schema-2"><a class="anchor" href="#current_schema-2"></a>1.6. current_schema()</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">current_schema()</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">作用与current_schema函数相同：获得search path中的第一个schema名称（当search path为空时，返回空值）。当表或者其他对象建立不带schema名称时，本函数返回的schema就是该表或者该对象的schema</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select current_schema();
 current_schema
----------------
 public
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="current_schemasinclude_implicit-boolean"><a class="anchor" href="#current_schemasinclude_implicit-boolean"></a>1.7. current_schemas(include_implicit boolean)</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">current_schemas(include_implicit boolean)</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">以优先级顺序返回有效search_path中当前所有模式名称，如果入参为true，那么在函数返回结果中会包括隐式搜索的系统模式pg_catalog</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select current_schemas(false);
 current_schemas
-----------------
 {public}
(1 row)

postgres=# select current_schemas(true);
   current_schemas
---------------------
 {pg_catalog,public}
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="current_user"><a class="anchor" href="#current_user"></a>1.8. current_user</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">current_user</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获得当前执行上下文的username</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select current_user;
 current_user
--------------
 pg131
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="inet_client_addr"><a class="anchor" href="#inet_client_addr"></a>1.9. inet_client_addr()</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">inet_client_addr()</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获得当前client的ip地址。如果返回值为空，表示当前连接是经过Unix-domain socket的</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select inet_client_addr();
 inet_client_addr
------------------

(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="inet_client_port"><a class="anchor" href="#inet_client_port"></a>1.10. inet_client_port()</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">inet_client_port()</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获得当前client的端口号。如果返回值为空，表示当前连接是经过Unix-domain socket的</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select inet_client_port();
 inet_client_port
------------------

(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="inet_server_addr"><a class="anchor" href="#inet_server_addr"></a>1.11. inet_server_addr()</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">inet_server_addr()</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获得当前连接的pg数据库服务器的ip地址。如果返回值为空，表示当前连接是经过Unix-domain socket的。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select inet_server_port();
 inet_server_port
------------------

(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="inet_server_port"><a class="anchor" href="#inet_server_port"></a>1.12. inet_server_port()</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">inet_server_port()</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获得当前连接的pg数据库服务器的端口号。如果返回值为空，表示当前连接是经过Unix-domain socket的。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select inet_server_port();
 inet_server_port
------------------

(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_backend_pid"><a class="anchor" href="#pg_backend_pid"></a>1.13. pg_backend_pid()</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_backend_pid()</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获得附加到当前session的backend进程的进程ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_backend_pid();
 pg_backend_pid
----------------
           4068
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_blocking_pidsinteger"><a class="anchor" href="#pg_blocking_pidsinteger"></a>1.14. pg_blocking_pids(integer)</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_blocking_pids(integer)</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer[]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>返回入参pid的blocking pid(即:阻塞者pid)若是本函数返回空值，表示不存在阻塞者若是本函数返回值是零，那么表示阻塞者是prepared transacion，见下面的输出：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_blocking_pids(12947); pg_blocking_pids
------------------
{0}
(1 row)
 postgres=#</code></pre>
</div>
</div>
<div class="paragraph">
<p>频繁调用本函数会对数据库性能有影响，因为本函数在短时间内对lock manager&#8217;s shared state进行排他访问(exclusive accesss)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">Session1：
postgres=# SELECT pg_backend_pid();
 pg_backend_pid
----------------
          32262
(1 row)

postgres=# CREATE TABLE tbl_students(rno int, name character varying(10));
CREATE TABLE
postgres=# BEGIN TRANSACTION;
BEGIN
postgres=*# LOCK tbl_students IN ACCESS EXCLUSIVE MODE;
LOCK TABLE
postgres=*#


session2：
postgres=# SELECT pg_backend_pid();
 pg_backend_pid
----------------
          32439
(1 row)

postgres=# INSERT INTO tbl_students VALUES (1,'Anvesh');


session3:
postgres=# SELECT pg_blocking_pids(32439);
 pg_blocking_pids
------------------
 {32262}
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_conf_load_time"><a class="anchor" href="#pg_conf_load_time"></a>1.15. pg_conf_load_time()</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_conf_load_time()</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">timestamp with time zone</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回PG配置参数文件最后一次被reload的时间</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_conf_load_time();
       pg_conf_load_time
-------------------------------
 2021-03-22 12:46:18.962643+08
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_current_logfiletext"><a class="anchor" href="#pg_current_logfiletext"></a>1.16. pg_current_logfile([text]);</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_current_logfile([text]);</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数或者text型输入参数 (csvlog、stderr)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回正在被logging collector进程使用的log file的path(是log_directory的值)和文件名。当logging collector是被禁用时，本函数返回结果是null。当有不同格式的多种log files存在时，不带任何参数的pg_current_logfile()函数返回有序列表(stderr、csvlog)中找到的第一种格式的文件path和文件名。当没有这两个格式的文件时，本函数返回NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_current_logfile();
          pg_current_logfile
--------------------------------------
 log/postgresql-2021-03-22_124618.log
(1 row)

postgres=# select pg_current_logfile('stderr');
          pg_current_logfile
--------------------------------------
 log/postgresql-2021-03-22_124618.log
(1 row)

postgres=# select pg_current_logfile('csvlog');
 pg_current_logfile
--------------------

(1 row)

postgres=# show log_destination ;
 log_destination
-----------------
 stderr
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_my_temp_schema"><a class="anchor" href="#pg_my_temp_schema"></a>1.17. pg_my_temp_schema()</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_my_temp_schema()</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回当前会话的临时schema的OID，如果没有临时schema，本函数返回0（即：数字零）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_my_temp_schema();
 pg_my_temp_schema
-------------------
 0
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_is_other_temp_schemaoid"><a class="anchor" href="#pg_is_other_temp_schemaoid"></a>1.18. pg_is_other_temp_schema(oid)</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_is_other_temp_schema(oid)</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">当入参的oid是其他session中临时schema的oid时，本函数返回true。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_is_other_temp_schema(16426);
 pg_is_other_temp_schema
-------------------------
 f
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_jit_available"><a class="anchor" href="#pg_jit_available"></a>1.19. pg_jit_available()</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_jit_available()</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">如果jit编译器扩展是可用的并且jit配置参数设置为on的话，本函数返回true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_jit_available();
 pg_jit_available
------------------
 f
(1 row)

postgres=# select * from pg_config where name='CONFIGURE' AND SETTING LIKE '%--with-llvm%';
 name | setting
------+---------
(0 rows)

postgres=# show jit;
 jit
-----
 on
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_listening_channels"><a class="anchor" href="#pg_listening_channels"></a>1.20. pg_listening_channels()</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_listening_channels()</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">setof text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">当前session正在监听的异步通知通道的名称</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_listening_channels();
 pg_listening_channels
-----------------------
(0 rows)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_notification_queue_usage"><a class="anchor" href="#pg_notification_queue_usage"></a>1.21. pg_notification_queue_usage()</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_notification_queue_usage()</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double precision</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回被正在等待处理的通知占据的异步通知队列最大大小的比例。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_notification_queue_usage();
 pg_notification_queue_usage
-----------------------------
                           0
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_postmaster_start_time"><a class="anchor" href="#pg_postmaster_start_time"></a>1.22. pg_postmaster_start_time()</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_postmaster_start_time()</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">timestamp with time zone</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回PG intance 启动的时间点</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_postmaster_start_time();
   pg_postmaster_start_time
-------------------------------
 2021-03-23 14:01:33.352011+08
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_safe_snapshot_blocking_pidsinteger"><a class="anchor" href="#pg_safe_snapshot_blocking_pidsinteger"></a>1.23. pg_safe_snapshot_blocking_pids(integer)</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_safe_snapshot_blocking_pids(integer)</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer[]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回阻止指定服务器进程ID获取安全快照的进程ID若是没有阻塞，则返回空array。一个运行SERIALIZABLE事务的session阻塞了一个SERIALIZABLE READ ONLY DEFERRABLE事务，防止后者获得snapshot，直到后者确认可以安全的避免获取任何谓词锁。频繁调用本函数会对数据库性能有影响，因为它在短时间内需要访问谓词锁管理器的共享状态(predicate lock manager&#8217;s shared state)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_safe_snapshot_blocking_pids(1234);
 pg_safe_snapshot_blocking_pids
--------------------------------
 {}
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_trigger_depth"><a class="anchor" href="#pg_trigger_depth"></a>1.24. pg_trigger_depth()</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_trigger_depth()</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回PostgreSQL触发器的当前嵌套级别(如果没有从触发器内部直接或间接调用，则为返回值为0)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_trigger_depth();
 pg_trigger_depth
------------------
                0
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="user"><a class="anchor" href="#user"></a>1.25. user</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">user</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获得当前执行上下文的username，等同于current_user函数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select user;
 user
-------
 pg131
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="version"><a class="anchor" href="#version"></a>1.26. Version()</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">Version()</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回带有数据库版本号的字符串，您也可以查询server_version配置参数获得数据库版本号。对于机器可读的版本，请使用server_version_num配置参数。在软件开发过程中应该使用server_version_num配置参数或者PqserverVersion，而不是去解析文本的版本号(见下面的使用举例)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select version();
                                                 version
---------------------------------------------------------------------------------------------------------
 PostgreSQL 13.1 on x86_64-pc-linux-gnu, compiled by gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44), 64-bit
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="has_any_column_privilegeuser-table-privilege"><a class="anchor" href="#has_any_column_privilegeuser-table-privilege"></a>1.27. has_any_column_privilege(user, table, privilege)</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">has_any_column_privilege(user, table, privilege)</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user, table, privilege或者table, privilege</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">确定一个user是否对当前PG database中的某个table任一列有列权限确定当前user是否对当前PG database中的某个table任一列有列权限权限类型是SELECT, INSERT, UPDATE,REFERENCES的组合。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">[pg131@VM-0-8-centos ~]$ psql -d cwbase3 -U lc0039999
psql (13.1)
Type "help" for help.

cwbase3=&gt; \d
         List of relations
 Schema | Name  | Type  |   Owner
--------+-------+-------+-----------
 public | test1 | table | lc0039999
(1 row)

cwbase3=&gt; select has_any_column_privilege('lc0039999','test1','select');
 has_any_column_privilege
--------------------------
 t
(1 row)

cwbase3=&gt;
cwbase3=&gt; select has_any_column_privilege('test1','select,insert');
 has_any_column_privilege
--------------------------
 t
(1 row)

cwbase3=&gt;

cwbase3=&gt; select has_any_column_privilege('test1','select');
 has_any_column_privilege
--------------------------
 t
(1 row)

cwbase3=&gt;</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="has_column_privilegeuser-table-column-privilege"><a class="anchor" href="#has_column_privilegeuser-table-column-privilege"></a>1.28. has_column_privilege(user, table, column, privilege)</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">has_column_privilege(user, table, column, privilege);</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user, table, column, privilege或者table, column, privilege</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">特定user对特定表的某一列是否具有某种权限当前user对特定表的某一列是否具有某种权限权限类型是SELECT, INSERT, UPDATE,REFERENCES的组合。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">cwbase3=&gt; \d test1
               Table "public.test1"
 Column |  Type   | Collation | Nullable | Default
--------+---------+-----------+----------+---------
 id     | integer |           |          |

cwbase3=&gt;
cwbase3=&gt; select has_column_privilege('lc0039999','test1','id','select');
 has_column_privilege
----------------------
 t
(1 row)

cwbase3=&gt;
cwbase3=&gt; select has_column_privilege('test1','id','select');
 has_column_privilege
----------------------
 t
(1 row)

cwbase3=&gt;</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="has_database_privilege"><a class="anchor" href="#has_database_privilege"></a>1.29. has_database_privilege</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">has_database_privilege</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user, database, privilege或者database, privilege</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">特定user是否对特定database有某种权限当前user是否对特定database有某种权限权限类型是CREATE, CONNECT, TEMPORARY, or TEMP的组合。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select has_database_privilege('lc0039999','cwbase3','create,connect,temp');
 has_database_privilege
------------------------
 t
(1 row)

postgres=# select has_database_privilege('lc0019999','cwbase3','create,connect,temp');
 has_database_privilege
------------------------
 t
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="has_foreign_data_wrapper_privilege"><a class="anchor" href="#has_foreign_data_wrapper_privilege"></a>1.30. has_foreign_data_wrapper_privilege</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">has_foreign_data_wrapper_privilege</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user, fdw, privilege或者fdw, privilege</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">特定user是否对特定fdw有usage权限当前user是否对特定fdw有usage权限此处的权限只能指定usage</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select  has_foreign_data_wrapper_privilege('lc0019999','file_fdw','usage');
 has_foreign_data_wrapper_privilege
------------------------------------
 f
(1 row)

postgres=#
postgres=# select  has_foreign_data_wrapper_privilege('file_fdw','usage');
 has_foreign_data_wrapper_privilege
------------------------------------
 t
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="has_function_privilege"><a class="anchor" href="#has_function_privilege"></a>1.31. has_function_privilege</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">has_function_privilege</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user, function, privilege或者function, privilege</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">特定user是否对特定function有EXECUTE权限当前user是否对特定function有EXECUTE权限此处的权限只能是EXECUTE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select has_function_privilege('lc0039999','version()','execute');
has_function_privilege
------------------------
t
(1 row)
 postgres=# postgres=# select has_function_privilege('version()','execute');
 has_function_privilege
 ------------------------
 t
 (1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="has_language_privilege"><a class="anchor" href="#has_language_privilege"></a>1.32. has_language_privilege</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">has_language_privilege</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user, language, privilege或者language, privilege</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">特定user是否对特定procedural language有usage权限当前user是否对特定procedural language有usage权限此处的权限必须是usage</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select has_language_privilege('lc0019999','sql','usage');
has_language_privilege
------------------------
t
(1 row)
 postgres=# select has_language_privilege('plpgsql','usage');
 has_language_privilege
  ------------------------
   t
   (1 row)
 postgres=#</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>注意：此处的language可以从pg_language系统表查询到。</pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="has_schema_privilege"><a class="anchor" href="#has_schema_privilege"></a>1.33. has_schema_privilege</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">has_schema_privilege</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user, schema, privilege或者schema, privilege</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">特定user是否对特定schema有usage或者create权限当前user是否对特定schema有usage或者create权限此处的权限必须是create或者usage的组合</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# \dnS
      List of schemas
        Name        | Owner
--------------------+-------
 information_schema | pg131
 pg_catalog         | pg131
 pg_toast           | pg131
 public             | pg131
 s_abc              | pg131
(5 rows)

postgres=# select has_schema_privilege('lc0019999','s_abc','usage');
 has_schema_privilege
----------------------
 f
(1 row)

postgres=# select has_schema_privilege('lc0019999','s_abc','usage,create');
 has_schema_privilege
----------------------
 f
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="has_sequence_privilege"><a class="anchor" href="#has_sequence_privilege"></a>1.34. has_sequence_privilege</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">has_sequence_privilege</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user, sequence, privilege或者sequence, privilege</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">特定user是否对特定sequence有特定权限当前user是否对特定sequence有特定权限此处的权限是USAGE, SELECT, UPDATE的组合。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# \ds+
                                 List of relations
 Schema |     Name     |   Type   | Owner | Persistence |    Size    | Description
--------+--------------+----------+-------+-------------+------------+-------------
 public | gen_y_c1_seq | sequence | pg131 | permanent   | 8192 bytes |
(1 row)

postgres=# select has_sequence_privilege('pg131','gen_y_c1_seq','usage');
 has_sequence_privilege
------------------------
 t
(1 row)

postgres=# select has_sequence_privilege('lc0039999','gen_y_c1_seq','usage');
 has_sequence_privilege
------------------------
 f
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="has_server_privilege"><a class="anchor" href="#has_server_privilege"></a>1.35. has_server_privilege</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">has_server_privilege</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user, server, privilege或者server, privilege</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">特定user是否对特定foreign server有usage权限特定user是否对特定foreign server有usage权限此处的权限必须是usage</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select has_server_privilege('s1','usage');
has_server_privilege
----------------------
t
(1 row)
postgres=# select has_server_privilege('s1','USAGE');
has_server_privilege
----------------------
t
(1 row)
postgres=# select has_server_privilege('pg123','s1','USAGE');
has_server_privilege
----------------------
t
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="has_table_privilege"><a class="anchor" href="#has_table_privilege"></a>1.36. has_table_privilege</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">has_table_privilege</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user, table, privilege或者table, privilege</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">特定user是否对特定table有特定权限当前user是否对特定table有特定权限此处的权限是指如下的组合： SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER，还可以带有WITH GRANT OPTION用来测试privilege是否带有grant option。当权限字符串有多个值(比如&#8217;insert, select')时,只要有任何一个权限是满足的，本函数会返回t有关对权限字符串的说明：权限字符串不区分大小写权限字符串的前后可以有一个或者多个空格（权限名字内部不能有空格）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select has_table_privilege('t1','  select,  insert ');
 has_table_privilege
---------------------
 t
(1 row)

postgres=#
[pg131@VM-0-8-centos ~]$ psql -d cwbase3 -U lc0039999
psql (13.1)
Type "help" for help.

cwbase3=&gt;
cwbase3=&gt; grant select on test1 to lc0019999;
GRANT
cwbase3=&gt; exit
[pg131@VM-0-8-centos ~]$ psql -d cwbase3 -U lc0019999
psql (13.1)
Type "help" for help.

cwbase3=&gt; select * from test1;
 id
 ----
  1
  2
  3

  4
  5
(6 rows)

cwbase3=&gt; select has_table_privilege('test1','insert, select ');
 has_table_privilege
---------------------
 t
(1 row)

cwbase3=&gt; select has_table_privilege('test1','insert');
 has_table_privilege
---------------------
 f
(1 row)

cwbase3=&gt; select has_table_privilege('test1',' insert ');
 has_table_privilege
---------------------
 f
(1 row)

cwbase3=&gt; insert into test1 values(6);
ERROR:  permission denied for table test1
cwbase3=&gt;</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="has_tablespace_privilege"><a class="anchor" href="#has_tablespace_privilege"></a>1.37. has_tablespace_privilege</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">has_tablespace_privilege</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user, tablespace, privilege或者tablespace, privilege</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">特定user是否对特定tablesapce有特定权限当前user是否对特定tablespace有特定权限此处的权限必须是create</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select has_tablespace_privilege('ts1','create ');
has_tablespace_privilege
--------------------------
t
(1 row)
postgres=# select has_tablespace_privilege('lc0019999','ts1','create ');
has_tablespace_privilege
--------------------------
f
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="has_type_privilege"><a class="anchor" href="#has_type_privilege"></a>1.38. has_type_privilege</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">has_type_privilege</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user, type, privilege或者type, privilege</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">特定user是否对特定type有特定权限当前user是否对特定type有特定权限特定type可以使用type的name，也可以使用oid::regtype的形式此处的权限必须是USAGE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select has_type_privilege('bytea','usage');
has_type_privilege
--------------------
t
(1 row)
postgres=# select has_type_privilege('lc0019999','bytea','usage');
has_type_privilege
--------------------
t
(1 row)
postgres=# select has_type_privilege('lc0019999','17:regtype','usage');
ERROR: syntax error at or near "17"
CONTEXT: invalid type name "17:regtype"
postgres=# select has_type_privilege('lc0019999',17::regtype,'usage');
has_type_privilege
--------------------
t
(1 row)
postgres=# select has_type_privilege('lc0019999','17::regtype','usage');
ERROR: syntax error at or near "17"
CONTEXT: invalid type name "17::regtype"
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_has_role"><a class="anchor" href="#pg_has_role"></a>1.39. pg_has_role</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_has_role</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user, role, privilege或者role, privilege</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">特定user是否对特定role group有特定权限当前user是否对特定role group有特定权限此处的权限必须是member或者usage当权限是member时，表示特定user是否是特定role group的member当权限是usage时，表示在不执行set role时，特定user是否有特定role的权限</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# create role editors;
CREATE ROLE
postgres=# create user maxwell;
CREATE ROLE
postgres=# create user ernest;
CREATE ROLE
postgres=# grant authors to editors; --editors can do what authors can do
GRANT ROLE
postgres=# grant editors to maxwell; --maxwell is an editor
GRANT ROLE
postgres=# grant authors to ernest; --ernest is an author
GRANT ROLE
postgres=# select pg_has_role('maxwll','editors','member');
ERROR:  role "maxwll" does not exist
postgres=# select pg_has_role('maxwell','editors','member');
 pg_has_role
-------------
 t
(1 row)

postgres=# select pg_has_role('maxwell','editors','usage');
 pg_has_role
-------------
 t
(1 row)

postgres=# select pg_has_role('maxwell','ernest','usage');
 pg_has_role
-------------
 f
(1 row)

postgres=# select pg_has_role('maxwell','ernest','member');
 pg_has_role
-------------
 f
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="row_security_active"><a class="anchor" href="#row_security_active"></a>1.40. row_security_active</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">row_security_active</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table，可以是table name，也可以是table的oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在current_user的上下文中，特定table是否已开启row security</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select oid from pg_class where relname='test';
  oid
-------
 16860
(1 row)

postgres=# select row_security_active('test');
 row_security_active
---------------------
 f
(1 row)

postgres=# select row_security_active(16860);
 row_security_active
---------------------
 f
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="acldefault"><a class="anchor" href="#acldefault"></a>1.41. acldefault</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">acldefault</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type, ownerId</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">aclitem[]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回属于某个user oid对象的默认访问权限。当一个对象的ACL条目为null时这些访问权限是该对象的默认权限Type参数的取值如下：'c' for COLUMN&#8217;r' for TABLE 以及类似对象&#8217;s' for SEQUENCE&#8217;d' for DATABASE&#8217;f' for FUNCTION 或者PROCEDURE&#8217;l' for LANGUAGE&#8217;L' for LARGE OBJECT&#8217;n' for SCHEMA&#8217;t' for TABLESPACE&#8217;F' for FOREIGN DATA WRAPPER&#8217;S' for FOREIGN SERVER&#8217;T' for TYPE or DOMAIN</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select acldefault('f',16877);
acldefault
--------------------------------------
{=X/lc0039999,lc0039999=X/lc0039999}
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="aclexplode"><a class="anchor" href="#aclexplode"></a>1.42. aclexplode</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">aclexplode</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">aclitem[]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">setof record</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">解析 acl 权限</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select aclexplode('{=X/lc0039999,lc0039999=X/lc0039999}');
 aclexplode
-------------------------
 (16877,0,EXECUTE,f)
 (16877,16877,EXECUTE,f)
 (2 rows)
postgres=# postgres=# select \* from aclexplode('{=X/lc0039999,lc0039999=X/lc0039999}');
 grantor | grantee | privilege_type | is_grantable
---------+---------+----------------+--------------
 16877 | 0 | EXECUTE | f
 16877 | 16877 | EXECUTE | f
(2 rows)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="makeaclitem"><a class="anchor" href="#makeaclitem"></a>1.43. makeaclitem</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">makeaclitem</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">grantee, grantor, privilege, grantable</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">aclitem</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">构建aclitem</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select \* from makeaclitem(16877,16877,'EXECUTE',false);
makeaclitem
-----------------------
lc0039999=X/lc0039999
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_collation_is_visible"><a class="anchor" href="#pg_collation_is_visible"></a>1.44. pg_collation_is_visible</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_collation_is_visible</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">collation_oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在当前schema search path中，特定collation是否可见。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select * from pg_collation where collname = 'zh_CN';
  oid  | collname | collnamespace | collowner | collprovider | collisdeterministic | collencoding | collcollate | collctype  | collversion
-------+----------+---------------+-----------+--------------+---------------------+--------------+-------------+------------+-------------
 13086 | zh_CN    |            11 |        10 | c            | t                   |            2 | zh_CN       | zh_CN      | 2.17
 13243 | zh_CN    |            11 |        10 | c            | t                   |            6 | zh_CN.utf8  | zh_CN.utf8 | 2.17
(2 rows)

postgres=# select  pg_collation_is_visible(13086);
 pg_collation_is_visible
-------------------------
 f
(1 row)

postgres=# select  pg_collation_is_visible(13243);
 pg_collation_is_visible
-------------------------
 t
(1 row)

postgres=#
postgres=# select  pg_collation_is_visible('"zh_CN"'::regcollation);
 pg_collation_is_visible
-------------------------
 t
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_conversion_is_visible"><a class="anchor" href="#pg_conversion_is_visible"></a>1.45. pg_conversion_is_visible</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_conversion_is_visible</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">conversion_oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在当前schema search path中，特定conversion是否可见</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select *  from pg_conversion  where conname like '%cn%';
 oid  |    conname     | connamespace | conowner | conforencoding | contoencoding |    conproc     | condefault
------+----------------+--------------+----------+----------------+---------------+----------------+------------
 4422 | euc_cn_to_mic  |           11 |       10 |              2 |             7 | euc_cn_to_mic  | t
 4423 | mic_to_euc_cn  |           11 |       10 |              7 |             2 | mic_to_euc_cn  | t
 4480 | euc_cn_to_utf8 |           11 |       10 |              2 |             6 | euc_cn_to_utf8 | t
 4481 | utf8_to_euc_cn |           11 |       10 |              6 |             2 | utf8_to_euc_cn | t
(4 rows)

postgres=# select pg_conversion_is_visible(4480);
 pg_conversion_is_visible
--------------------------
 t
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_function_is_visible"><a class="anchor" href="#pg_function_is_visible"></a>1.46. pg_function_is_visible</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_function_is_visible</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">function_oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在当前schema search path中，特定function、procedures、aggregates是否可见。对于函数，如果路径前面没有相同名称和参数数据类型的对象，则搜索路径中的对象可见</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select oid from pg_proc where proname='version';
 oid
-----
  89
(1 row)

postgres=# select pg_function_is_visible(89);
 pg_function_is_visible
------------------------
 t
(1 row)

postgres=#
postgres=# select pg_function_is_visible('version'::regproc);
 pg_function_is_visible
------------------------
 t
(1 row)

postgres=# select pg_function_is_visible('version()'::regprocedure);
 pg_function_is_visible
------------------------
 t
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_opclass_is_visible"><a class="anchor" href="#pg_opclass_is_visible"></a>1.47. pg_opclass_is_visible</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_opclass_is_visible</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">opclass_oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在当前schema search path中，特定operator class是否可见考虑因素是operator class name和相关的索引访问方法。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select oid from pg_opclass where opcname='array_ops';
  oid
-------
 10000
 10001
 10063
(3 rows)

postgres=# select pg_opclass_is_visible(10000);
 pg_opclass_is_visible
-----------------------
 t
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_operator_is_visible"><a class="anchor" href="#pg_operator_is_visible"></a>1.48. pg_operator_is_visible</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_operator_is_visible</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">operator_oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在当前schema search path中，特定operator 是否可见对于运算符，如果路径前面没有相同名称和参数数据类型的对象，则搜索路径中的对象可见</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select oprname from pg_operator where oid=15;
 oprname
---------
 =
(1 row)

postgres=# select pg_operator_is_visible(15);
 pg_operator_is_visible
------------------------
 t
(1 row)

postgres=#
postgres=#  select pg_operator_is_visible('=(integer,integer)'::regoperator);
 pg_operator_is_visible
------------------------
 t
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_opfamily_is_visible"><a class="anchor" href="#pg_opfamily_is_visible"></a>1.49. pg_opfamily_is_visible</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_opfamily_is_visible</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">opclass_oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在当前schema search path中，特定operator family是否可见</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select *  from pg_opfamily where oid='397';
 oid | opfmethod |  opfname  | opfnamespace | opfowner
-----+-----------+-----------+--------------+----------
 397 |       403 | array_ops |           11 |       10
(1 row)

postgres=# select pg_opfamily_is_visible(397);
 pg_opfamily_is_visible
------------------------
 t
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_statistics_obj_is_visible"><a class="anchor" href="#pg_statistics_obj_is_visible"></a>1.50. pg_statistics_obj_is_visible</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_statistics_obj_is_visible</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">stat_oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在当前schema search path中，特定operator class是否可见</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_table_is_visible"><a class="anchor" href="#pg_table_is_visible"></a>1.51. pg_table_is_visible</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_table_is_visible</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">table_oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在当前schema search path中，特定的table、views、materialized views、 indexes、 sequences、foreign tables是否可见</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select oid from pg_class where relname='data1';
  oid
-------
 16384
(1 row)

postgres=# select pg_table_is_visible(16384);
 pg_table_is_visible
---------------------
 t
(1 row)

postgres=#
postgres=# SELECT pg_table_is_visible('public.data1'::regclass);
 pg_table_is_visible
---------------------
 t
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_ts_config_is_visible"><a class="anchor" href="#pg_ts_config_is_visible"></a>1.52. pg_ts_config_is_visible</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_ts_config_is_visible</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">config_oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在当前schema search path中，特定text search configuration是否可见</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select oid from pg_ts_config where cfgname='greek';
  oid
-------
 13861
(1 row)

postgres=# select pg_ts_config_is_visible(13861);
 pg_ts_config_is_visible
-------------------------
 t
(1 row)

postgres=#
postgres=# select pg_ts_config_is_visible('greek'::regconfig);
 pg_ts_config_is_visible
-------------------------
 t
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_ts_dict_is_visible"><a class="anchor" href="#pg_ts_dict_is_visible"></a>1.53. pg_ts_dict_is_visible</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_ts_dict_is_visible</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>dict_oid</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在当前schema search path中，特定text search dictionary是否可见</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select oid,dictname,dictinitoption from pg_ts_dict where dictname='greek_stem';
  oid  |  dictname  |   dictinitoption
-------+------------+--------------------
 13860 | greek_stem | language = 'greek'
(1 row)

postgres=# select pg_ts_dict_is_visible(13860);
 pg_ts_dict_is_visible
-----------------------
 t
(1 row)

postgres=#
postgres=#  select pg_ts_dict_is_visible('greek_stem'::regdictionary);
 pg_ts_dict_is_visible
-----------------------
 t
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_ts_parser_is_visible"><a class="anchor" href="#pg_ts_parser_is_visible"></a>1.54. pg_ts_parser_is_visible</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_ts_parser_is_visible</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">parser_oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在当前schema search path中，特定text search parser是否可见</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select * from pg_ts_parser ;
 oid  | prsname | prsnamespace |  prsstart  |    prstoken    |  prsend  |  prsheadline  |  prslextype
------+---------+--------------+------------+----------------+----------+---------------+--------------
 3722 | default |           11 | prsd_start | prsd_nexttoken | prsd_end | prsd_headline | prsd_lextype
(1 row)

postgres=# select pg_ts_parser_is_visible(3722);
 pg_ts_parser_is_visible
-------------------------
 t
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_ts_template_is_visible"><a class="anchor" href="#pg_ts_template_is_visible"></a>1.55. pg_ts_template_is_visible</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_ts_template_is_visible</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">template_oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在当前schema search path中，特定text search template是否可见</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select * from pg_ts_template ;
  oid  | tmplname  | tmplnamespace |    tmplinit    |    tmpllexize
-------+-----------+---------------+----------------+------------------
  3727 | simple    |            11 | dsimple_init   | dsimple_lexize
  3730 | synonym   |            11 | dsynonym_init  | dsynonym_lexize
  3733 | ispell    |            11 | dispell_init   | dispell_lexize
  3742 | thesaurus |            11 | thesaurus_init | thesaurus_lexize
 13845 | snowball  |            11 | dsnowball_init | dsnowball_lexize
(5 rows)

postgres=# select pg_ts_temp

postgres=# select pg_ts_template_is_visible(3730);
 pg_ts_template_is_visible
---------------------------
 t
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_type_is_visible"><a class="anchor" href="#pg_type_is_visible"></a>1.56. pg_type_is_visible</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_type_is_visible</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type_oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在当前schema search path中，特定type、domain是否可见</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select oid,typname from pg_type where typname='bool';
 oid | typname
-----+---------
  16 | bool
(1 row)

postgres=# select pg_type_is_visible(16);
 pg_type_is_visible
--------------------
 t
(1 row)

postgres=#
postgres=# SELECT pg_type_is_visible('pg_catalog.bool'::regtype);
 pg_type_is_visible
--------------------
 t
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="format_type"><a class="anchor" href="#format_type"></a>1.57. format_type</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">format_type</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type_oid, typemod</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">得到一个data type的SQL Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select * from pg_type where typname='bool';
-[ RECORD 1 ]--+---------
oid            | 16
typname        | bool
typnamespace   | 11
typowner       | 10
typlen         | 1
typbyval       | t
typtype        | b
typcategory    | B
typispreferred | t
typisdefined   | t
typdelim       | ,
typrelid       | 0
typelem        | 0
typarray       | 1000
typinput       | boolin
typoutput      | boolout
typreceive     | boolrecv
typsend        | boolsend
typmodin       | -
typmodout      | -
typanalyze     | -
typalign       | c
typstorage     | p
typnotnull     | f
typbasetype    | 0
typtypmod      | -1
typndims       | 0
typcollation   | 0
typdefaultbin  |
typdefault     |
typacl         |

postgres=#
postgres=# select format_type(16,0);
 format_type
-------------
 boolean
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_get_constraintdef"><a class="anchor" href="#pg_get_constraintdef"></a>1.58. pg_get_constraintdef</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_get_constraintdef</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">constraint_oid或者constraint_oid, pretty_bool</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">得到一个constraint的定义</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_get_constraintdef(16918);
pg_get_constraintdef
----------------------
PRIMARY KEY (c1)
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_get_expr"><a class="anchor" href="#pg_get_expr"></a>1.59. pg_get_expr</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_get_expr</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>pg_node_tree, relation_oid,或者<br>
pg_node_tree, relation_oid, pretty_bool</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">反编译指定expression的内部格式，假设：其中的任何变量引用第二个参数指示的relation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# CREATE TABLE tab1 (a int, b int) PARTITION BY RANGE(a);
CREATE TABLE
postgres=# CREATE TABLE tab1_p1 PARTITION OF tab1 FOR VALUES FROM (0) TO (100);
CREATE TABLE
postgres=# CREATE TABLE tab1_p2 PARTITION OF tab1 FOR VALUES FROM (100) TO (200);
CREATE TABLE
postgres=# select relname, pg_get_expr(relpartbound, oid) from pg_class where relispartition and relname ~ 'tab1' order by relname;
 relname |          pg_get_expr
---------+--------------------------------
 tab1_p1 | FOR VALUES FROM (0) TO (100)
 tab1_p2 | FOR VALUES FROM (100) TO (200)
(2 rows)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_get_functiondef"><a class="anchor" href="#pg_get_functiondef"></a>1.60. pg_get_functiondef</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_get_functiondef</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">func_oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>获得function或者procedure的定义<br>
<br></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_get_functiondef(89);
pg_get_functiondef
-------------------------------------------------
CREATE OR REPLACE FUNCTION pg_catalog.version()+ RETURNS text + LANGUAGE internal + STABLE PARALLEL SAFE STRICT + AS $function$pgsql_version$function$

(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_get_function_arguments"><a class="anchor" href="#pg_get_function_arguments"></a>1.61. pg_get_function_arguments</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_get_function_arguments</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">func_oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>获得function或者procedure的传入参数清单<br>
<br></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select oid from pg_proc where proname='has_database_privilege';
-[ RECORD 1 ]
oid | 2250
-[ RECORD 2 ]
oid | 2251
-[ RECORD 3 ]
oid | 2252
-[ RECORD 4 ]
oid | 2253
-[ RECORD 5 ]
oid | 2254
-[ RECORD 6 ]
oid | 2255

postgres=# select pg_get_function_arguments(2250);
-[ RECORD 1 ]-------------+-----------------
pg_get_function_arguments | name, text, text

postgres=# \x
Expanded display is off.
postgres=# select pg_get_function_arguments(2250);
 pg_get_function_arguments
---------------------------
 name, text, text
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_get_function_identity_arguments"><a class="anchor" href="#pg_get_function_identity_arguments"></a>1.62. pg_get_function_identity_arguments</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_get_function_identity_arguments</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">func_oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>获得参数清单以标识出function或者procedure<br>
<br></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_get_function_identity_arguments(2250);
pg_get_function_identity_arguments ------------------------------------
name, text, text
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_get_function_result"><a class="anchor" href="#pg_get_function_result"></a>1.63. pg_get_function_result</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_get_function_result</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">func_oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获得function，若是procedure，返回null</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_get_function_result(89);
pg_get_function_result
------------------------
text
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_get_indexdef"><a class="anchor" href="#pg_get_indexdef"></a>1.64. pg_get_indexdef</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_get_indexdef</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">index_oid或者index_oid, column_no, pretty_bool</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获得索引的定义语句获得某个索引上第n个索引列的名称</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select oid from pg_class where relname='idx_2';
  oid
-------
 16427
(1 row)

postgres=# select pg_get_indexdef(16427);
                     pg_get_indexdef
---------------------------------------------------------
 CREATE INDEX idx_2 ON public.data1 USING btree (c1, c3)
(1 row)

postgres=#

postgres=# select pg_get_indexdef(16427,2,true);
 pg_get_indexdef
-----------------
 c3
(1 row)

postgres=# select pg_get_indexdef(16427,1,true);
 pg_get_indexdef
-----------------
 c1
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_get_keywords"><a class="anchor" href="#pg_get_keywords"></a>1.65. pg_get_keywords</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_get_keywords</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">setof record</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回PostgreSQL数据库中的SQL关键字清单返回结果中有3列(以逗号分隔)，第一列是关键字名称，第二列catcode是category code U for unreserved C for column name T for type or function name R for reserved第三列catdesc是描述</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_get_keywords();
pg_get_keywords
------------------------------------------------------------------
 (abort,U,unreserved)
 (absolute,U,unreserved)
 (access,U,unreserved)
 (action,U,unreserved)
 (add,U,unreserved)
 (admin,U,unreserved)
 (after,U,unreserved)
 (aggregate,U,unreserved)
 (all,R,reserved)
 (also,U,unreserved)
 (alter,U,unreserved)
 (always,U,unreserved)
 (analyse,R,reserved)
 (analyze,R,reserved)
 (and,R,reserved)
限于篇幅，本函数的输出仅摘录到此处</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_get_ruledef"><a class="anchor" href="#pg_get_ruledef"></a>1.66. pg_get_ruledef</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_get_ruledef</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rule_oid或者rule_oid, pretty_bool</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获得rule的create rule语句</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select oid ,rulename from pg_rewrite where rulename='pg_settings_u';
  oid  |   rulename
-------+---------------
 12168 | pg_settings_u
(1 row)

postgres=# select pg_get_ruledef(12168);
                                          pg_get_ruledef
---------------------------------------------------------------------------------------------------
 CREATE RULE pg_settings_u AS                                                                     +
     ON UPDATE TO pg_catalog.pg_settings                                                          +
    WHERE (new.name = old.name) DO  SELECT set_config(old.name, new.setting, false) AS set_config;
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_get_serial_sequence"><a class="anchor" href="#pg_get_serial_sequence"></a>1.67. pg_get_serial_sequence</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_get_serial_sequence</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">table_name, column_name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获得自增列或者标识列使用的sequence的name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_get_serial_sequence('gen_y','c1');
pg_get_serial_sequence
------------------------
public.gen_y_c1_seq
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_get_statisticsobjdef"><a class="anchor" href="#pg_get_statisticsobjdef"></a>1.68. pg_get_statisticsobjdef</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_get_statisticsobjdef</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">statobj_oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获得extended statistics object的CREATE STATISTICS语句。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_get_triggerdef"><a class="anchor" href="#pg_get_triggerdef"></a>1.69. pg_get_triggerdef</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_get_triggerdef</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">trigger_oid 或者trigger_oid, pretty_bool</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获得trigger的create trigger语句</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_get_triggerdef(16992);
pg_get_triggerdef
------------------------------------------------------------------------------------------------------------
CREATE TRIGGER example_trigger AFTER INSERT ON public.company FOR EACH ROW EXECUTE FUNCTION auditlogfunc()
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_get_userbyid"><a class="anchor" href="#pg_get_userbyid"></a>1.70. pg_get_userbyid</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_get_userbyid</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">role_oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><sub>name</sub></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获得特定role oid的role name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_get_userbyid(16426);
pg_get_userbyid
-----------------
lc0029999
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_get_viewdef"><a class="anchor" href="#pg_get_viewdef"></a>1.71. pg_get_viewdef</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_get_viewdef</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">view_name 或者 view_name, pretty_bool或者 view_oid或者 view_oid, pretty_bool或者view_oid, wrap_column_int</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获得view的定义</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_get_viewdef('company_view');
pg_get_viewdef
---------------------
SELECT company.id,+ company.name, + company.age + FROM company;
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_index_column_has_property"><a class="anchor" href="#pg_index_column_has_property"></a>1.72. pg_index_column_has_property</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_index_column_has_property</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">index regclass, column integer, property text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>测试索引列是否有特定的索引列属性。索引列属性见下： asc 索引列升序 desc 索引列降序 nulls_first null值在前 nulls_last null值在后 orderable 列是否具有任何定义的排序顺序？ distance_orderable 列是否可以被"distance" operator 顺序扫描到, 比如 ORDER BY col &lt;&#8594; constant ? returnable index-only扫描是否可以返回列值 search_array 列是否原生支持 col = ANY(array)搜索 search_nulls 列是否支持IS NULL 和IS NOT NULL 搜索<br>
注意：extension的访问方法可以为它们的indexes定义额外的属性名称。<br>
本函数在如下情况下会返回NULL：属性名称未知(not known)或者不适用于特定的对象Oid或者column number不能标识出一个有效的对象。</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_index_column_has_property('idx_2'::regclass,1,'desc');
pg_index_column_has_property
------------------------------
f
(1 row)
postgres=# select pg_index_column_has_property('idx_2'::regclass,1,'asc');
pg_index_column_has_property
------------------------------
t
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_index_has_property"><a class="anchor" href="#pg_index_has_property"></a>1.73. pg_index_has_property</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_index_has_property</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">index regclass, property text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>测试一个index是否具有特定的索引属性。如下是索引属性的清单 clusterable 在cluster命令中是否可以用到index index_scan index 是否支持 plain (non-bitmap) scans? bitmap_scan index 是否支持 bitmap scans? backward_scan Can the scan direction be changed in mid-scan (to support FETCH BACKWARD on a cursor without needing materialization)?<br>
注意：extension的访问方法可以为它们的indexes定义额外的属性名称。<br>
本函数在如下情况下会返回NULL：属性名称未知(not known)或者不适用于特定的对象oid不能标识出一个有效的对象。</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_index_has_property('idx_2'::regclass,'index_scan');
pg_index_has_property
-----------------------
t
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_indexam_has_property"><a class="anchor" href="#pg_indexam_has_property"></a>1.74. pg_indexam_has_property</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_indexam_has_property</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">am oid, property text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>测试一个index访问方法是否具有特定的属性。如下是索引访问方法属性清单： can_order 访问方法是否支持 ASC, DESC 以及CREATE INDEX的related keywords can_unique 访问方法是否支持unique indexes? can_multi_col 访问方法是否支持多列indexes? can_exclude 访问方法是否支持exclusion constraints? can_include 访问方法是否支持CREATE INDEX的 INCLUDE 子句<br>
<br>
本函数在如下情况下会返回NULL：属性名称未知(not known)或者不适用于特定的对象 oid不能标识出一个有效的对象。<br></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select * from pg_am;
 oid  | amname |      amhandler       | amtype
------+--------+----------------------+--------
    2 | heap   | heap_tableam_handler | t
  403 | btree  | bthandler            | i
  405 | hash   | hashhandler          | i
  783 | gist   | gisthandler          | i
 2742 | gin    | ginhandler           | i
 4000 | spgist | spghandler           | i
 3580 | brin   | brinhandler          | i
(7 rows)

postgres=#
postgres=# select pg_indexam_has_property(4000,'can_multi_col');
 pg_indexam_has_property
-------------------------
 f
(1 row)

postgres=#
postgres=# select pg_indexam_has_property(403,'can_unique');
 pg_indexam_has_property
-------------------------
 t
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_options_to_table"><a class="anchor" href="#pg_options_to_table"></a>1.75. pg_options_to_table</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_options_to_table</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">options_array text[]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">setof record ( option_name text, option_value text )</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回pg_class.reloptions或者pg_attribute.attoptions表示的存储选项</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_options_to_table(reloptions) from pg_class where oid='16384';
pg_options_to_table
---------------------------------------------
(autovacuum_vacuum_insert_threshold,10000)
(autovacuum_vacuum_insert_scale_factor,0.1)
(2 rows)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_tablespace_databases"><a class="anchor" href="#pg_tablespace_databases"></a>1.76. pg_tablespace_databases</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_tablespace_databases</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tablespace oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">setof oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回特定tablespace中保存的object的database的oid，如果本函数返回任何值，那么就表示tablespace不为空并且不能被drop掉。若想查出在该表空间内有哪些对象，你需要连接到本函数返回的database中，并查询pg_class获得这些对象。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_tablespace_databases(1663);
pg_tablespace_databases
-------------------------
16424
1
16878
14174
14173
(5 rows)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_tablespace_location"><a class="anchor" href="#pg_tablespace_location"></a>1.77. pg_tablespace_location</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_tablespace_location</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tablespace oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回指定tablespace的文件系统路径</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_tablespace_location(16391);
pg_tablespace_location
------------------------
/home/pg131/ts1
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_typeof"><a class="anchor" href="#pg_typeof"></a>1.78. pg_typeof</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_typeof</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">any</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">regtype</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">指定值的数据类型的oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# SELECT pg_typeof(33.339999);
-[ RECORD 1 ]------
pg_typeof | numeric

postgres=# SELECT typlen FROM pg_type WHERE oid = pg_typeof(33.339999);
-[ RECORD 1 ]
typlen | -1

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="collation-for"><a class="anchor" href="#collation-for"></a>1.79. COLLATION FOR</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">COLLATION FOR</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"any"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回指定值的collation的name，本函数的返回值是被双引号引起来的，如果入参表达式不能派生出collation，则返回null如果传入的参数不是可以collatable的data type，则会抛出错误</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select collation for(datname) from pg_database;
pg_collation_for
------------------
"C"
"C"
"C"
"C"
"C"
(5 rows)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="to_regclass"><a class="anchor" href="#to_regclass"></a>1.80. to_regclass</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">to_regclass</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regclass</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将文本形式的relation name转换为oid，本函数的输入参数不可以是数字形式的oid。如果本函数未找到输入参数指定的name，本函数会返回NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select to_regclass('public.data1');
-[ RECORD 1 ]------
to_regclass | data1

postgres=# \x
Expanded display is off.
postgres=# select oid, relname from pg_class where oid=to_regclass('public.data1');
  oid  | relname
-------+---------
 16384 | data1
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="to_regcollation"><a class="anchor" href="#to_regcollation"></a>1.81. to_regcollation</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">to_regcollation</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">regcollation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将文本形式的collation name转换为oid，本函数的输入参数不可以是数字形式的oid。如果本函数未找到输入参数指定的name，本函数会返回NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select to_regcollation('"POSIX"');
 to_regcollation
-----------------
 "POSIX"
(1 行记录)

postgres=# select * from pg_collation where oid=to_regcollation('"POSIX"');
 oid | collname | collnamespace | collowner | collprovider | collisdeterministic | collencoding | collcollate | collctype | collversion
-----+----------+---------------+-----------+--------------+---------------------+--------------+-------------+-----------+-------------
 951 | POSIX    |            11 |        10 | c            | t                   |           -1 | POSIX       | POSIX     |
(1 行记录)

postgres=# select oid,collname from pg_collation where oid=to_regcollation('"POSIX"');
 oid | collname
-----+----------
 951 | POSIX
(1 行记录)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="to_regnamespace"><a class="anchor" href="#to_regnamespace"></a>1.82. to_regnamespace</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">to_regnamespace</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">regnamespace</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将文本形式的schema name转换为oid，本函数的输入参数不可以是数字形式的oid。如果本函数未找到输入参数指定的name，本函数会返回NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select to_regnamespace('public');
to_regnamespace
-----------------
public
(1 行记录)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="to_regoper"><a class="anchor" href="#to_regoper"></a>1.83. to_regoper</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">to_regoper</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">regoper</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将文本形式的operator name转换为oid，本函数的输入参数不可以是数字形式的oid。如果本函数未找到输入参数指定的name或者含义不明确，本函数会返回NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select oid, oprname  from pg_operator where oid=to_regoper('!');
 oid | oprname
-----+---------
 388 | !
(1 row)

postgres=# select  to_regoper('!');
 to_regoper
------------
 !
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="to_regoperator"><a class="anchor" href="#to_regoperator"></a>1.84. to_regoperator</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">to_regoperator</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">regoperator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将文本形式的operator name(带参数类型)转换为oid，本函数的输入参数不可以是数字形式的oid。如果本函数未找到输入参数指定的name，本函数会返回NULL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select oid, oprname from pg_operator where oid=to_regoperator('+(integer,integer)');
 oid | oprname
-----+---------
 551 | +
(1 row)

postgres=#  select  to_regoperator('+(int4,int4)');
   to_regoperator
--------------------
 +(integer,integer)
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="to_regproc"><a class="anchor" href="#to_regproc"></a>1.85. to_regproc</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">to_regproc</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">regproc</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将文本的function或者procedure转换为其oid。如果本函数未找到输入参数指定的name或者含义不明确，本函数会返回NULL。本函数的输入参数不可以是数字形式的oid。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select to_regproc('pg_stat_statements');
     to_regproc
--------------------
 pg_stat_statements
(1 row)

postgres=# select oid,proname from pg_proc where oid=to_regproc('pg_stat_statements');
  oid  |      proname
-------+--------------------
 16401 | pg_stat_statements
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="to_regprocedure"><a class="anchor" href="#to_regprocedure"></a>1.86. to_regprocedure</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">to_regprocedure</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">regprocedure</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将文本的function或者procedure(带参数)转换为其oid。如果本函数未找到输入参数指定的name，本函数会返回NULL。本函数的输入参数不可以是数字形式的oid。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select to_regprocedure('pg_get_viewdef(text)');
   to_regprocedure
----------------------
 pg_get_viewdef(text)
(1 row)

postgres=# select oid, proname from pg_proc where oid= to_regprocedure('pg_get_viewdef(text)');
 oid  |    proname
------+----------------
 1640 | pg_get_viewdef
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="to_regrole"><a class="anchor" href="#to_regrole"></a>1.87. to_regrole</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">to_regrole</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">regrole</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将文本的role name转换为其oid。如果本函数未找到输入参数指定的name，本函数会返回NULL。本函数的输入参数不可以是数字形式的oid。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select oid,rolname from pg_roles where oid=to_regrole('lc0039999');
  oid  |  rolname
-------+-----------
 16877 | lc0039999
(1 row)

postgres=# select to_regrole('lc0039999');
 to_regrole
------------
 lc0039999
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="to_regtype"><a class="anchor" href="#to_regtype"></a>1.88. to_regtype</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">to_regtype</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">regtype</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>将文本的type name转换为其oid。如果本函数未找到输入参数指定的name，本函数会返回NULL。本函数的输入参数不可以是数字形式的oid。<br></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select to_regtype('int4');
to_regtype
------------
integer
(1 row)
postgres=# select oid, typname from pg_type where oid=to_regtype('int4');
oid | typname
-----+---------
23 | int4
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_describe_object"><a class="anchor" href="#pg_describe_object"></a>1.89. pg_describe_object</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_describe_object</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">classid oid, objid oid, objsubid integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>用于描述pg_depend系统表中保存的依赖对象。<br></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select oid,relname from pg_class where oid in (select distinct classid from pg_depend) order by oid;
 oid  |         relname
------+-------------------------
 1247 | pg_type
 1255 | pg_proc
 1259 | pg_class
 2328 | pg_foreign_data_wrapper
 2602 | pg_amop
 2603 | pg_amproc
 2606 | pg_constraint
 2612 | pg_language
 2616 | pg_opclass
 2617 | pg_operator
 2618 | pg_rewrite
 2620 | pg_trigger
 2753 | pg_opfamily
 3079 | pg_extension
 3600 | pg_ts_dict
 3602 | pg_ts_config
 3764 | pg_ts_template
(17 rows)

postgres=# select * from pg_foreign_data_wrapper ;
  oid  | fdwname  | fdwowner | fdwhandler | fdwvalidator | fdwacl | fdwoptions
-------+----------+----------+------------+--------------+--------+------------
 16954 | file_fdw |       10 |      16952 |        16953 |        |
(1 row)

postgres=# select pg_describe_object(2328,16954,0);
      pg_describe_object
-------------------------------
 foreign-data wrapper file_fdw
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_identify_object"><a class="anchor" href="#pg_identify_object"></a>1.90. pg_identify_object</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_identify_object</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">classid oid, objid oid, objsubid integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">record ( type text, schema text, name text, identity text )</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>返回一个数据库对象的详细信息<br></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_identify_object(2328,16954,0);
pg_identify_object
---------------------------------------------
("foreign-data wrapper",,file_fdw,file_fdw)
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_identify_object_as_address"><a class="anchor" href="#pg_identify_object_as_address"></a>1.91. pg_identify_object_as_address</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_identify_object_as_address</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">classid oid, objid oid, objsubid integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">record ( type text, object_names text[], object_args text[] )</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>返回一个数据库对象的足够信息以标识出数据库对象<br></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_identify_object_as_address(2328,16954,0);
pg_identify_object_as_address
----------------------------------------
("foreign-data wrapper",{file_fdw},{})
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_get_object_address"><a class="anchor" href="#pg_get_object_address"></a>1.92. pg_get_object_address</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_get_object_address</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type text, object_names text[], object_args text[]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">record ( classid oid, objid oid, objsubid integer )</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>本函数是pg_identify_object_as_address的反函数<br>
<br></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_get_object_address('foreign-data wrapper','{file_fdw}','{}');
pg_get_object_address
-----------------------
(2328,16954,0)
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="col_description"><a class="anchor" href="#col_description"></a>1.93. col_description</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">col_description</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">table oid, column integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>获取某个表的某个列的comment<br>
<br></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# create table t_comment(c1 int );
CREATE TABLE
postgres=# comment on column t_comment.c1 is 'this is c1 comment!';
COMMENT
postgres=# select oid from pg_class where oid=to_regclass('t_comment')
postgres-# ;
  oid
-------
 17001
(1 row)
postgres=# select col_description(17001,1);
   col_description
---------------------
 this is c1 comment!
(1 row)
postgres=#
postgres=# select col_description(to_regclass('t_comment'),1);
   col_description
---------------------
 this is c1 comment!
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="obj_description"><a class="anchor" href="#obj_description"></a>1.94. obj_description</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">obj_description</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">object oid, catalog name 或者object oid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>返回特定数据库对象的注释信息<br>
<br></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# comment on table t_comment is  ' table-level test comment';
COMMENT
postgres=# \dt+ data1
                         List of relations
 Schema | Name  | Type  | Owner | Persistence | Size  | Description
--------+-------+-------+-------+-------------+-------+-------------
 public | data1 | table | pg131 | permanent   | 42 MB |
(1 row)

postgres=# \dt+ t_comment;
                                   List of relations
 Schema |   Name    | Type  | Owner | Persistence |  Size   |        Description
--------+-----------+-------+-------+-------------+---------+---------------------------
 public | t_comment | table | pg131 | permanent   | 0 bytes |  table-level test comment
(1 row)

postgres=# select obj_description(17001);
      obj_description
---------------------------
  table-level test comment
(1 row)

postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="shobj_description"><a class="anchor" href="#shobj_description"></a>1.95. shobj_description</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">shobj_description</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">object oid, catalog name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回特定共享数据库对象(如databases, roles, and tablespaces)的注释信息.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select shobj_description(14174,'pg_database');
shobj_description
--------------------------------------------
default administrative connection database
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_current_xact_id"><a class="anchor" href="#pg_current_xact_id"></a>1.96. pg_current_xact_id</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_current_xact_id</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xid8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回当前的事务id，若是没有当前事务id，系统会自动指派一个新的事务id</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_current_xact_id();
pg_current_xact_id
--------------------
720
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_current_xact_id_if_assigned"><a class="anchor" href="#pg_current_xact_id_if_assigned"></a>1.97. pg_current_xact_id_if_assigned()</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_current_xact_id_if_assigned()</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xid8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回当前的current transaction&#8217;s ID，若是没有transaction&#8217;s ID被指派，本函数返回NULL。如果事务可能是只读的，最好使用本函数，以避免不必要的XID消耗。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=*# select pg_current_xact_id_if_assigned();
pg_current_xact_id_if_assigned
--------------------------------
(1 row)
postgres=*# update data1 set c2='data1_1' where c1=1;
UPDATE 1
postgres=*# select pg_current_xact_id_if_assigned();
pg_current_xact_id_if_assigned
--------------------------------
722
(1 row)
postgres=*#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_xact_status"><a class="anchor" href="#pg_xact_status"></a>1.98. pg_xact_status</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_xact_status</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xid8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回近期事务的提交状态。本函数的执行结果是下面三个中的一个:in progress、commited、aborted。当事务足够老而没有在PostgreSQL中保存下来时，commit status会被丢弃，此时本函数返回结果为NULL。请注意，针对prepared transactions，本函数的返回结果为in progress,应用程序必须检查pg_prepared_xacts以确定一个transaction ID是否属于prepared transaction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_xact_status(pg_current_xact_id());
pg_xact_status
----------------
in progress
(1 row)
postgres=# postgres=# select pg_xact_status(722::text::xid8);
pg_xact_status
----------------
committed
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_current_snapshot"><a class="anchor" href="#pg_current_snapshot"></a>1.99. pg_current_snapshot</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_current_snapshot</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pg_snapshot</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>返回当前的snapshot,这是一种显示哪个transaction id是正处于in-progress状态的数据结构。注意：有关pg_snapshot数据类型： pg_snapshot数据类型用于存储在一个特定时间点上的transaction ID visibility信息。 pg_snapshot数据类型的表示方法是xmin:xmax:xip_list这个xmin:xmax:xip_list就是pg_snapshot数据类型组成。见下： xmin:处于active状态的最小的transaction id，所有小于xmin的transaction id要么是committed (visible),要么是rolled back(dead) xmax:大于或者等于本xmax值的transaction id是在snapshot结束时未完成的，因此，xmax是不可见的。 xip_list:在生成snapshot时，处于in progress状态的transactions。在xmin &#8656; X &lt; xmax范围内并且不在本xip_list中的transaction ID 表示在snapshot生成时是已经完成的transaction ID,因此，根据commit status，要么是visible的要么是dead，本列表中不包括subtransactions的transaction IDs<br></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_current_snapshot();
pg_current_snapshot
---------------------
727:727:
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_snapshot_xip"><a class="anchor" href="#pg_snapshot_xip"></a>1.100. pg_snapshot_xip</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_snapshot_xip</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pg_snapshot</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">setof xid8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回snapshot中处于in-progress状态的transaction id</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_snapshot_xip('10:20:10,14,15');
pg_snapshot_xip
-----------------
10
14
15
(3 rows)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_snapshot_xmax"><a class="anchor" href="#pg_snapshot_xmax"></a>1.101. pg_snapshot_xmax</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_snapshot_xmax</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pg_snapshot</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xid8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回snapshot的xmax</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_snapshot_xmax('10:20:10,14,15');
pg_snapshot_xmax
------------------
20
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_snapshot_xmin"><a class="anchor" href="#pg_snapshot_xmin"></a>1.102. pg_snapshot_xmin</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_snapshot_xmin</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pg_snapshot</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xid8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回snapshot的xmin</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_snapshot_xmin('10:20:10,14,15');
pg_snapshot_xmin
------------------
10
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_visible_in_snapshot"><a class="anchor" href="#pg_visible_in_snapshot"></a>1.103. pg_visible_in_snapshot</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_visible_in_snapshot</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xid8, pg_snapshot</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">给定的事务ID是否对snapshot可见，即：给定的事务ID是否在生成snapshot之前完成。本函数对subtransaction ID不能给出正确的结果。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_visible_in_snapshot(722::text::xid8,'10:20:10,14,15');
pg_visible_in_snapshot
------------------------
f
(1 row)
postgres=# select pg_visible_in_snapshot(12::text::xid8,'10:20:10,14,15');
pg_visible_in_snapshot
------------------------
t
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="txid_current"><a class="anchor" href="#txid_current"></a>1.104. txid_current</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">txid_current</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bigint</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回当前的事务id，若是没有当前事务id，系统会自动指派一个新的事务id。本函数（返回值是bigint数据类型）的作用与pg_current_xact_id(返回值是xid8数据类型)的作用是类似的，只是两个函数的返回值数据类型不同。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select txid_current();
txid_current
--------------
735
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="txid_current_if_assigned"><a class="anchor" href="#txid_current_if_assigned"></a>1.105. txid_current_if_assigned()</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">txid_current_if_assigned()</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bigint</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本函数（注意：返回值是bigint数据类型）的作用与pg_current_xact_id_if_assigned(注意：返回值是xid8数据类型)的作用是类似的，只是两个函数的返回值数据类型不同。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">[pg131@VM-0-8-centos ~]$ psql -d postgres psql (13.1)
Type "help" for help.
postgres=# select txid_current_if_assigned();
txid_current_if_assigned
--------------------------
(1 row)
postgres=# begin;
BEGIN
postgres=*# select txid_current_if_assigned();
txid_current_if_assigned
--------------------------
(1 row)
postgres=*# select txid_current();
txid_current
--------------
738
(1 row)
postgres=*# select txid_current_if_assigned();
txid_current_if_assigned
--------------------------
738
(1 row)</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="txid_current_snapshot"><a class="anchor" href="#txid_current_snapshot"></a>1.106. txid_current_snapshot()</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">txid_current_snapshot()</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">txid_snapshot</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回当前的snapshot,这是一种显示哪个transaction id是正处于in-progress状态的数据结构。本函数（注意：返回值是txid_snapshot数据类型）的作用与pg_current_snapshot (注意：返回值是pg_snapshot数据类型)的作用是类似的，只是两个函数的返回值数据类型不同。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select txid_current_snapshot();
txid_current_snapshot
-----------------------
741:741:
(1 row)
 postgres=# \gdesc
 Column | Type
 -----------------------+---------------
 txid_current_snapshot | txid_snapshot
 (1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="txid_snapshot_xiptxid_snapshot"><a class="anchor" href="#txid_snapshot_xiptxid_snapshot"></a>1.107. txid_snapshot_xip(txid_snapshot)</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">txid_snapshot_xip(txid_snapshot)</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">txid_snapshot</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">setof bigint</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回snapshot中处于in-progress状态的transaction id。本函数（注意：返回值是txid_snapshot数据类型）的作用与pg_snapshot_xip (注意：返回值是pg_snapshot数据类型)的作用是类似的，只是两个函数的返回值数据类型不同。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select txid_snapshot_xip('10:20:10,14,15');
txid_snapshot_xip
-------------------
10
14
15
(3 rows)
 postgres=# \gdesc
 Column | Type
 -------------------+--------
 txid_snapshot_xip | bigint
 (1 row)</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="txid_snapshot_xmax"><a class="anchor" href="#txid_snapshot_xmax"></a>1.108. txid_snapshot_xmax</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">txid_snapshot_xmax</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">txid_snapshot</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bigint</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回snapshot的xmax。本函数（注意：返回值是bigint数据类型）的作用与pg_snapshot_xmax (注意：返回值是pg_snapshot数据类型)的作用是类似的，只是两个函数的返回值数据类型不同。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select txid_snapshot_xmax('10:20:10,14,15');
txid_snapshot_xmax
--------------------
20
(1 row)
 postgres=# \gdesc
 Column | Type
 --------------------+--------
 txid_snapshot_xmax | bigint
 (1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="txid_snapshot_xmin"><a class="anchor" href="#txid_snapshot_xmin"></a>1.109. txid_snapshot_xmin</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">txid_snapshot_xmin</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">txid_snapshot</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bigint</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回snapshot的xmin。本函数（注意：返回值是bigint数据类型）的作用与pg_snapshot_xmin(注意：返回值是pg_snapshot数据类型)的作用是类似的，只是两个函数的返回值数据类型不同。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select txid_snapshot_xmin('10:20:10,14,15');
txid_snapshot_xmin
--------------------
10
(1 row)
 postgres=# \gdesc
 Column | Type
 --------------------+--------
 txid_snapshot_xmin | bigint
 (1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="txid_visible_in_snapshot"><a class="anchor" href="#txid_visible_in_snapshot"></a>1.110. txid_visible_in_snapshot</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">txid_visible_in_snapshot</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bigint, txid_snapshot</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">给定的事务ID是否对snapshot可见，即：给定的事务ID是否在生成snapshot之前完成。本函数对subtransaction ID不能给出正确的结果。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select txid_visible_in_snapshot(722,'10:20:10,14,15');
txid_visible_in_snapshot
--------------------------
f
(1 row)
 postgres=# select txid_visible_in_snapshot(12,'10:20:10,14,15');
 txid_visible_in_snapshot
 --------------------------
 t
 (1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="txid_status"><a class="anchor" href="#txid_status"></a>1.111. txid_status</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">txid_status</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bigint</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回近期事务的提交状态。本函数的执行结果是下面三个中的一个:in progress、commited、aborted。当事务足够老而没有在PostgreSQL中保存下来时，commit status会被丢弃，此时本函数返回结果为NULL。请注意，针对prepared transactions，本函数的返回结果为in progress,应用程序必须检查pg_prepared_xacts以确定一个transaction ID是否属于prepared transaction.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select txid_status(txid_current());
txid_status
-------------
in progress
(1 row)
 postgres=# select txid_current();
 txid_current
 --------------
 742
 (1 row)
 postgres=# select txid_status(722);
 txid_status
 -------------
 committed
 (1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_xact_commit_timestamp"><a class="anchor" href="#pg_xact_commit_timestamp"></a>1.112. pg_xact_commit_timestamp</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_xact_commit_timestamp</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">timestamp with time zone</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>返回一个事务的提交时间。本函数能正常使用的前提就是配置参数track_commit_timestamp设置为on，否会有如下提示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_xact_commit_timestamp(722::text::xid);
ERROR: could not get commit timestamp data
HINT: Make sure the configuration parameter "track_commit_timestamp" is set.
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select txid_current();
txid_current
--------------
743
(1 row)
 postgres=# select pg_xact_commit_timestamp(743::text::xid);
 pg_xact_commit_timestamp
 ------------------------------
 2021-04-29 16:52:37.19133+08
 (1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_last_committed_xact"><a class="anchor" href="#pg_last_committed_xact"></a>1.113. pg_last_committed_xact</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_last_committed_xact</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入数据类型</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">record ( xid xid, timestamp timestamp with time zone )</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回最后一个提交事务的transaction id和commit timestamp</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_last_committed_xact();
pg_last_committed_xact
--------------------------------------
(743,"2021-04-29 16:52:37.19133+08")
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_control_checkpoint"><a class="anchor" href="#pg_control_checkpoint"></a>1.114. pg_control_checkpoint</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_control_checkpoint</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入数据类型</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">record</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本函数是从PostgreSQL控制文件中获取数据。本函数返回当前checkpoint状态的相关信息</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_control_system"><a class="anchor" href="#pg_control_system"></a>1.115. pg_control_system</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_control_system</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入数据类型</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">record</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本函数是从PostgreSQL控制文件中获取数据。本函数返回当前控制文件状态的相关信息。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_control_system();
pg_control_system
---------------------------------------------------------------
(1300,202007201,6908228805274066467,"2021-04-29 16:57:56+08")
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_control_init"><a class="anchor" href="#pg_control_init"></a>1.116. pg_control_init</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_control_init</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入数据类型</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">record</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本函数是从PostgreSQL控制文件中获取数据。本函数返回cluster初始化时的相关信息</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_control_init();
pg_control_init
---------------------------------------------------
(8,8192,131072,8192,16777216,64,32,1996,2048,t,0)
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pg_control_recovery"><a class="anchor" href="#pg_control_recovery"></a>1.117. pg_control_recovery</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pg_control_recovery</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入数据类型</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">record</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本函数是从PostgreSQL控制文件中获取数据。本函数返回恢复状态的信息。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pg_control_recovery();
pg_control_recovery
---------------------
(0/0,0,0/0,0/0,f)
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="gen_random_uuid"><a class="anchor" href="#gen_random_uuid"></a>1.118. gen_random_uuid</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">gen_random_uuid</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uuid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本函数返回version 4版本的uuid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select gen_random_uuid();
gen_random_uuid
--------------------------------------
39158a63-f6d0-4883-8765-8b8e9c9cae62
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="array_to_tsvector"><a class="anchor" href="#array_to_tsvector"></a>1.119. array_to_tsvector</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">array_to_tsvector</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text[]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsvector</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将array of lexemes转换为tsvector</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select array_to_tsvector('{fat,cat,rat}'::text[]);
array_to_tsvector
-------------------
'cat' 'fat' 'rat'
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="get_current_ts_config"><a class="anchor" href="#get_current_ts_config"></a>1.120. get_current_ts_config</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">get_current_ts_config</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无输入参数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">regconfig</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回当前默认的text search配置的oid（参见配置参数default_text_search_config）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select get_current_ts_config();
get_current_ts_config
-----------------------
english
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="length"><a class="anchor" href="#length"></a>1.121. length</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">length</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsvector</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回lexemes的数量</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select length('fat:2,4 cat:3 rat:5A'::tsvector);
length
--------
3
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="numnode"><a class="anchor" href="#numnode"></a>1.122. numnode</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">numnode</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsquery</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回lexemes加operator的数量</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select numnode('(fat &amp; rat) | cat'::tsquery) ;
numnode
---------
5
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="plainto_tsquery"><a class="anchor" href="#plainto_tsquery"></a>1.123. plainto_tsquery</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">plainto_tsquery</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[config regconfig,] query text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsquery</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将text转换为tsquery。其中，字符串中的任何标点都将被忽略</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select plainto_tsquery('english', 'The Fat Rats');
plainto_tsquery
-----------------
'fat' &amp; 'rat'
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="phraseto_tsquery"><a class="anchor" href="#phraseto_tsquery"></a>1.124. phraseto_tsquery</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">phraseto_tsquery</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[config regconfig,] query text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsquery</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将text转换为tsquery。其中，字符串中的任何标点都将被忽略</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select phraseto_tsquery('english', 'The Fat Rats') ;
phraseto_tsquery
------------------
'fat' &lt;-&gt; 'rat'
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="websearch_to_tsquery"><a class="anchor" href="#websearch_to_tsquery"></a>1.125. websearch_to_tsquery</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">websearch_to_tsquery</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ <em>config</em> regconfig, ] <em>query</em> text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsquery</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将text转换为tsquery。引用的单词序列被转换成短语测试。"or"一词被理解为产生or运算符，破折号产生NOT运算符，忽略其他标点符号</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select websearch_to_tsquery('english', '"fat rat" or cat dog');
websearch_to_tsquery
---------------------------------
'fat' &lt;-&gt; 'rat' | 'cat' &amp; 'dog'
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="querytree"><a class="anchor" href="#querytree"></a>1.126. querytree</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">querytree</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsquery</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回一个tsquery中的可索引部分。当返回结果为空或者T时，表示这是一个不可索引的query。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select querytree('foo &amp; ! bar'::tsquery);
querytree
-----------
'foo'
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="setweight"><a class="anchor" href="#setweight"></a>1.127. setweight</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">setweight</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">vector tsvector, weight "char"或者vector tsvector, weight "char", lexemes text[]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsvector</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">为vector中的每个元素指定权重或者为在lexemes之内的vector中的每个元素指定权重</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select setweight('fat:2,4 cat:3 rat:5B'::tsvector, 'A');
setweight
-------------------------------
'cat':3A 'fat':2A,4A 'rat':5A
(1 row)
 postgres=#
 postgres=# select setweight('fat:2,4 cat:3 rat:5,6B'::tsvector, 'A', '{cat,rat}');
 setweight
 --------------------------------
 'cat':3A 'fat':2,4 'rat':5A,6A
 (1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="strip"><a class="anchor" href="#strip"></a>1.128. strip</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">strip</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsvector</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsvector</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">从tsvector中抹掉position和weight</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select strip('fat:2,4 cat:3 rat:5A'::tsvector);
strip
-------------------
'cat' 'fat' 'rat'
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="to_tsquery"><a class="anchor" href="#to_tsquery"></a>1.129. to_tsquery</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">to_tsquery</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">regconfig, text 或者text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsquery</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将text转换为tsquery，本函数的返回结果必须由有效的tsquery operator进行连接。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select to_tsquery('english', 'The &amp; Fat &amp; Rats');
to_tsquery
---------------
'fat' &amp; 'rat'
(1 row)
 postgres=# select to_tsquery( 'The &amp; Fat &amp; Rats');
 to_tsquery
 ---------------
 'fat' &amp; 'rat'
 (1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="to_tsvector"><a class="anchor" href="#to_tsvector"></a>1.130. to_tsvector</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">to_tsvector</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">regconfig,text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsvector</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将text转换为tsvector ，结果中包括位置信息</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select to_tsvector('english', 'The Fat Rats');
to_tsvector
-----------------
'fat':2 'rat':3
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="to_tsvector-2"><a class="anchor" href="#to_tsvector-2"></a>1.131. to_tsvector</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">to_tsvector</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">regconfig,json或者regconfig,jsonb</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsvector</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将json文档中的每个字符串值转换为tsvector，结果值是按照文档顺序进行连接后输出的，当输入参数数据类型为jsonb时，json对象的字段的文档顺序是与实现相关的</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select to_tsvector('english', '{"aa": "The Fat Rats", "b": "dog"}'::json);
to_tsvector -------------------------
'dog':5 'fat':2 'rat':3
(1 row)
 postgres=# postgres=# select to_tsvector('english', '{"aa": "The Fat Rats", "b": "dog"}'::jsonb);
 to_tsvector
 -------------------------
 'dog':1 'fat':4 'rat':5
 (1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="json_to_tsvector"><a class="anchor" href="#json_to_tsvector"></a>1.132. json_to_tsvector</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">json_to_tsvector</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[config regconfig,] json, jsonb</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsvector</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将json文档中满足filter条件的每个item转换为一个tsvector。结果值是按照文档顺序进行连接后输出的，当输入参数数据类型为jsonb时，json对象的字段的文档顺序是与实现相关的。Filter条件必须是一个包括另个或者多个关键字的json 数组：string代表包括所有字符串值numeric代表包括所有数字值boolean代表包括所有boolean值key代表包括所有keyall代表包括上述所有。作为一个简单的例子，filter条件不可以是一个简单的并且是上述关键字之一的json值。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select json_to_tsvector('english', '{"a": "The Fat Rats", "b": 123}'::json, '["string", "numeric"]');
json_to_tsvector
-------------------------
'123':5 'fat':2 'rat':3
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="jsonb_to_tsvector"><a class="anchor" href="#jsonb_to_tsvector"></a>1.133. jsonb_to_tsvector</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">jsonb_to_tsvector</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[config regconfig,] jsonb,jsonb</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsvector</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将json文档中满足filter条件的每个item转换为一个tsvector。结果值是按照文档顺序进行连接后输出的，当输入参数数据类型为jsonb时，json对象的字段的文档顺序是与实现相关的。Filter条件必须是一个包括另个或者多个关键字的json 数组：string代表包括所有字符串值numeric代表包括所有数字值boolean代表包括所有boolean值key代表包括所有keyall代表包括上述所有。作为一个简单的例子，filter条件不可以是一个简单的并且是上述关键字之一的json值。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select jsonb_to_tsvector('english', '{"a": "The Fat Rats", "b": 123}'::jsonb, '["string", "numeric"]');
jsonb_to_tsvector
-------------------------
'123':5 'fat':2 'rat':3
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ts_delete"><a class="anchor" href="#ts_delete"></a>1.134. ts_delete</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">ts_delete</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsvector,text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsvector</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>从vector中删除掉指定的lexeme<br></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select ts_delete('fat:2,4 cat:3 rat:5A'::tsvector, 'fat');
ts_delete
------------------
'cat':3 'rat':5A
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ts_delete-2"><a class="anchor" href="#ts_delete-2"></a>1.135. ts_delete</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">ts_delete</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsvector,text[]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsvector</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>从vector中删除掉指定的lexeme</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select ts_delete('fat:2,4 cat:3 rat:5A'::tsvector, ARRAY['fat','rat']);
ts_delete -----------
'cat':3
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ts_filter"><a class="anchor" href="#ts_filter"></a>1.136. ts_filter</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">ts_filter</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsvector, "char"[]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsvector</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">从vector中筛选出带有指定weights的元素</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select ts_filter('fat:2,4 cat:3b,7c rat:5A'::tsvector, '{a,b}');
ts_filter
-------------------
'cat':3B 'rat':5A
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ts_headline"><a class="anchor" href="#ts_headline"></a>1.137. ts_headline</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">ts_headline</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[config regconfig,] document text, query tsquery [, options text]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">以简写的形式显示在document匹配到的query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select ts_headline('The fat cat ate the rat.', 'cat');
ts_headline
---------------------------------
The fat &lt;b&gt;cat&lt;/b&gt; ate the rat.
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ts_headline-2"><a class="anchor" href="#ts_headline-2"></a>1.138. ts_headline</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">ts_headline</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[config regconfig,] document json, query tsquery [, options text]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">json</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">以缩写的形式显示在json document匹配到的query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select ts_headline('{"cat":"raining cats and dogs"}'::json, 'cat');
ts_headline
----------------------------------------
{"cat":"raining &lt;b&gt;cats&lt;/b&gt; and dogs"}
(1 row)</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ts_headline-3"><a class="anchor" href="#ts_headline-3"></a>1.139. ts_headline</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">ts_headline</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[config regconfig,] document jsonb, query tsquery [, options text]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jsonb</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">以缩写的形式显示在json document匹配到的query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select ts_headline('{"cat":"raining cats and dogs"}'::jsonb, 'cat');
ts_headline
-----------------------------------------
{"cat": "raining &lt;b&gt;cats&lt;/b&gt; and dogs"}
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ts_rank"><a class="anchor" href="#ts_rank"></a>1.140. ts_rank</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">ts_rank</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[weights real[], ] vector tsvector, query tsquery [, normalization integer]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">real</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">计算query与vector的匹配程度</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# SELECT ts_rank(to_tsvector('The quick brown fox jumps over the lazy dog.'),to_tsquery('fox &amp; dog')); ts_rank
------------
0.09148999
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ts_rank_cd"><a class="anchor" href="#ts_rank_cd"></a>1.141. ts_rank_cd</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">ts_rank_cd</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[weights real[], ] vector tsvector, query tsquery [, normalization integer]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">real</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用覆盖密度算法来计算query与vector的匹配程度</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# SELECT ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', to_tsvector('PostgreSQL full text search is a wonderful method'),to_tsquery('wonderful'));
ts_rank_cd
------------
0.1
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ts_rewrite"><a class="anchor" href="#ts_rewrite"></a>1.142. ts_rewrite</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">ts_rewrite</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">query tsquery, target tsquery, substitute tsquery</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsquery</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">用substitute替换掉query中的target</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# SELECT ts_rewrite('c &amp; b'::tsquery, 'b'::tsquery, 'bad|bat'::tsquery);
ts_rewrite
-------------------------
( 'bad' | 'bat' ) &amp; 'c'
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ts_rewrite-2"><a class="anchor" href="#ts_rewrite-2"></a>1.143. ts_rewrite</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">ts_rewrite</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">query tsquery, select text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsquery</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# CREATE TABLE test (col1 tsquery PRIMARY KEY, COL2 tsquery);
CREATE TABLE
postgres=# INSERT INTO test values ('p','q');
INSERT 0 1
postgres=# SELECT ts_rewrite('r &amp; q'::tsquery, 'SELECT col1,col2 FROM test');
ts_rewrite
------------
'r' &amp; 'q'
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="tsquery_phrase"><a class="anchor" href="#tsquery_phrase"></a>1.144. tsquery_phrase</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">tsquery_phrase</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">query1 tsquery, query2 tsquery</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsquery</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">构造一个phrase query用于在连续的词位匹配query1和query2(同&lt;&#8594;操作符)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select tsquery_phrase(to_tsquery('fat'), to_tsquery('cat'));
tsquery_phrase
-----------------
'fat' &lt;-&gt; 'cat'
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="tsquery_phrase-2"><a class="anchor" href="#tsquery_phrase-2"></a>1.145. tsquery_phrase</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">tsquery_phrase</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">query1 tsquery, query2 tsquery, distance integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsquery</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">构造一个词组查询，该词组搜索匹配query1且query2完全distance分开词素的匹配项</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select tsquery_phrase(to_tsquery('fat'), to_tsquery('cat'), 10);
tsquery_phrase
------------------
'fat' &lt;10&gt; 'cat'
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="tsvector_to_array"><a class="anchor" href="#tsvector_to_array"></a>1.146. tsvector_to_array</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">tsvector_to_array</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsvector</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text[]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将tsvector转换为词素数组</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select tsvector_to_array('fat:2,4 cat:3 rat:5A'::tsvector) ;
tsvector_to_array
-------------------
{cat,fat,rat}
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="unnest"><a class="anchor" href="#unnest"></a>1.147. unnest</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">unnest</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tsvector</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">setof record ( lexeme text, positions smallint[], weights text )</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将tsvector扩展为一行一个词素</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select * from unnest('cat:3 fat:2,4 rat:5A'::tsvector);
 lexeme | positions | weights
--------+-----------+---------
 cat    | {3}       | {D}
 fat    | {2,4}     | {D,D}
 rat    | {5}       | {A}
(3 rows)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="abbrev"><a class="anchor" href="#abbrev"></a>1.148. abbrev</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">abbrev</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将inet转换为text的缩写显示格式</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select abbrev(inet '10.1.1.3');
abbrev
----------
10.1.1.3
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="abbrev-2"><a class="anchor" href="#abbrev-2"></a>1.149. abbrev</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">abbrev</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cidr</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将cidr转换为text的缩写显示格式，返回结果中去掉了netmask中右边的零</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select abbrev(cidr '10.1.0.0/16');
abbrev
---------
10.1/16
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="broadcast"><a class="anchor" href="#broadcast"></a>1.150. broadcast</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">broadcast</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">计算一个ip地址的广播地址</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select broadcast(inet '192.168.1.5/24');
broadcast
------------------
192.168.1.255/24
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="family"><a class="anchor" href="#family"></a>1.151. family</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">family</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回一个地址是IPV4（返回4）还是IPV6（返回6）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select family('fe80::5054:ff:fe99:540c') ;
family
--------
6
(1 row)
 postgres=# select family(inet '172.1.0.23') ;
 family
 --------
 4
 (1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="host"><a class="anchor" href="#host"></a>1.152. host</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">host</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回IP地址的text形式，且忽略掉netmask</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select host(inet '192.168.1.0/24');
host
-------------
192.168.1.0
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="hostmask"><a class="anchor" href="#hostmask"></a>1.153. hostmask</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">hostmask</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回ip地址的host mask</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select hostmask(inet '192.168.23.20/30') ;
hostmask
----------
0.0.0.3
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="inet_merge"><a class="anchor" href="#inet_merge"></a>1.154. inet_merge</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">inet_merge</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inet, inet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cidr</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回包含两个给定网络的最小网络</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select inet_merge(inet '192.168.1.5/24', inet '192.168.2.5/24');
inet_merge
----------------
192.168.0.0/22
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="inet_same_family"><a class="anchor" href="#inet_same_family"></a>1.155. inet_same_family</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">inet_same_family</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inet，inet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回两个ip地址是否属于同一个family</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select inet_same_family(inet '192.168.1.5/24', inet '::1');
inet_same_family
------------------
f
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="masklen"><a class="anchor" href="#masklen"></a>1.156. masklen</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">masklen</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回以位为单位的网络掩码长度</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select masklen(inet '192.168.1.5/24');
masklen
---------
24
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="netmask"><a class="anchor" href="#netmask"></a>1.157. netmask</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">netmask</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回网络地址的网络掩码</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select netmask(inet '192.168.1.5/24');
netmask
---------------
255.255.255.0
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="network"><a class="anchor" href="#network"></a>1.158. network</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">network</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回地址的网络部分，将网络掩码右边的内容清零</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select network(inet '192.168.1.5/24') ;
network
----------------
192.168.1.0/24
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="set_masklen"><a class="anchor" href="#set_masklen"></a>1.159. set_masklen</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">set_masklen</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inet, integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">为inet设置netmask长度，网络地址部分保持不变</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select set_masklen(inet '192.168.1.5/24', 16);
set_masklen
----------------
192.168.1.5/16
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="set_masklen-2"><a class="anchor" href="#set_masklen-2"></a>1.160. set_masklen</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">set_masklen</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cidr, integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cidr</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">为cidr设置netmask长度，网络地址右边的设置为零</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select set_masklen(cidr '192.168.1.0/24', 16);
set_masklen
----------------
192.168.0.0/16
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="text"><a class="anchor" href="#text"></a>1.161. text</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">text</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回ip地址及其掩码的text形式</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select text(inet '192.168.1.5');
text
----------------
192.168.1.5/32
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="trunc"><a class="anchor" href="#trunc"></a>1.162. trunc</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">trunc</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">macaddr</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">macaddr</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将mac地址的最后三个字节清零，前缀可以与特定的网卡制造商关联</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select trunc(macaddr '12:34:56:78:90:ab') ;
trunc
-------------------
12:34:56:00:00:00
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="trunc-2"><a class="anchor" href="#trunc-2"></a>1.163. trunc</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">trunc</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">macaddr8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">macaddr8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将mac地址的最后五个字节清零，前缀可以与特定的网卡制造商关联</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select trunc(macaddr8 '12:34:56:78:90:ab:cd:ef') ;
trunc
-------------------------
12:34:56:00:00:00:00:00
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="macaddr8_set7bit"><a class="anchor" href="#macaddr8_set7bit"></a>1.164. macaddr8_set7bit</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">macaddr8_set7bit</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">macaddr8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">macaddr8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将地址的第7位设置为1，从而创建被称为修改后的EUI-64，以包含在IPv6地址中。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select macaddr8_set7bit(macaddr8 '00:34:56:ab:cd:ef');
macaddr8_set7bit
-------------------------
02:34:56:ff:fe:ab:cd:ef
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="area"><a class="anchor" href="#area"></a>1.165. area</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">area</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">geometric_type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double precision</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">计算面积，针对box, path, circle适用，path必须是能closed，否则会返回NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select area(box '(2,2),(0,0)');
area
------
4
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="center"><a class="anchor" href="#center"></a>1.166. center</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">center</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">geometric_type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">point</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">计算中点，针对box, circle适用</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select center(box '(1,2),(0,0)') ;
 center
 ---------
 (0.5,1)
 (1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="diagonal"><a class="anchor" href="#diagonal"></a>1.167. diagonal</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">diagonal</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">box</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lseg</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">获取box的对角线作为一个line segment，作用与lseg(box)一样</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select diagonal(box '(1,2),(0,0)');
diagonal
---------------
[(1,2),(0,0)]
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="diameter"><a class="anchor" href="#diameter"></a>1.168. diameter</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">diameter</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">circle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double precision</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">计算circle的直径</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select diameter(circle '&lt;(0,0),2&gt;') ;
diameter
 ----------
  4
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="height"><a class="anchor" href="#height"></a>1.169. height</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">height</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">box</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double precision</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">计算box的垂直大小</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select height(box '(1,2),(0,0)');
 height
 --------
 2
 (1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="isclosed"><a class="anchor" href="#isclosed"></a>1.170. isclosed</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">isclosed</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">path</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">path是否是closed的</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select isclosed(path '((0,0),(1,1),(2,0))');
 isclosed
 ----------
  t
   (1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="isopen"><a class="anchor" href="#isopen"></a>1.171. isopen</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">isopen</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">path</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path是否是open的</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select isopen(path '[(0,0),(1,1),(2,0)]');
isopen
 --------
  t
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="length-2"><a class="anchor" href="#length-2"></a>1.172. length</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">length</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">geometric_type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double precision</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">计算总长度，对lseg以及path适用</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select length(path '((-1,0),(1,0))') ;
 length
 --------
  4
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="npoints"><a class="anchor" href="#npoints"></a>1.173. npoints</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">npoints</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">geometric_type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">返回point的数量，对path以及polygon适用</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select npoints(path '[(0,0),(1,1),(2,0)]');
npoints
---------
 3
 (1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pclose"><a class="anchor" href="#pclose"></a>1.174. pclose</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">pclose</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">path</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">path</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将patch转换为closed的形式</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select pclose(path '[(0,0),(1,1),(2,0)]');
pclose
---------------------
((0,0),(1,1),(2,0))
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="popen"><a class="anchor" href="#popen"></a>1.175. popen</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">popen</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">path</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">path</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将patch转换为open的形式</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select popen(path '((0,0),(1,1),(2,0))');
popen
---------------------
[(0,0),(1,1),(2,0)]
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="radius"><a class="anchor" href="#radius"></a>1.176. radius</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">radius</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">circle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double precision</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">求一个圆形的半径</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select radius(circle '&lt;(0,0),2&gt;');
 radius
 --------
 2
 (1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="slope"><a class="anchor" href="#slope"></a>1.177. slope</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">slope</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">point,point</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double precision</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">计算通过两个点的直线的斜率</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select slope(point '(0,0)', point '(2,1)');
 slope
 -------
  0.5
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="width"><a class="anchor" href="#width"></a>1.178. width</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">width</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double precision</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">box</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">计算box的horizontal size</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select width(box '(1,2),(0,0)') ;
width
-------
1
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="box"><a class="anchor" href="#box"></a>1.179. box</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7246%;">
<col style="width: 72.2754%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">函数名称</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">box</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">参数数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">circle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数返回值数据类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">box</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数含义</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">计算圆内切的box</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用举例</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">postgres=# select box(circle '&lt;(0,0),2&gt;');
box
-------------------------------------------------------------------------------
(1.414213562373095,1.414213562373095),(-1.414213562373095,-1.414213562373095)
(1 row)
postgres=#</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="100.html">PG参数参考手册</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">

</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/vendor/lunr-languages.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
  </body>
</html>
