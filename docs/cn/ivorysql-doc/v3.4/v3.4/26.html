<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>XML :: IvorySQL文档中心</title>
    <link rel="canonical" href="https://docs.ivorysql.org/ivorysql-doc/v3.4/v3.4/26.html">
    <link rel="prev" href="22.html">
    <link rel="next" href="27.html">
    <meta name="generator" content="Antora 3.1.7">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.ivorysql.org">IvorySQL文档中心</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://www.ivorysql.org/">官方网站</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ivorysql-doc" data-version="v3.4">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="welcome.html">IvorySQL</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="welcome.html">欢迎</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1.html">发行说明</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="2.html">关于IvorySQL</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">IvorySQL入门</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="3.html">快速开始</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="4.html">日常监控</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="5.html">日常维护</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">IvorySQL高级</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="6.html">安装指南</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="7.html">集群搭建</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="8.html">开发者指南</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="9.html">运维管理指南</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="10.html">迁移指南</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">IvorySQL生态</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="11.html">PostGIS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="12.html">pgvector</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Oracle兼容功能列表</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="14.html">1、框架设计</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="15.html">2、GUC框架</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="16.html">3、大小写转换</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="17.html">4、双模式设计</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="18.html">5、兼容Oracle like</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="19.html">6、兼容Oracle匿名块</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="20.html">7、兼容Oracle函数与存储过程</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="21.html">8、内置数据类型与内置函数</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="22.html">9、新增Oracle兼容模式的端口与IP</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="26.html">10、XML函数</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="27.html">11、兼容Oracle sequence</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="23.html">社区贡献指南</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="24.html">工具参考</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="25.html">FAQ</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">IvorySQL</span>
    <span class="version">v3.4</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="welcome.html">IvorySQL</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="welcome.html">v3.4</a>
        </li>
        <li class="version">
          <a href="../../v3.3/v3.3/welcome.html">v3.3</a>
        </li>
        <li class="version">
          <a href="../../v3.2/v3.2/welcome.html">v3.2</a>
        </li>
        <li class="version">
          <a href="../../v3.1/v3.1/welcome.html">v3.1</a>
        </li>
        <li class="version">
          <a href="../../v3.0/v3.0/welcome.html">v3.0</a>
        </li>
        <li class="version">
          <a href="../../v2.3/v2.3/welcome.html">v2.3</a>
        </li>
        <li class="version">
          <a href="../../v2.2/v2.2/welcome.html">v2.2</a>
        </li>
        <li class="version">
          <a href="../../v2.1/v2.1/welcome.html">v2.1</a>
        </li>
        <li class="version">
          <a href="../../v1.5/v1.5/welcome.html">v1.5</a>
        </li>
        <li class="version">
          <a href="../../v1.4/v1.4/welcome.html">v1.4</a>
        </li>
        <li class="version">
          <a href="../../v1.3/v1.3/welcome.html">v1.3</a>
        </li>
        <li class="version">
          <a href="../../v1.2/v1.2/welcome.html">v1.2</a>
        </li>
        <li class="version">
          <a href="../../v1.1/v1.1/welcome.html">v1.1</a>
        </li>
        <li class="version">
          <a href="../../v1.0/v1.0/welcome.html">v1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="welcome.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="welcome.html">IvorySQL</a></li>
    <li>Oracle兼容功能列表</li>
    <li><a href="26.html">10、XML函数</a></li>
  </ul>
</nav>
  <div class="page-versions">
  <button class="version-menu-toggle" title="switch to English">CN</button>
  <div class="version-menu">
    <a class="version is-current" href="">CN</a>
    <a class="version" href="../../../../en/ivorysql-doc/v3.4/v3.4/26.html">EN</a>
  </div>
  </div>
  <div class="edit-this-page"><a href="https://github.com/IvorySQL/ivorysql_docs/edit/v3.4/CN/modules/ROOT/pages/v3.4/26.adoc">编辑此页面</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="目录" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">XML</h1>
<div class="sect1">
<h2 id="目的"><a class="anchor" href="#目的"></a>1. 目的</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在Oralce中，常会出现带有XML函数的SQL代码，IvorySQL在PostgreSQL的基础上，实现与Oracle XML函数的高度兼容，确保了从Oracle迁移到IvorySQL后的数据格式和结构的一致性。这种兼容性意味着用户无需对现有的XML处理逻辑进行大规模修改，从而保证了数据的完整性和准确性。此外，IvorySQL的这种跨平台的兼容特性，也降低了因格式差异带来的额外用户维护和升级成本，使得数据处理和管理更加高效、可靠和灵活。</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>XML（eXtended Markup Language可扩展标记语言）是一种基于文本的，用于结构化任何可标记文档的格式语言。它是一种轻便的，可扩展的，标准的且简学易懂的保存数据的语言。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="实现原理"><a class="anchor" href="#实现原理"></a>2. 实现原理</h2>
<div class="sectionbody">
<div class="paragraph">
<p>IvorySQL在实现与Oracle 12c中11个常用XML SQL函数的兼容性时，与PostgreSQL保持了一致，底层处理函数同样采用了libxml2库提供的接口。这些XML函数作为ivorysql_ora插件的一个子插件提供，确保了与PostgreSQL数据库在XML处理方面的兼容性和一致性。</p>
</div>
<div class="paragraph">
<p>由于Oracle的xml函数要求某些参数类型是 XMLType，比如下面这个existsnode()函数：</p>
</div>
<div class="paragraph">
<p>原型：
EXISTSNODE(XMLType_instance, XPath_string [, namespace_string ])</p>
</div>
<div class="paragraph">
<p>示例：
SELECT existsnode(XMLType('&lt;a&gt;&lt;b&gt;d&lt;/b&gt;&lt;/a&gt;'), '/a') from dual;</p>
</div>
<div class="paragraph">
<p>因此为了兼容，添加了一个 XMLType 数据类型，作用是把用户提供的字符串转换成内部的xmltype类型，让用户的SQL语句从Oracle迁移到IvorySQL不用做改动</p>
</div>
<div class="paragraph">
<p>另外，为了避免与PostgreSQL中已有的同名关键字“extract”产生混淆，IvorySQL将原有的同名关键字重命名为“PGEXTRACT”，以确保函数调用的清晰性和准确性。</p>
</div>
<div class="paragraph">
<p>在实现这11个Oracle兼容的XML函数时，IvorySQL采用了两种不同的实现方式。其中，除了UPDATEXML函数外，其他10个函数均通过SQL函数的方式进行实现。由于UPDATEXML函数的参数数量是不确定的，因此采用了表达式方式来实现，这要求为其编写专门的语法分析代码和执行器代码，以确保其功能的正确性和灵活性。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="兼容函数如下"><a class="anchor" href="#兼容函数如下"></a>3. 兼容函数如下</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">序号</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">函数名</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">功能简介</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#extract(XML)">extract(XML)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">该函数用于返回XML节点路径下的相应内容, 其中参数XMLType_instance用于指定XMLType实例，Xpath_string用于指定XML节点路径</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#extractvalue">extractvalue</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">该函数提供对XML内容的检索功能，extractvalue只能返回一个节点的一个值。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#existsnode">existsnode</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">该函数用于检查XML内容是否符合指定的路径表达式。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#deletexml">deletexml</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">该函数用于删除指定路径的XML节点</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#appendchildxml">appendchildxml</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">该函数用于在XML对象中插入子节点。 它接受一个XML对象和一个XML片段作为参数，并将XML片段作为子节点插入到XML对象中</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#updatexml">updatexml</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">该函数用于更新特定XML相应的节点路径的内容</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#insertxmlbefore">insertxmlbefore</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">该函数用于在XML中的指定路径前插入子节点</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#insertxmlafter">insertxmlafter</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">该函数用于在XML中的指定路径后插入子节点</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#insertchildxml">insertchildxml</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">该函数用于向指定的XML路径中插入子节点</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#insertchildxmlbefore">insertchildxmlbefore</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">该函数用于向指定的XML路径之前插入子节点</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#insertchildxmlafter">insertchildxmlafter</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">该函数用于向指定的XML路径之后插入子节点</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#xmlisvalid">xmlisvalid</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">该函数用于检查XML格式是否正确</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="xml函数使用示例"><a class="anchor" href="#xml函数使用示例"></a>4. XML函数使用示例</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="准备表与数据"><a class="anchor" href="#准备表与数据"></a>4.1. 准备表与数据</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# set ivorysql.compatible_mode to oracle;
SET
ivorysql=# create table inaf(a int, b xmltype);
CREATE TABLE
ivorysql=# insert into inaf values(1,xmltype('&lt;a&gt;&lt;b&gt;100&lt;/b&gt;&lt;/a&gt;'));
INSERT 0 1
ivorysql=# insert into inaf values(2, '');
INSERT 0 1
ivorysql=# select * from inaf;
 a |         b
---+-------------------
 1 | &lt;a&gt;&lt;b&gt;100&lt;/b&gt;&lt;/a&gt;
 2 |
(2 rows)
ivorysql=# create table xmltest(id int, data XMLType);
CREATE TABLE
ivorysql=# insert into xmltest values(1, '&lt;value&gt;one&lt;/value&gt;');
INSERT 0 1
ivorysql=# insert into xmltest values(2, '&lt;value&gt;two&lt;/value&gt;');
INSERT 0 1
ivorysql=# select * from xmltest;
 id |        data
----+--------------------
  1 | &lt;value&gt;one&lt;/value&gt;
  2 | &lt;value&gt;two&lt;/value&gt;
(2 rows)
ivorysql=# create table xmlnstest(id int, data xmltype);
CREATE TABLE
ivorysql=# INSERT INTO xmlnstest VALUES(1, xmltype('&lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://www.def.com" xmlns:web="http://www.abc.com"&gt;&lt;soapenv:Body&gt;&lt;web:BBB&gt;&lt;typ:EEE&gt;41&lt;/typ:EEE&gt;&lt;typ:FFF&gt;42&lt;/typ:FFF&gt;&lt;/web:BBB&gt;&lt;/soapenv:Body&gt;&lt;/soapenv:Envelope&gt;'));
INSERT 0 1</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="extract(XML)"><a class="anchor" href="#extract(XML)"></a>4.2. extract(XML)</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql# SELECT extract(XMLType('&lt;AA&gt;&lt;ID&gt;1&lt;/ID&gt;&lt;/AA&gt;'), '/AA/ID') from dual;
  extract
------------
 &lt;ID&gt;1&lt;/ID&gt;
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="extractvalue"><a class="anchor" href="#extractvalue"></a>4.3. extractvalue</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql# SELECT extractvalue(XMLType('&lt;a&gt;&lt;b&gt;100&lt;/b&gt;&lt;/a&gt;'),'/a/b') from dual;
 extractvalue
--------------
 100
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="existsnode"><a class="anchor" href="#existsnode"></a>4.4. existsnode</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# SELECT existsnode(XMLType('&lt;a&gt;&lt;b&gt;d&lt;/b&gt;&lt;/a&gt;'), '/a/b') from dual;
 existsnode
------------
          1
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="deletexml"><a class="anchor" href="#deletexml"></a>4.5. deletexml</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# SELECT deletexml(XMLType('&lt;test&gt;&lt;value&gt;oldnode&lt;/value&gt;&lt;value&gt;oldnode&lt;/value&gt;&lt;/test&gt;'),  '/test/value') from dual;
 deletexml
-----------
 &lt;test/&gt;
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="appendchildxml"><a class="anchor" href="#appendchildxml"></a>4.6. appendchildxml</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# ELECT appendchildxml(XMLType('&lt;test&gt;&lt;value&gt;&lt;/value&gt;&lt;value&gt;&lt;/value&gt;&lt;/test&gt;'),  '/test/value', XMLTYPE('&lt;name&gt;newnode&lt;/name&gt;')) from dual;
      appendchildxml
--------------------------
 &lt;test&gt;                  +
   &lt;value&gt;               +
     &lt;name&gt;newnode&lt;/name&gt;+
   &lt;/value&gt;              +
   &lt;value&gt;               +
     &lt;name&gt;newnode&lt;/name&gt;+
   &lt;/value&gt;              +
 &lt;/test&gt;
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="updatexml"><a class="anchor" href="#updatexml"></a>4.7. updatexml</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# SELECT updatexml(xmltype('&lt;value&gt;one&lt;/value&gt;'), '/value', xmltype('&lt;newvalue&gt;1111&lt;/newvalue&gt;')) FROM dual;
         updatexml
---------------------------
 &lt;newvalue&gt;1111&lt;/newvalue&gt;
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="insertxmlbefore"><a class="anchor" href="#insertxmlbefore"></a>4.8. insertxmlbefore</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# SELECT insertxmlbefore(XMLType('&lt;a&gt;222&lt;b&gt;100&lt;/b&gt;&lt;b&gt;200&lt;/b&gt;&lt;/a&gt;'), '/a/b', XMLTYPE('&lt;c&gt;88&lt;/c&gt;')) from dual;
                 insertxmlbefore
--------------------------------------------------
 &lt;a&gt;222&lt;c&gt;88&lt;/c&gt;&lt;b&gt;100&lt;/b&gt;&lt;c&gt;88&lt;/c&gt;&lt;b&gt;200&lt;/b&gt;&lt;/a&gt;
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="insertxmlafter"><a class="anchor" href="#insertxmlafter"></a>4.9. insertxmlafter</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# SELECT insertxmlafter(XMLType('&lt;a&gt;&lt;b&gt;100&lt;/b&gt;&lt;/a&gt;'),'/a/b',XMLType('&lt;c&gt;88&lt;/c&gt;')) from dual;
 insertxmlafter
----------------
 &lt;a&gt;           +
   &lt;b&gt;100&lt;/b&gt;  +
   &lt;c&gt;88&lt;/c&gt;   +
 &lt;/a&gt;
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="insertchildxml"><a class="anchor" href="#insertchildxml"></a>4.10. insertchildxml</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# SELECT insertchildxml(XMLType('&lt;a&gt;one&lt;b&gt;&lt;/b&gt;three&lt;b&gt;&lt;/b&gt;&lt;/a&gt;'), '//b', 'name', XMLTYPE('&lt;name&gt;newnode&lt;/name&gt;')) from dual;
                            insertchildxml
-----------------------------------------------------------------------
 &lt;a&gt;one&lt;b&gt;&lt;name&gt;newnode&lt;/name&gt;&lt;/b&gt;three&lt;b&gt;&lt;name&gt;newnode&lt;/name&gt;&lt;/b&gt;&lt;/a&gt;
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="insertchildxmlbefore"><a class="anchor" href="#insertchildxmlbefore"></a>4.11. insertchildxmlbefore</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# SELECT insertchildxmlbefore(XMLType('&lt;a&gt;&lt;b&gt;100&lt;/b&gt;&lt;/a&gt;'), '/a', 'b', XMLType('&lt;c&gt;88&lt;/c&gt;')) from dual;
 insertchildxmlbefore
----------------------
 &lt;a&gt;                 +
   &lt;c&gt;88&lt;/c&gt;         +
   &lt;b&gt;100&lt;/b&gt;        +
 &lt;/a&gt;
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="insertchildxmlafter"><a class="anchor" href="#insertchildxmlafter"></a>4.12. insertchildxmlafter</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# SELECT insertchildxmlafter(XMLType('&lt;a&gt;&lt;b&gt;100&lt;/b&gt;&lt;/a&gt;'), '/a', 'b', XMLType('&lt;c&gt;88&lt;/c&gt;')) from dual;
 insertchildxmlafter
---------------------
 &lt;a&gt;                +
   &lt;b&gt;100&lt;/b&gt;       +
   &lt;c&gt;88&lt;/c&gt;        +
 &lt;/a&gt;
(1 row)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="xmlisvalid"><a class="anchor" href="#xmlisvalid"></a>4.13. xmlisvalid</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql=# SELECT xmlisvalid(XMLTYPE('&lt;a&gt;'));
xmlisvalid
------------
f
(1 row)

ivorysql=# SELECT xmlisvalid(XMLTYPE('&lt;a/&gt;'));
xmlisvalid
------------
t
(1 row)</code></pre>
</div>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="22.html">9、新增Oracle兼容模式的端口与IP</a></span>
  <span class="next"><a href="27.html">11、兼容Oracle sequence</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">

</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/vendor/lunr-languages.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
