<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Administrator Guide :: IvorySQL Document Site</title>
    <link rel="canonical" href="https://docs.ivorysql.org/ivorysql-doc/v1.0/v1.0/4.html">
    <link rel="prev" href="3.html">
    <link rel="next" href="5.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.ivorysql.org">IvorySQL Document Site</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://www.ivorysql.org/">Home</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ivorysql-doc" data-version="v1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="welcome.html">IvorySQL</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="welcome.html">Welcome</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1.html">Release</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="2.html">About</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started with IvorySQL</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="3.html">Getting Started</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="4.html">Administrator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="5.html">Operating personnel</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="6.html">Installation Deployment</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="7.html">Developer</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="8.html">Operation Management</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="9.html">Migration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="10.html">Community contribution</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="11.html">Tool Reference</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="12.html">FAQ</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">IvorySQL</span>
    <span class="version">v1.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../Devs/Devs/welcome.html">IvorySQL</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../Devs/Devs/welcome.html">Devs</a>
        </li>
        <li class="version">
          <a href="../../v2.3/v2.3/welcome.html">v2.3</a>
        </li>
        <li class="version">
          <a href="../../v2.2/v2.2/welcome.html">v2.2</a>
        </li>
        <li class="version">
          <a href="../../v2.1/v2.1/welcome.html">v2.1</a>
        </li>
        <li class="version">
          <a href="../../v1.5/v1.5/welcome.html">v1.5</a>
        </li>
        <li class="version">
          <a href="../../v1.4/v1.4/welcome.html">v1.4</a>
        </li>
        <li class="version">
          <a href="../../v1.3/v1.3/welcome.html">v1.3</a>
        </li>
        <li class="version">
          <a href="../../v1.2/v1.2/welcome.html">v1.2</a>
        </li>
        <li class="version">
          <a href="../../v1.1/v1.1/welcome.html">v1.1</a>
        </li>
        <li class="version is-current">
          <a href="welcome.html">v1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../Devs/Devs/welcome.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="welcome.html">IvorySQL</a></li>
    <li>Getting Started with IvorySQL</li>
    <li><a href="4.html">Administrator</a></li>
  </ul>
</nav>
  <div class="page-versions">
  <button class="version-menu-toggle" title="switch to Chinese">EN</button>
  <div class="version-menu">
    <a class="version is-current" href="">EN</a>
    <a class="version" href="../../../../cn/ivorysql-doc/v1.0/v1.0/4.html">CN</a>
  </div>
  </div>
  <div class="edit-this-page"><a href="https://github.com/IvorySQL/ivorysql_docs/edit/v1.0/EN/modules/ROOT/pages/v1.0/4.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Administrator Guide</h1>
<div class="sect1">
<h2 id="monitoring-database-activity"><a class="anchor" href="#monitoring-database-activity"></a>1. Monitoring Database Activity</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="standard-unix-tools"><a class="anchor" href="#standard-unix-tools"></a>1.1. Standard Unix Tools</h3>
<div class="paragraph">
<p>On most Unix platforms, IvorySQL modifies its command title as reported by <code>ps</code>, so that individual server processes can readily be identified. A sample display is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">$ ps auxww | grep ^postgres
postgres  15551  0.0  0.1  57536  7132 pts/0    S    18:02   0:00 postgres -i
postgres  15554  0.0  0.0  57536  1184 ?        Ss   18:02   0:00 postgres: background writer
postgres  15555  0.0  0.0  57536   916 ?        Ss   18:02   0:00 postgres: checkpointer
postgres  15556  0.0  0.0  57536   916 ?        Ss   18:02   0:00 postgres: walwriter
postgres  15557  0.0  0.0  58504  2244 ?        Ss   18:02   0:00 postgres: autovacuum launcher
postgres  15558  0.0  0.0  17512  1068 ?        Ss   18:02   0:00 postgres: stats collector
postgres  15582  0.0  0.0  58772  3080 ?        Ss   18:04   0:00 postgres: joe runbug 127.0.0.1 idle
postgres  15606  0.0  0.0  58772  3052 ?        Ss   18:07   0:00 postgres: tgl regression [local] SELECT waiting
postgres  15610  0.0  0.0  58772  3056 ?        Ss   18:07   0:00 postgres: tgl regression [local] idle in transaction</code></pre>
</div>
</div>
<div class="paragraph">
<p>(The appropriate invocation of <code>ps</code> varies across different platforms, as do the details of what is shown. This example is from a recent Linux system.) The first process listed here is the primary server process. The command arguments shown for it are the same ones used when it was launched. The next four processes are background worker processes automatically launched by the primary process. (The “autovacuum launcher” process will not be present if you have set the system not to run autovacuum.) Each of the remaining processes is a server process handling one client connection. Each such process sets its command line display in the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">postgres: user database host activity</code></pre>
</div>
</div>
<div class="paragraph">
<p>The user, database, and (client) host items remain the same for the life of the client connection, but the activity indicator changes. The activity can be <code>idle</code> (i.e., waiting for a client command), <code>idle in transaction</code> (waiting for client inside a <code>BEGIN</code> block), or a command type name such as <code>SELECT</code>. Also, <code>waiting</code> is appended if the server process is presently waiting on a lock held by another session. In the above example we can infer that process 15606 is waiting for process 15610 to complete its transaction and thereby release some lock. (Process 15610 must be the blocker, because there is no other active session. In more complicated cases it would be necessary to look into the pg_locks system view to determine who is blocking whom.)</p>
</div>
<div class="paragraph">
<p>If cluster_name has been configured the cluster name will also be shown in <code>ps</code> output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">$ psql -c 'SHOW cluster_name'
 cluster_name
--------------
 server1
(1 row)

$ ps aux|grep server1
postgres   27093  0.0  0.0  30096  2752 ?        Ss   11:34   0:00 postgres: server1: background writer
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you have turned off <a href="https://www.postgresql.org/docs/current/runtime-config-logging.html#GUC-UPDATE-PROCESS-TITLE">update_process_title</a> then the activity indicator is not updated; the process title is set only once when a new process is launched. On some platforms this saves a measurable amount of per-command overhead; on others it&#8217;s insignificant.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Tip</div>
<div class="paragraph">
<p>Solaris requires special handling. You must use <strong>/usr/ucb/ps</strong>, rather than <strong>/bin/ps</strong>. You also must use two <strong>w</strong> flags, not just one. In addition, your original invocation of the <strong>postgres</strong> command must have a shorter <strong>ps</strong> status display than that provided by each server process. If you fail to do all three things, the <strong>ps</strong> output for each server process will be the original <strong>postgres</strong> command line.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-cumulative-statistics-system"><a class="anchor" href="#the-cumulative-statistics-system"></a>1.2. The Cumulative Statistics System</h3>
<div class="paragraph">
<p>IvorySQL&#8217;s <strong>cumulative statistics system</strong> supports collection and reporting of information about server activity. Presently, accesses to tables and indexes in both disk-block and individual-row terms are counted. The total number of rows in each table, and information about vacuum and analyze actions for each table are also counted. If enabled, calls to user-defined functions and the total time spent in each one are counted as well.</p>
</div>
<div class="paragraph">
<p>IvorySQL also supports reporting dynamic information about exactly what is going on in the system right now, such as the exact command currently being executed by other server processes, and which other connections exist in the system. This facility is independent of the cumulative statistics system.</p>
</div>
<div class="sect3">
<h4 id="statistics-collection-configuration"><a class="anchor" href="#statistics-collection-configuration"></a>1.2.1. Statistics Collection Configuration</h4>
<div class="paragraph">
<p>Since collection of statistics adds some overhead to query execution, the system can be configured to collect or not collect information. This is controlled by configuration parameters that are normally set in <code>postgresql.conf</code>.</p>
</div>
<div class="paragraph">
<p>The parameter <a href="https://www.postgresql.org/docs/current/runtime-config-statistics.html#GUC-TRACK-ACTIVITIES">track_activities</a> enables monitoring of the current command being executed by any server process.</p>
</div>
<div class="paragraph">
<p>The parameter <a href="https://www.postgresql.org/docs/current/runtime-config-statistics.html#GUC-TRACK-COUNTS">track_counts</a> controls whether cumulative statistics are collected about table and index accesses.</p>
</div>
<div class="paragraph">
<p>The parameter <a href="https://www.postgresql.org/docs/current/runtime-config-statistics.html#GUC-TRACK-FUNCTIONS">track_functions</a> enables tracking of usage of user-defined functions.</p>
</div>
<div class="paragraph">
<p>The parameter <a href="https://www.postgresql.org/docs/current/runtime-config-statistics.html#GUC-TRACK-IO-TIMING">track_io_timing</a> enables monitoring of block read and write times.</p>
</div>
<div class="paragraph">
<p>The parameter <a href="https://www.postgresql.org/docs/current/runtime-config-statistics.html#GUC-TRACK-WAL-IO-TIMING">track_wal_io_timing</a> enables monitoring of WAL write times.</p>
</div>
<div class="paragraph">
<p>Normally these parameters are set in <code>postgresql.conf</code> so that they apply to all server processes, but it is possible to turn them on or off in individual sessions using the <a href="https://www.postgresql.org/docs/current/sql-set.html">SET</a> command. (To prevent ordinary users from hiding their activity from the administrator, only superusers are allowed to change these parameters with <code>SET</code>.)</p>
</div>
<div class="paragraph">
<p>Cumulative statistics are collected in shared memory. Every IvorySQL process collects statistics locally, then updates the shared data at appropriate intervals. When a server, including a physical replica, shuts down cleanly, a permanent copy of the statistics data is stored in the <code>pg_stat</code> subdirectory, so that statistics can be retained across server restarts. In contrast, when starting from an unclean shutdown (e.g., after an immediate shutdown, a server crash, starting from a base backup, and point-in-time recovery), all statistics counters are reset.</p>
</div>
</div>
<div class="sect3">
<h4 id="viewing-statistics"><a class="anchor" href="#viewing-statistics"></a>1.2.2. Viewing Statistics</h4>
<div class="paragraph">
<p>Several predefined views, listed in Table 1 , are available to show the current state of the system. There are also several other views, listed in Table 2 , available to show the accumulated statistics. Alternatively, one can build custom views using the underlying cumulative statistics functions.</p>
</div>
<div class="paragraph">
<p>When using the cumulative statistics views and functions to monitor collected data, it is important to realize that the information does not update instantaneously. Each individual server process flushes out accumulated statistics to shared memory just before going idle, but not more frequently than once per <code>PGSTAT_MIN_INTERVAL</code> milliseconds (1 second unless altered while building the server); so a query or transaction still in progress does not affect the displayed totals and the displayed information lags behind actual activity. However, current-query information collected by <code>track_activities</code> is always up-to-date.</p>
</div>
<div class="paragraph">
<p>Another important point is that when a server process is asked to display any of the accumulated statistics, accessed values are cached until the end of its current transaction in the default configuration. So the statistics will show static information as long as you continue the current transaction. Similarly, information about the current queries of all sessions is collected when any such information is first requested within a transaction, and the same information will be displayed throughout the transaction. This is a feature, not a bug, because it allows you to perform several queries on the statistics and correlate the results without worrying that the numbers are changing underneath you. When analyzing statistics interactively, or with expensive queries, the time delta between accesses to individual statistics can lead to significant skew in the cached statistics. To minimize skew, <code>stats_fetch_consistency</code> can be set to <code>snapshot</code>, at the price of increased memory usage for caching not-needed statistics data. Conversely, if it&#8217;s known that statistics are only accessed once, caching accessed statistics is unnecessary and can be avoided by setting <code>stats_fetch_consistency</code> to <code>none</code>. You can invoke <code>pg_stat_clear_snapshot</code>() to discard the current transaction&#8217;s statistics snapshot or cached values (if any). The next use of statistical information will (when in snapshot mode) cause a new snapshot to be built or (when in cache mode) accessed statistics to be cached.</p>
</div>
<div class="paragraph">
<p>A transaction can also see its own statistics (not yet flushed out to the shared memory statistics) in the views <code>pg_stat_xact_all_tables</code>, <code>pg_stat_xact_sys_tables</code>, <code>pg_stat_xact_user_tables</code>, and <code>pg_stat_xact_user_functions</code>. These numbers do not act as stated above; instead they update continuously throughout the transaction.</p>
</div>
<div class="paragraph">
<p>Some of the information in the dynamic statistics views shown in Table 1  is security restricted. Ordinary users can only see all the information about their own sessions (sessions belonging to a role that they are a member of). In rows about other sessions, many columns will be null. Note, however, that the existence of a session and its general properties such as its sessions user and database are visible to all users. Superusers and roles with privileges of built-in role <code>pg_read_all_stats</code>  can see all the information about all sessions.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Dynamic Statics Views</strong></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">View Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_activity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row per server process, showing information related to the current activity of that process, such as state and current query.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_replication</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row per WAL sender process, showing statistics about replication to that sender&#8217;s connected standby server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_wal_receiver</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only one row, showing statistics about the WAL receiver from that receiver&#8217;s connected server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_recovery_prefetch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only one row, showing statistics about blocks prefetched during recovery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_subscription</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">At least one row per subscription, showing information about the subscription workers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_ssl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row per connection (regular and replication), showing information about SSL used on this connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_gssapi</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row per connection (regular and replication), showing information about GSSAPI authentication and encryption used on this connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_progress_analyze</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row for each backend (including autovacuum worker processes) running <code>ANALYZE</code>, showing current progress.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_progress_create_index</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row for each backend running <code>CREATE INDEX</code> or <code>REINDEX</code>, showing current progress.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_progress_vacuum</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row for each backend (including autovacuum worker processes) running <code>VACUUM</code>, showing current progress.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_progress_cluster</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row for each backend running <code>CLUSTER</code> or <code>VACUUM FULL</code>, showing current progress.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_progress_basebackup</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row for each WAL sender process streaming a base backup, showing current progress.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_progress_copy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row for each backend running <code>COPY</code>, showing current progress.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Collected Statistics Views</strong></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">View Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_archiver</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row only, showing statistics about the WAL archiver process&#8217;s activity. See <a href="https://www.postgresql.org/docs/current/monitoring-stats.html#MONITORING-PG-STAT-ARCHIVER-VIEW"><code>pg_stat_archiver</code></a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_bgwriter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row only, showing statistics about the background writer process&#8217;s activity. See <a href="https://www.postgresql.org/docs/current/monitoring-stats.html#MONITORING-PG-STAT-BGWRITER-VIEW"><code>pg_stat_bgwriter</code></a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_wal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row only, showing statistics about WAL activity. See <a href="https://www.postgresql.org/docs/current/monitoring-stats.html#MONITORING-PG-STAT-WAL-VIEW"><code>pg_stat_wal</code></a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_database</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row per database, showing database-wide statistics. See <a href="https://www.postgresql.org/docs/current/monitoring-stats.html#MONITORING-PG-STAT-DATABASE-VIEW"><code>pg_stat_database</code></a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_database_conflicts</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row per database, showing database-wide statistics about query cancels due to conflict with recovery on standby servers. See <a href="https://www.postgresql.org/docs/current/monitoring-stats.html#MONITORING-PG-STAT-DATABASE-CONFLICTS-VIEW"><code>pg_stat_database_conflicts</code></a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_all_tables</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row for each table in the current database, showing statistics about accesses to that specific table. See <a href="https://www.postgresql.org/docs/current/monitoring-stats.html#MONITORING-PG-STAT-ALL-TABLES-VIEW"><code>pg_stat_all_tables</code></a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_sys_tables</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as <code>pg_stat_all_tables</code>, except that only system tables are shown.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_user_tables</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as <code>pg_stat_all_tables</code>, except that only user tables are shown.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_xact_all_tables</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Similar to <code>pg_stat_all_tables</code>, but counts actions taken so far within the current transaction (which are <strong>not</strong> yet included in <code>pg_stat_all_tables</code> and related views). The columns for numbers of live and dead rows and vacuum and analyze actions are not present in this view.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_xact_sys_tables</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as <code>pg_stat_xact_all_tables</code>, except that only system tables are shown.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_xact_user_tables</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as <code>pg_stat_xact_all_tables</code>, except that only user tables are shown.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_all_indexes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row for each index in the current database, showing statistics about accesses to that specific index. See <a href="https://www.postgresql.org/docs/current/monitoring-stats.html#MONITORING-PG-STAT-ALL-INDEXES-VIEW"><code>pg_stat_all_indexes</code></a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_sys_indexes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as <code>pg_stat_all_indexes</code>, except that only indexes on system tables are shown.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_user_indexes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as <code>pg_stat_all_indexes</code>, except that only indexes on user tables are shown.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_statio_all_tables</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row for each table in the current database, showing statistics about I/O on that specific table. See <a href="https://www.postgresql.org/docs/current/monitoring-stats.html#MONITORING-PG-STATIO-ALL-TABLES-VIEW"><code>pg_statio_all_tables</code></a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_statio_sys_tables</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as <code>pg_statio_all_tables</code>, except that only system tables are shown.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_statio_user_tables</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as <code>pg_statio_all_tables</code>, except that only user tables are shown.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_statio_all_indexes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row for each index in the current database, showing statistics about I/O on that specific index. See <a href="https://www.postgresql.org/docs/current/monitoring-stats.html#MONITORING-PG-STATIO-ALL-INDEXES-VIEW"><code>pg_statio_all_indexes</code></a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_statio_sys_indexes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as <code>pg_statio_all_indexes</code>, except that only indexes on system tables are shown.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_statio_user_indexes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as <code>pg_statio_all_indexes</code>, except that only indexes on user tables are shown.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_statio_all_sequences</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row for each sequence in the current database, showing statistics about I/O on that specific sequence. See <a href="https://www.postgresql.org/docs/current/monitoring-stats.html#MONITORING-PG-STATIO-ALL-SEQUENCES-VIEW"><code>pg_statio_all_sequences</code></a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_statio_sys_sequences</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as <code>pg_statio_all_sequences</code>, except that only system sequences are shown. (Presently, no system sequences are defined, so this view is always empty.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_statio_user_sequences</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as <code>pg_statio_all_sequences</code>, except that only user sequences are shown.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_user_functions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row for each tracked function, showing statistics about executions of that function. See <a href="https://www.postgresql.org/docs/current/monitoring-stats.html#MONITORING-PG-STAT-USER-FUNCTIONS-VIEW"><code>pg_stat_user_functions</code></a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_xact_user_functions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Similar to <code>pg_stat_user_functions</code>, but counts only calls during the current transaction (which are <strong>not</strong> yet included in <code>pg_stat_user_functions</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_slru</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row per SLRU, showing statistics of operations. See <a href="https://www.postgresql.org/docs/current/monitoring-stats.html#MONITORING-PG-STAT-SLRU-VIEW"><code>pg_stat_slru</code></a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_replication_slots</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row per replication slot, showing statistics about the replication slot&#8217;s usage. See <a href="https://www.postgresql.org/docs/current/monitoring-stats.html#MONITORING-PG-STAT-REPLICATION-SLOTS-VIEW"><code>pg_stat_replication_slots</code></a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_subscription_stats</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One row per subscription, showing statistics about errors. See <a href="https://www.postgresql.org/docs/current/monitoring-stats.html#MONITORING-PG-STAT-SUBSCRIPTION-STATS"><code>pg_stat_subscription_stats</code></a> for details.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The per-index statistics are particularly useful to determine which indexes are being used and how effective they are.</p>
</div>
<div class="paragraph">
<p>The <code>pg_statio_</code> views are primarily useful to determine the effectiveness of the buffer cache. When the number of actual disk reads is much smaller than the number of buffer hits, then the cache is satisfying most read requests without invoking a kernel call. However, these statistics do not give the entire story: due to the way in which IvorySQL handles disk I/O, data that is not in the IvorySQL buffer cache might still reside in the kernel&#8217;s I/O cache, and might therefore still be fetched without requiring a physical read. Users interested in obtaining more detailed information on IvorySQL I/O behavior are advised to use the IvorySQL statistics views in combination with operating system utilities that allow insight into the kernel&#8217;s handling of I/O.</p>
</div>
</div>
<div class="sect3">
<h4 id="pg_stat_activity"><a class="anchor" href="#pg_stat_activity"></a>1.2.3. <code>pg_stat_activity</code></h4>
<div class="paragraph">
<p>The <code>pg_stat_activity</code> view will have one row per server process, showing information related to the current activity of that process.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_activity</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datid</code> `oid`OID of the database this backend is connected to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datname</code> `name`Name of the database this backend is connected to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pid</code> `integer`Process ID of this backend</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>leader_pid</code> <code>integer`Process ID of the parallel group leader, if this process is a parallel query worker. `NULL</code> if this process is a parallel group leader or does not participate in parallel query.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>usesysid</code> `oid`OID of the user logged into this backend</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>usename</code> `name`Name of the user logged into this backend</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>application_name</code> `text`Name of the application that is connected to this backend</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>client_addr</code> `inet`IP address of the client connected to this backend. If this field is null, it indicates either that the client is connected via a Unix socket on the server machine or that this is an internal process such as autovacuum.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>client_hostname</code> <code>text`Host name of the connected client, as reported by a reverse DNS lookup of `client_addr</code>. This field will only be non-null for IP connections, and only when <a href="https://www.postgresql.org/docs/current/runtime-config-logging.html#GUC-LOG-HOSTNAME">log_hostname</a> is enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>client_port</code> <code>integer`TCP port number that the client is using for communication with this backend, or `-1</code> if a Unix socket is used. If this field is null, it indicates that this is an internal server process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backend_start</code> `timestamp with time zone`Time when this process was started. For client backends, this is the time the client connected to the server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xact_start</code> <code>timestamp with time zone`Time when this process' current transaction was started, or null if no transaction is active. If the current query is the first of its transaction, this column is equal to the `query_start</code> column.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>query_start</code> <code>timestamp with time zone`Time when the currently active query was started, or if `state</code> is not <code>active</code>, when the last query was started</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>state_change</code> <code>timestamp with time zone`Time when the `state</code> was last changed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wait_event_type</code> `text`The type of event for which the backend is waiting, if any; otherwise NULL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wait_event</code> `text`Wait event name if backend is currently waiting, otherwise NULL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>state</code> <code>text`Current overall state of this backend. Possible values are:`active</code>: The backend is executing a query.<code>idle</code>: The backend is waiting for a new client command.<code>idle in transaction</code>: The backend is in a transaction, but is not currently executing a query.<code>idle in transaction (aborted)</code>: This state is similar to <code>idle in transaction</code>, except one of the statements in the transaction caused an error.<code>fastpath function call</code>: The backend is executing a fast-path function.<code>disabled</code>: This state is reported if <a href="https://www.postgresql.org/docs/current/runtime-config-statistics.html#GUC-TRACK-ACTIVITIES">track_activities</a> is disabled in this backend.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backend_xid</code> `xid`Top-level transaction identifier of this backend, if any.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backend_xmin</code> <code>xid`The current backend&#8217;s `xmin</code> horizon.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>query_id</code> <code>bigint`Identifier of this backend&#8217;s most recent query. If `state</code> is <code>active</code> this field shows the identifier of the currently executing query. In all other states, it shows the identifier of last query that was executed. Query identifiers are not computed by default so this field will be null unless <a href="https://www.postgresql.org/docs/current/runtime-config-statistics.html#GUC-COMPUTE-QUERY-ID">compute_query_id</a> parameter is enabled or a third-party module that computes query identifiers is configured.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>query</code> <code>text`Text of this backend&#8217;s most recent query. If `state</code> is <code>active</code> this field shows the currently executing query. In all other states, it shows the last query that was executed. By default the query text is truncated at 1024 bytes; this value can be changed via the parameter <a href="https://www.postgresql.org/docs/current/runtime-config-statistics.html#GUC-TRACK-ACTIVITY-QUERY-SIZE">track_activity_query_size</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backend_type</code> <code>text`Type of current backend. Possible types are `autovacuum launcher</code>, <code>autovacuum worker</code>, <code>logical replication launcher</code>, <code>logical replication worker</code>, <code>parallel worker</code>, <code>background writer</code>, <code>client backend</code>, <code>checkpointer</code>, <code>archiver</code>, <code>startup</code>, <code>walreceiver</code>, <code>walsender</code> and <code>walwriter</code>. In addition, background workers registered by extensions may have additional types.</p></td>
</tr>
</tbody>
</table>
<div class="sidebarblock">
<div class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The <code>wait_event</code> and <code>state</code> columns are independent. If a backend is in the <code>active</code> state, it may or may not be <code>waiting</code> on some event. If the state is <code>active</code> and <code>wait_event</code> is non-null, it means that a query is being executed, but is being blocked somewhere in the system.</p>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Wait Event Types</strong></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Wait Event Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Activity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The server process is idle. This event type indicates a process waiting for activity in its main processing loop. <code>wait_event</code> will identify the specific wait point</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BufferPin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The server process is waiting for exclusive access to a data buffer. Buffer pin waits can be protracted if another process holds an open cursor that last read data from the buffer in question.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Client</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The server process is waiting for activity on a socket connected to a user application. Thus, the server expects something to happen that is independent of its internal processes. <code>wait_event</code> will identify the specific wait point.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Extension</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The server process is waiting for some condition defined by an extension module.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IO</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The server process is waiting for an I/O operation to complete. <code>wait_event</code> will identify the specific wait point.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IPC</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The server process is waiting for some interaction with another server process. <code>wait_event</code> will identify the specific wait point.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Lock</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The server process is waiting for a heavyweight lock. Heavyweight locks, also known as lock manager locks or simply locks, primarily protect SQL-visible objects such as tables. However, they are also used to ensure mutual exclusion for certain internal operations such as relation extension. <code>wait_event</code> will identify the type of lock awaited.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LWLock</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The server process is waiting for a lightweight lock. Most such locks protect a particular data structure in shared memory. <code>wait_event</code> will contain a name identifying the purpose of the lightweight lock. (Some locks have specific names; others are part of a group of locks each with a similar purpose.) .</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The server process is waiting for a timeout to expire. <code>wait_event</code> will identify the specific wait point.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Wait Events of Type <code>Activity</code></strong></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Activity</code> Wait Event</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ArchiverMain</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting in main loop of archiver process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AutoVacuumMain</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting in main loop of autovacuum launcher process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BgWriterHibernate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting in background writer process, hibernating.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BgWriterMain</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting in main loop of background writer process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CheckpointerMain</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting in main loop of checkpointer process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LogicalApplyMain</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting in main loop of logical replication apply process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LogicalLauncherMain</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting in main loop of logical replication launcher process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RecoveryWalStream</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting in main loop of startup process for WAL to arrive, during streaming recovery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SysLoggerMain</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting in main loop of syslogger process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WalReceiverMain</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting in main loop of WAL receiver process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WalSenderMain</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting in main loop of WAL sender process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WalWriterMain</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting in main loop of WAL writer process.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Wait Events of Type <code>BufferPin</code></strong></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BufferPin</code> Wait Event</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BufferPin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to acquire an exclusive pin on a buffer.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Wait Events of Type <code>Client</code></strong></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Client</code> Wait Event</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ClientRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read data from the client.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ClientWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to write data to the client.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>GSSOpenServer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read data from the client while establishing a GSSAPI session.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LibPQWalReceiverConnect</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting in WAL receiver to establish connection to remote server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LibPQWalReceiverReceive</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting in WAL receiver to receive data from remote server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SSLOpenServer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for SSL while attempting connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WalSenderWaitForWAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for WAL to be flushed in WAL sender process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WalSenderWriteData</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for any activity when processing replies from WAL receiver in WAL sender process.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Wait Events of Type <code>Extension</code></strong></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Extension</code> Wait Event</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Extension</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting in an extension.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Wait Events of Type <code>IO</code></strong></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IO</code> Wait Event</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BaseBackupRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for base backup to read from a file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BufFileRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a read from a buffered file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BufFileWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write to a buffered file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BufFileTruncate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a buffered file to be truncated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ControlFileRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a read from the <code>pg_control</code> file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ControlFileSync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for the <code>pg_control</code> file to reach durable storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ControlFileSyncUpdate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for an update to the <code>pg_control</code> file to reach durable storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ControlFileWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write to the <code>pg_control</code> file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ControlFileWriteUpdate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write to update the <code>pg_control</code> file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CopyFileRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a read during a file copy operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CopyFileWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write during a file copy operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DSMFillZeroWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to fill a dynamic shared memory backing file with zeroes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DataFileExtend</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a relation data file to be extended.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DataFileFlush</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a relation data file to reach durable storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DataFileImmediateSync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for an immediate synchronization of a relation data file to durable storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DataFilePrefetch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for an asynchronous prefetch from a relation data file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DataFileRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a read from a relation data file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DataFileSync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for changes to a relation data file to reach durable storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DataFileTruncate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a relation data file to be truncated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DataFileWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write to a relation data file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LockFileAddToDataDirRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a read while adding a line to the data directory lock file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LockFileAddToDataDirSync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for data to reach durable storage while adding a line to the data directory lock file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LockFileAddToDataDirWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write while adding a line to the data directory lock file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LockFileCreateRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read while creating the data directory lock file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LockFileCreateSync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for data to reach durable storage while creating the data directory lock file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LockFileCreateWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write while creating the data directory lock file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LockFileReCheckDataDirRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a read during recheck of the data directory lock file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LogicalRewriteCheckpointSync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for logical rewrite mappings to reach durable storage during a checkpoint.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LogicalRewriteMappingSync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for mapping data to reach durable storage during a logical rewrite.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LogicalRewriteMappingWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write of mapping data during a logical rewrite.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LogicalRewriteSync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for logical rewrite mappings to reach durable storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LogicalRewriteTruncate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for truncate of mapping data during a logical rewrite.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LogicalRewriteWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write of logical rewrite mappings.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RelationMapRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a read of the relation map file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RelationMapSync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for the relation map file to reach durable storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RelationMapWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write to the relation map file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ReorderBufferRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a read during reorder buffer management.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ReorderBufferWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write during reorder buffer management.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ReorderLogicalMappingRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a read of a logical mapping during reorder buffer management.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ReplicationSlotRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a read from a replication slot control file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ReplicationSlotRestoreSync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a replication slot control file to reach durable storage while restoring it to memory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ReplicationSlotSync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a replication slot control file to reach durable storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ReplicationSlotWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write to a replication slot control file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SLRUFlushSync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for SLRU data to reach durable storage during a checkpoint or database shutdown.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SLRURead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a read of an SLRU page.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SLRUSync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for SLRU data to reach durable storage following a page write.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SLRUWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write of an SLRU page.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SnapbuildRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a read of a serialized historical catalog snapshot.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SnapbuildSync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a serialized historical catalog snapshot to reach durable storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SnapbuildWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write of a serialized historical catalog snapshot.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TimelineHistoryFileSync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a timeline history file received via streaming replication to reach durable storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TimelineHistoryFileWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write of a timeline history file received via streaming replication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TimelineHistoryRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a read of a timeline history file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TimelineHistorySync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a newly created timeline history file to reach durable storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TimelineHistoryWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write of a newly created timeline history file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TwophaseFileRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a read of a two phase state file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TwophaseFileSync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a two phase state file to reach durable storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TwophaseFileWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write of a two phase state file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VersionFileWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for the version file to be written while creating a database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WALBootstrapSync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for WAL to reach durable storage during bootstrapping.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WALBootstrapWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write of a WAL page during bootstrapping.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WALCopyRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a read when creating a new WAL segment by copying an existing one.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WALCopySync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a new WAL segment created by copying an existing one to reach durable storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WALCopyWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write when creating a new WAL segment by copying an existing one.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WALInitSync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a newly initialized WAL file to reach durable storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WALInitWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write while initializing a new WAL file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WALRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a read from a WAL file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WALSenderTimelineHistoryRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a read from a timeline history file during a walsender timeline command.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WALSync</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a WAL file to reach durable storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WALSyncMethodAssign</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for data to reach durable storage while assigning a new WAL sync method.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WALWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a write to a WAL file.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Wait Events of Type <code>IPC</code></strong></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IPC</code> Wait Event</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AppendReady</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for subplan nodes of an <code>Append</code> plan node to be ready.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ArchiveCleanupCommand</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for <a href="https://www.postgresql.org/docs/current/runtime-config-wal.html#GUC-ARCHIVE-CLEANUP-COMMAND">archive_cleanup_command</a> to complete.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ArchiveCommand</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for <a href="https://www.postgresql.org/docs/current/runtime-config-wal.html#GUC-ARCHIVE-COMMAND">archive_command</a> to complete.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BackendTermination</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for the termination of another backend.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BackupWaitWalArchive</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for WAL files required for a backup to be successfully archived.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BgWorkerShutdown</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for background worker to shut down.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BgWorkerStartup</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for background worker to start up.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BtreePage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for the page number needed to continue a parallel B-tree scan to become available.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BufferIO</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for buffer I/O to complete.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CheckpointDone</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a checkpoint to complete.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CheckpointStart</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a checkpoint to start.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ExecuteGather</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for activity from a child process while executing a <code>Gather</code> plan node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HashBatchAllocate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for an elected Parallel Hash participant to allocate a hash table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HashBatchElect</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to elect a Parallel Hash participant to allocate a hash table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HashBatchLoad</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for other Parallel Hash participants to finish loading a hash table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HashBuildAllocate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for an elected Parallel Hash participant to allocate the initial hash table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HashBuildElect</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to elect a Parallel Hash participant to allocate the initial hash table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HashBuildHashInner</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for other Parallel Hash participants to finish hashing the inner relation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HashBuildHashOuter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for other Parallel Hash participants to finish partitioning the outer relation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HashGrowBatchesAllocate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for an elected Parallel Hash participant to allocate more batches.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HashGrowBatchesDecide</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to elect a Parallel Hash participant to decide on future batch growth.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HashGrowBatchesElect</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to elect a Parallel Hash participant to allocate more batches.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HashGrowBatchesFinish</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for an elected Parallel Hash participant to decide on future batch growth.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HashGrowBatchesRepartition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for other Parallel Hash participants to finish repartitioning.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HashGrowBucketsAllocate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for an elected Parallel Hash participant to finish allocating more buckets.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HashGrowBucketsElect</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to elect a Parallel Hash participant to allocate more buckets.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HashGrowBucketsReinsert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for other Parallel Hash participants to finish inserting tuples into new buckets.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LogicalSyncData</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a logical replication remote server to send data for initial table synchronization.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LogicalSyncStateChange</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a logical replication remote server to change state.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MessageQueueInternal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for another process to be attached to a shared message queue.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MessageQueuePutMessage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to write a protocol message to a shared message queue.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MessageQueueReceive</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to receive bytes from a shared message queue.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MessageQueueSend</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to send bytes to a shared message queue.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ParallelBitmapScan</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for parallel bitmap scan to become initialized.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ParallelCreateIndexScan</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for parallel <code>CREATE INDEX</code> workers to finish heap scan.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ParallelFinish</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for parallel workers to finish computing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ProcArrayGroupUpdate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for the group leader to clear the transaction ID at end of a parallel operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ProcSignalBarrier</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a barrier event to be processed by all backends.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Promote</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for standby promotion.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RecoveryConflictSnapshot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for recovery conflict resolution for a vacuum cleanup.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RecoveryConflictTablespace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for recovery conflict resolution for dropping a tablespace.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RecoveryEndCommand</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for <a href="https://www.postgresql.org/docs/current/runtime-config-wal.html#GUC-RECOVERY-END-COMMAND">recovery_end_command</a> to complete.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RecoveryPause</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for recovery to be resumed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ReplicationOriginDrop</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a replication origin to become inactive so it can be dropped.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ReplicationSlotDrop</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a replication slot to become inactive so it can be dropped.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RestoreCommand</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for <a href="https://www.postgresql.org/docs/current/runtime-config-wal.html#GUC-RESTORE-COMMAND">restore_command</a> to complete.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SafeSnapshot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to obtain a valid snapshot for a <code>READ ONLY DEFERRABLE</code> transaction.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SyncRep</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for confirmation from a remote server during synchronous replication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WalReceiverExit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for the WAL receiver to exit.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WalReceiverWaitStart</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for startup process to send initial data for streaming replication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>XactGroupUpdate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for the group leader to update transaction status at end of a parallel operation.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Wait Events of Type <code>Lock</code></strong></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Lock</code> Wait Event</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>advisory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to acquire an advisory user lock.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>extend</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to extend a relation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>frozenid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to update <code>pg_database</code>.<code>datfrozenxid</code> and <code>pg_database</code>.<code>datminmxid</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>object</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to acquire a lock on a non-relation database object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to acquire a lock on a page of a relation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to acquire a lock on a relation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spectoken</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to acquire a speculative insertion lock.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transactionid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for a transaction to finish.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuple</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to acquire a lock on a tuple.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>userlock</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to acquire a user lock.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>virtualxid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to acquire a virtual transaction ID lock.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Wait Events of Type <code>LWLock</code></strong></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LWLock</code> Wait Event</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AddinShmemInit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to manage an extension&#8217;s space allocation in shared memory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AutoFile</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to update the <code>postgresql.auto.conf</code> file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Autovacuum</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or update the current state of autovacuum workers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AutovacuumSchedule</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to ensure that a table selected for autovacuum still needs vacuuming.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BackgroundWorker</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or update background worker state.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BtreeVacuum</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or update vacuum-related information for a B-tree index.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BufferContent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to access a data page in memory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BufferMapping</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to associate a data block with a buffer in the buffer pool.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CheckpointerComm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to manage fsync requests.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CommitTs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or update the last value set for a transaction commit timestamp.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CommitTsBuffer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for I/O on a commit timestamp SLRU buffer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CommitTsSLRU</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to access the commit timestamp SLRU cache.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ControlFile</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or update the <code>pg_control</code> file or create a new WAL file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DynamicSharedMemoryControl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or update dynamic shared memory allocation information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LockFastPath</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or update a process' fast-path lock information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LockManager</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or update information about “heavyweight” locks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LogicalRepWorker</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or update the state of logical replication workers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MultiXactGen</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or update shared multixact state.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MultiXactMemberBuffer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for I/O on a multixact member SLRU buffer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MultiXactMemberSLRU</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to access the multixact member SLRU cache.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MultiXactOffsetBuffer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for I/O on a multixact offset SLRU buffer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MultiXactOffsetSLRU</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to access the multixact offset SLRU cache.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MultiXactTruncation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or truncate multixact information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NotifyBuffer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for I/O on a <code>NOTIFY</code> message SLRU buffer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NotifyQueue</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or update <code>NOTIFY</code> messages.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NotifyQueueTail</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to update limit on <code>NOTIFY</code> message storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NotifySLRU</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to access the <code>NOTIFY</code> message SLRU cache.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>OidGen</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to allocate a new OID.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>OldSnapshotTimeMap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or update old snapshot control information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ParallelAppend</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to choose the next subplan during Parallel Append plan execution.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ParallelHashJoin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to synchronize workers during Parallel Hash Join plan execution.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ParallelQueryDSA</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for parallel query dynamic shared memory allocation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PerSessionDSA</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for parallel query dynamic shared memory allocation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PerSessionRecordType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to access a parallel query&#8217;s information about composite types.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PerSessionRecordTypmod</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to access a parallel query&#8217;s information about type modifiers that identify anonymous record types.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PerXactPredicateList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to access the list of predicate locks held by the current serializable transaction during a parallel query.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PredicateLockManager</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to access predicate lock information used by serializable transactions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ProcArray</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to access the shared per-process data structures (typically, to get a snapshot or report a session&#8217;s transaction ID).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RelationMapping</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or update a <code>pg_filenode.map</code> file (used to track the filenode assignments of certain system catalogs).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RelCacheInit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or update a <code>pg_internal.init</code> relation cache initialization file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ReplicationOrigin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to create, drop or use a replication origin.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ReplicationOriginState</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or update the progress of one replication origin.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ReplicationSlotAllocation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to allocate or free a replication slot.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ReplicationSlotControl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or update replication slot state.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ReplicationSlotIO</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for I/O on a replication slot.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SerialBuffer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for I/O on a serializable transaction conflict SLRU buffer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SerializableFinishedList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to access the list of finished serializable transactions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SerializablePredicateList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to access the list of predicate locks held by serializable transactions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PgStatsDSA</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for stats dynamic shared memory allocator access</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PgStatsHash</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for stats shared memory hash table access</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PgStatsData</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for shared memory stats data access</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SerializableXactHash</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or update information about serializable transactions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SerialSLRU</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to access the serializable transaction conflict SLRU cache.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SharedTidBitmap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to access a shared TID bitmap during a parallel bitmap index scan.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SharedTupleStore</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to access a shared tuple store during parallel query.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ShmemIndex</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to find or allocate space in shared memory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SInvalRead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to retrieve messages from the shared catalog invalidation queue.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SInvalWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to add a message to the shared catalog invalidation queue.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SubtransBuffer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for I/O on a sub-transaction SLRU buffer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SubtransSLRU</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to access the sub-transaction SLRU cache.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SyncRep</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or update information about the state of synchronous replication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SyncScan</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to select the starting location of a synchronized table scan.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TablespaceCreate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to create or drop a tablespace.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TwoPhaseState</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to read or update the state of prepared transactions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WALBufMapping</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to replace a page in WAL buffers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WALInsert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to insert WAL data into a memory buffer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WALWrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for WAL buffers to be written to disk.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WrapLimitsVacuum</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to update limits on transaction id and multixact consumption.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>XactBuffer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting for I/O on a transaction status SLRU buffer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>XactSLRU</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to access the transaction status SLRU cache.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>XactTruncation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to execute <code>pg_xact_status</code> or update the oldest transaction ID available to it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>XidGen</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to allocate a new transaction ID.</p></td>
</tr>
</tbody>
</table>
<div class="sidebarblock">
<div class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Extensions can add <code>LWLock</code> types to the list shown in Table 12. In some cases, the name assigned by an extension will not be available in all server processes; so an <code>LWLock</code> wait event might be reported as just “<code>extension</code>” rather than the extension-assigned name.</p>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Wait Events of Type <code>Timeout</code></strong></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Timeout</code> Wait Event</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BaseBackupThrottle</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting during base backup when throttling activity.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CheckpointWriteDelay</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting between writes while performing a checkpoint.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PgSleep</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting due to a call to <code>pg_sleep</code> or a sibling function.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RecoveryApplyDelay</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to apply WAL during recovery because of a delay setting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RecoveryRetrieveRetryInterval</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting during recovery when WAL data is not available from any source (<code>pg_wal</code>, archive or stream).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RegisterSyncRequest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting while sending synchronization requests to the checkpointer, because the request queue is full.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VacuumDelay</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting in a cost-based vacuum delay point.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VacuumTruncate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting to acquire an exclusive lock to truncate off any empty pages at the end of a table vacuumed.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Here is an example of how wait events can be viewed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">SELECT pid, wait_event_type, wait_event FROM pg_stat_activity WHERE wait_event is NOT NULL;
 pid  | wait_event_type | wait_event
------+-----------------+------------
 2540 | Lock            | relation
 6644 | LWLock          | ProcArray
(2 rows)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="pg_stat_replication"><a class="anchor" href="#pg_stat_replication"></a>1.2.4. <code>pg_stat_replication</code></h4>
<div class="paragraph">
<p>The <code>pg_stat_replication</code> view will contain one row per WAL sender process, showing statistics about replication to that sender&#8217;s connected standby server. Only directly connected standbys are listed; no information is available about downstream standby servers.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_replication</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pid</code> `integer`Process ID of a WAL sender process</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>usesysid</code> `oid`OID of the user logged into this WAL sender process</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>usename</code> `name`Name of the user logged into this WAL sender process</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>application_name</code> `text`Name of the application that is connected to this WAL sender</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>client_addr</code> `inet`IP address of the client connected to this WAL sender. If this field is null, it indicates that the client is connected via a Unix socket on the server machine.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>client_hostname</code> <code>text`Host name of the connected client, as reported by a reverse DNS lookup of `client_addr</code>. This field will only be non-null for IP connections, and only when <a href="https://www.postgresql.org/docs/current/runtime-config-logging.html#GUC-LOG-HOSTNAME">log_hostname</a> is enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>client_port</code> <code>integer`TCP port number that the client is using for communication with this WAL sender, or `-1</code> if a Unix socket is used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backend_start</code> `timestamp with time zone`Time when this process was started, i.e., when the client connected to this WAL sender</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backend_xmin</code> <code>xid`This standby&#8217;s `xmin</code> horizon reported by <a href="https://www.postgresql.org/docs/current/runtime-config-replication.html#GUC-HOT-STANDBY-FEEDBACK">hot_standby_feedback</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>state</code> <code>text`Current WAL sender state. Possible values are:`startup</code>: This WAL sender is starting up.<code>catchup</code>: This WAL sender&#8217;s connected standby is catching up with the primary.<code>streaming</code>: This WAL sender is streaming changes after its connected standby server has caught up with the primary.<code>backup</code>: This WAL sender is sending a backup.<code>stopping</code>: This WAL sender is stopping.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sent_lsn</code> `pg_lsn`Last write-ahead log location sent on this connection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>write_lsn</code> `pg_lsn`Last write-ahead log location written to disk by this standby server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>flush_lsn</code> `pg_lsn`Last write-ahead log location flushed to disk by this standby server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>replay_lsn</code> `pg_lsn`Last write-ahead log location replayed into the database on this standby server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>write_lag</code> <code>interval`Time elapsed between flushing recent WAL locally and receiving notification that this standby server has written it (but not yet flushed it or applied it). This can be used to gauge the delay that `synchronous_commit</code> level <code>remote_write</code> incurred while committing if this server was configured as a synchronous standby.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>flush_lag</code> <code>interval`Time elapsed between flushing recent WAL locally and receiving notification that this standby server has written and flushed it (but not yet applied it). This can be used to gauge the delay that `synchronous_commit</code> level <code>on</code> incurred while committing if this server was configured as a synchronous standby.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>replay_lag</code> <code>interval`Time elapsed between flushing recent WAL locally and receiving notification that this standby server has written, flushed and applied it. This can be used to gauge the delay that `synchronous_commit</code> level <code>remote_apply</code> incurred while committing if this server was configured as a synchronous standby.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sync_priority</code> `integer`Priority of this standby server for being chosen as the synchronous standby in a priority-based synchronous replication. This has no effect in a quorum-based synchronous replication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sync_state</code> <code>text`Synchronous state of this standby server. Possible values are:`async</code>: This standby server is asynchronous.<code>potential</code>: This standby server is now asynchronous, but can potentially become synchronous if one of current synchronous ones fails.<code>sync</code>: This standby server is synchronous.<code>quorum</code>: This standby server is considered as a candidate for quorum standbys.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reply_time</code> `timestamp with time zone`Send time of last reply message received from standby server</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The lag times reported in the <code>pg_stat_replication</code> view are measurements of the time taken for recent WAL to be written, flushed and replayed and for the sender to know about it. These times represent the commit delay that was (or would have been) introduced by each synchronous commit level, if the remote server was configured as a synchronous standby. For an asynchronous standby, the <code>replay_lag</code> column approximates the delay before recent transactions became visible to queries. If the standby server has entirely caught up with the sending server and there is no more WAL activity, the most recently measured lag times will continue to be displayed for a short time and then show NULL.</p>
</div>
<div class="paragraph">
<p>Lag times work automatically for physical replication. Logical decoding plugins may optionally emit tracking messages; if they do not, the tracking mechanism will simply display NULL lag.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The reported lag times are not predictions of how long it will take for the standby to catch up with the sending server assuming the current rate of replay. Such a system would show similar times while new WAL is being generated, but would differ when the sender becomes idle. In particular, when the standby has caught up completely, <code>pg_stat_replication</code> shows the time taken to write, flush and replay the most recent reported WAL location rather than zero as some users might expect. This is consistent with the goal of measuring synchronous commit and transaction visibility delays for recent write transactions. To reduce confusion for users expecting a different model of lag, the lag columns revert to NULL after a short time on a fully replayed idle system. Monitoring systems should choose whether to represent this as missing data, zero or continue to display the last known value.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="pg_stat_replication_slots"><a class="anchor" href="#pg_stat_replication_slots"></a>1.2.5. <code>pg_stat_replication_slots</code></h4>
<div class="paragraph">
<p>The <code>pg_stat_replication_slots</code> view will contain one row per logical replication slot, showing statistics about its usage.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_replication_slots</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>slot_name</code> `text`A unique, cluster-wide identifier for the replication slot</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spill_txns</code> <code>bigint`Number of transactions spilled to disk once the memory used by logical decoding to decode changes from WAL has exceeded `logical_decoding_work_mem</code>. The counter gets incremented for both top-level transactions and subtransactions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spill_count</code> `bigint`Number of times transactions were spilled to disk while decoding changes from WAL for this slot. This counter is incremented each time a transaction is spilled, and the same transaction may be spilled multiple times.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spill_bytes</code> <code>bigint`Amount of decoded transaction data spilled to disk while performing decoding of changes from WAL for this slot. This and other spill counters can be used to gauge the I/O which occurred during logical decoding and allow tuning `logical_decoding_work_mem</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stream_txns</code> <code>bigint`Number of in-progress transactions streamed to the decoding output plugin after the memory used by logical decoding to decode changes from WAL for this slot has exceeded `logical_decoding_work_mem</code>. Streaming only works with top-level transactions (subtransactions can&#8217;t be streamed independently), so the counter is not incremented for subtransactions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">`stream_count``bigint`Number of times in-progress transactions were streamed to the decoding output plugin while decoding changes from WAL for this slot. This counter is incremented each time a transaction is streamed, and the same transaction may be streamed multiple times.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stream_bytes``bigint`Amount of transaction data decoded for streaming in-progress transactions to the decoding output plugin while decoding changes from WAL for this slot. This and other streaming counters for this slot can be used to tune `logical_decoding_work_mem</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>total_txns</code> `bigint`Number of decoded transactions sent to the decoding output plugin for this slot. This counts top-level transactions only, and is not incremented for subtransactions. Note that this includes the transactions that are streamed and/or spilled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">`total_bytes``bigint`Amount of transaction data decoded for sending transactions to the decoding output plugin while decoding changes from WAL for this slot. Note that this includes data that is streamed and/or spilled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stats_reset</code> `timestamp with time zone`Time at which these statistics were last reset</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="pg_stat_wal_receiver"><a class="anchor" href="#pg_stat_wal_receiver"></a>1.2.6. <code>pg_stat_wal_receiver</code></h4>
<div class="paragraph">
<p>The <code>pg_stat_wal_receiver</code> view will contain only one row, showing statistics about the WAL receiver from that receiver&#8217;s connected server.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_wal_receiver</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pid</code> `integer`Process ID of the WAL receiver process</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>status</code> `text`Activity status of the WAL receiver process</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>receive_start_lsn</code> `pg_lsn`First write-ahead log location used when WAL receiver is started</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>receive_start_tli</code> `integer`First timeline number used when WAL receiver is started</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>written_lsn</code> `pg_lsn`Last write-ahead log location already received and written to disk, but not flushed. This should not be used for data integrity checks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>flushed_lsn</code> `pg_lsn`Last write-ahead log location already received and flushed to disk, the initial value of this field being the first log location used when WAL receiver is started</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>received_tli</code> `integer`Timeline number of last write-ahead log location received and flushed to disk, the initial value of this field being the timeline number of the first log location used when WAL receiver is started</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>last_msg_send_time</code> `timestamp with time zone`Send time of last message received from origin WAL sender</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>last_msg_receipt_time</code> `timestamp with time zone`Receipt time of last message received from origin WAL sender</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>latest_end_lsn</code> `pg_lsn`Last write-ahead log location reported to origin WAL sender</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>latest_end_time</code> `timestamp with time zone`Time of last write-ahead log location reported to origin WAL sender</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>slot_name</code> `text`Replication slot name used by this WAL receiver</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sender_host</code> <code>text`Host of the IvorySQL instance this WAL receiver is connected to. This can be a host name, an IP address, or a directory path if the connection is via Unix socket. (The path case can be distinguished because it will always be an absolute path, beginning with `/</code>.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sender_port</code> `integer`Port number of the IvorySQL instance this WAL receiver is connected to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>conninfo</code> `text`Connection string used by this WAL receiver, with security-sensitive fields obfuscated.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="pg_stat_recovery_prefetch"><a class="anchor" href="#pg_stat_recovery_prefetch"></a>1.2.7. <code>pg_stat_recovery_prefetch</code></h4>
<div class="paragraph">
<p>The <code>pg_stat_recovery_prefetch</code> view will contain only one row. The columns <code>wal_distance</code>, <code>block_distance</code> and <code>io_depth</code> show current values, and the other columns show cumulative counters that can be reset with the <code>pg_stat_reset_shared</code> function.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_recovery_prefetch</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stats_reset</code> `timestamp with time zone`Time at which these statistics were last reset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prefetch</code> `bigint`Number of blocks prefetched because they were not in the buffer pool</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hit</code> `bigint`Number of blocks not prefetched because they were already in the buffer pool</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>skip_init</code> `bigint`Number of blocks not prefetched because they would be zero-initialized</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>skip_new</code> `bigint`Number of blocks not prefetched because they didn&#8217;t exist yet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>skip_fpw</code> `bigint`Number of blocks not prefetched because a full page image was included in the WAL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>skip_rep</code> `bigint`Number of blocks not prefetched because they were already recently prefetched</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wal_distance</code> `int`How many bytes ahead the prefetcher is looking</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>block_distance</code> `int`How many blocks ahead the prefetcher is looking</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io_depth</code> `int`How many prefetches have been initiated but are not yet known to have completed</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="pg_stat_subscription"><a class="anchor" href="#pg_stat_subscription"></a>1.2.8. <code>pg_stat_subscription</code></h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_subscription</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>subid</code> `oid`OID of the subscription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>subname</code> `name`Name of the subscription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pid</code> `integer`Process ID of the subscription worker process</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relid</code> `oid`OID of the relation that the worker is synchronizing; null for the main apply worker</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>received_lsn</code> `pg_lsn`Last write-ahead log location received, the initial value of this field being 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>last_msg_send_time</code> `timestamp with time zone`Send time of last message received from origin WAL sender</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>last_msg_receipt_time</code> `timestamp with time zone`Receipt time of last message received from origin WAL sender</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>latest_end_lsn</code> `pg_lsn`Last write-ahead log location reported to origin WAL sender</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>latest_end_time</code> `timestamp with time zone`Time of last write-ahead log location reported to origin WAL sender</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="pg_stat_subscription_stats"><a class="anchor" href="#pg_stat_subscription_stats"></a>1.2.9. <code>pg_stat_subscription_stats</code></h4>
<div class="paragraph">
<p>The <code>pg_stat_subscription_stats</code> view will contain one row per subscription.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_subscription_stats</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>subid</code> `oid`OID of the subscription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>subname</code> `name`Name of the subscription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>apply_error_count</code> `bigint`Number of times an error occurred while applying changes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sync_error_count</code> `bigint`Number of times an error occurred during the initial table synchronization</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stats_reset</code> `timestamp with time zone`Time at which these statistics were last reset</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="pg_stat_ssl"><a class="anchor" href="#pg_stat_ssl"></a>1.2.10. <code>pg_stat_ssl</code></h4>
<div class="paragraph">
<p>The <code>pg_stat_ssl</code> view will contain one row per backend or WAL sender process, showing statistics about SSL usage on this connection. It can be joined to <code>pg_stat_activity</code> or <code>pg_stat_replication</code> on the <code>pid</code> column to get more details about the connection.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_ssl</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pid</code> `integer`Process ID of a backend or WAL sender process</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ssl</code> `boolean`True if SSL is used on this connection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code> `text`Version of SSL in use, or NULL if SSL is not in use on this connection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cipher</code> `text`Name of SSL cipher in use, or NULL if SSL is not in use on this connection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bits</code> `integer`Number of bits in the encryption algorithm used, or NULL if SSL is not used on this connection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>client_dn</code> <code>text`Distinguished Name (DN) field from the client certificate used, or NULL if no client certificate was supplied or if SSL is not in use on this connection. This field is truncated if the DN field is longer than `NAMEDATALEN</code> (64 characters in a standard build).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>client_serial</code> `numeric`Serial number of the client certificate, or NULL if no client certificate was supplied or if SSL is not in use on this connection. The combination of certificate serial number and certificate issuer uniquely identifies a certificate (unless the issuer erroneously reuses serial numbers).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>issuer_dn</code> <code>text`DN of the issuer of the client certificate, or NULL if no client certificate was supplied or if SSL is not in use on this connection. This field is truncated like `client_dn</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="pg_stat_gssapi"><a class="anchor" href="#pg_stat_gssapi"></a>1.2.11. <code>pg_stat_gssapi</code></h4>
<div class="paragraph">
<p>The <code>pg_stat_gssapi</code> view will contain one row per backend, showing information about GSSAPI usage on this connection. It can be joined to <code>pg_stat_activity</code> or <code>pg_stat_replication</code> on the <code>pid</code> column to get more details about the connection.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_gssapi</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pid</code> `integer`Process ID of a backend</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gss_authenticated</code> `boolean`True if GSSAPI authentication was used for this connection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>principal</code> <code>text`Principal used to authenticate this connection, or NULL if GSSAPI was not used to authenticate this connection. This field is truncated if the principal is longer than `NAMEDATALEN</code> (64 characters in a standard build).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>encrypted</code> `boolean`True if GSSAPI encryption is in use on this connection</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="pg_stat_archiver"><a class="anchor" href="#pg_stat_archiver"></a>1.2.12. <code>pg_stat_archiver</code></h4>
<div class="paragraph">
<p>The <code>pg_stat_archiver</code> view will always have a single row, containing data about the archiver process of the cluster.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_archiver</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>archived_count</code> `bigint`Number of WAL files that have been successfully archived</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>last_archived_wal</code> `text`Name of the WAL file most recently successfully archived</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>last_archived_time</code> `timestamp with time zone`Time of the most recent successful archive operation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>failed_count</code> `bigint`Number of failed attempts for archiving WAL files</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>last_failed_wal</code> `text`Name of the WAL file of the most recent failed archival operation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>last_failed_time</code> `timestamp with time zone`Time of the most recent failed archival operation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stats_reset</code> `timestamp with time zone`Time at which these statistics were last reset</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Normally, WAL files are archived in order, oldest to newest, but that is not guaranteed, and does not hold under special circumstances like when promoting a standby or after crash recovery. Therefore it is not safe to assume that all files older than <code>last_archived_wal</code> have also been successfully archived.</p>
</div>
</div>
<div class="sect3">
<h4 id="pg_stat_bgwriter"><a class="anchor" href="#pg_stat_bgwriter"></a>1.2.13. <code>pg_stat_bgwriter</code></h4>
<div class="paragraph">
<p>The <code>pg_stat_bgwriter</code> view will always have a single row, containing global data for the cluster.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_bgwriter</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checkpoints_timed</code> `bigint`Number of scheduled checkpoints that have been performed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checkpoints_req</code> `bigint`Number of requested checkpoints that have been performed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checkpoint_write_time</code> `double precision`Total amount of time that has been spent in the portion of checkpoint processing where files are written to disk, in milliseconds</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checkpoint_sync_time</code> `double precision`Total amount of time that has been spent in the portion of checkpoint processing where files are synchronized to disk, in milliseconds</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buffers_checkpoint</code> `bigint`Number of buffers written during checkpoints</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buffers_clean</code> `bigint`Number of buffers written by the background writer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxwritten_clean</code> `bigint`Number of times the background writer stopped a cleaning scan because it had written too many buffers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buffers_backend</code> `bigint`Number of buffers written directly by a backend</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buffers_backend_fsync</code> <code>bigint`Number of times a backend had to execute its own `fsync</code> call (normally the background writer handles those even when the backend does its own write)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buffers_alloc</code> `bigint`Number of buffers allocated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stats_reset</code> `timestamp with time zone`Time at which these statistics were last reset</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="pg_stat_wal"><a class="anchor" href="#pg_stat_wal"></a>1.2.14. <code>pg_stat_wal</code></h4>
<div class="paragraph">
<p>The <code>pg_stat_wal</code> view will always have a single row, containing data about WAL activity of the cluster.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_wal</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wal_records</code> `bigint`Total number of WAL records generated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wal_fpi</code> `bigint`Total number of WAL full page images generated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wal_bytes</code> `numeric`Total amount of WAL generated in bytes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wal_buffers_full</code> `bigint`Number of times WAL data was written to disk because WAL buffers became full</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wal_write</code> <code>bigint`Number of times WAL buffers were written out to disk via `XLogWrite</code> request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wal_sync</code> <code>bigint`Number of times WAL files were synced to disk via `issue_xlog_fsync</code> request (if <a href="https://www.postgresql.org/docs/current/runtime-config-wal.html#GUC-FSYNC">fsync</a> is <code>on</code> and <a href="https://www.postgresql.org/docs/current/runtime-config-wal.html#GUC-WAL-SYNC-METHOD">wal_sync_method</a> is either <code>fdatasync</code>, <code>fsync</code> or <code>fsync_writethrough</code>, otherwise zero).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wal_write_time</code> <code>double precision`Total amount of time spent writing WAL buffers to disk via `XLogWrite</code> request, in milliseconds (if <a href="https://www.postgresql.org/docs/current/runtime-config-statistics.html#GUC-TRACK-WAL-IO-TIMING">track_wal_io_timing</a> is enabled, otherwise zero). This includes the sync time when <code>wal_sync_method</code> is either <code>open_datasync</code> or <code>open_sync</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wal_sync_time</code> <code>double precision`Total amount of time spent syncing WAL files to disk via `issue_xlog_fsync</code> request, in milliseconds (if <code>track_wal_io_timing</code> is enabled, <code>fsync</code> is <code>on</code>, and <code>wal_sync_method</code> is either <code>fdatasync</code>, <code>fsync</code> or <code>fsync_writethrough</code>, otherwise zero).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stats_reset</code> `timestamp with time zone`Time at which these statistics were last reset</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="pg_stat_database"><a class="anchor" href="#pg_stat_database"></a>1.2.15. <code>pg_stat_database</code></h4>
<div class="paragraph">
<p>The <code>pg_stat_database</code> view will contain one row for each database in the cluster, plus one for shared objects, showing database-wide statistics.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_database</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datid</code> `oid`OID of this database, or 0 for objects belonging to a shared relation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datname</code> <code>name`Name of this database, or `NULL</code> for shared objects.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>numbackends</code> <code>integer`Number of backends currently connected to this database, or `NULL</code> for shared objects. This is the only column in this view that returns a value reflecting current state; all other columns return the accumulated values since the last reset.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xact_commit</code> `bigint`Number of transactions in this database that have been committed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xact_rollback</code> `bigint`Number of transactions in this database that have been rolled back</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>blks_read</code> `bigint`Number of disk blocks read in this database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>blks_hit</code> `bigint`Number of times disk blocks were found already in the buffer cache, so that a read was not necessary (this only includes hits in the IvorySQL buffer cache, not the operating system&#8217;s file system cache)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tup_returned</code> `bigint`Number of live rows fetched by sequential scans and index entries returned by index scans in this database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tup_fetched</code> `bigint`Number of live rows fetched by index scans in this database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tup_inserted</code> `bigint`Number of rows inserted by queries in this database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tup_updated</code> `bigint`Number of rows updated by queries in this database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tup_deleted</code> `bigint`Number of rows deleted by queries in this database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>conflicts</code> <code>bigint`Number of queries canceled due to conflicts with recovery in this database. (Conflicts occur only on standby servers; see <a href="https://www.postgresql.org/docs/current/monitoring-stats.html#MONITORING-PG-STAT-DATABASE-CONFLICTS-VIEW">`pg_stat_database_conflicts</code></a> for details.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>temp_files</code> `bigint`Number of temporary files created by queries in this database. All temporary files are counted, regardless of why the temporary file was created (e.g., sorting or hashing), and regardless of the <a href="https://www.postgresql.org/docs/current/runtime-config-logging.html#GUC-LOG-TEMP-FILES">log_temp_files</a> setting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>temp_bytes</code> `bigint`Total amount of data written to temporary files by queries in this database. All temporary files are counted, regardless of why the temporary file was created, and regardless of the <a href="https://www.postgresql.org/docs/current/runtime-config-logging.html#GUC-LOG-TEMP-FILES">log_temp_files</a> setting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deadlocks</code> `bigint`Number of deadlocks detected in this database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checksum_failures</code> `bigint`Number of data page checksum failures detected in this database (or on a shared object), or NULL if data checksums are not enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checksum_last_failure</code> `timestamp with time zone`Time at which the last data page checksum failure was detected in this database (or on a shared object), or NULL if data checksums are not enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>blk_read_time</code> `double precision`Time spent reading data file blocks by backends in this database, in milliseconds (if <a href="https://www.postgresql.org/docs/current/runtime-config-statistics.html#GUC-TRACK-IO-TIMING">track_io_timing</a> is enabled, otherwise zero)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>blk_write_time</code> `double precision`Time spent writing data file blocks by backends in this database, in milliseconds (if <a href="https://www.postgresql.org/docs/current/runtime-config-statistics.html#GUC-TRACK-IO-TIMING">track_io_timing</a> is enabled, otherwise zero)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>session_time</code> `double precision`Time spent by database sessions in this database, in milliseconds (note that statistics are only updated when the state of a session changes, so if sessions have been idle for a long time, this idle time won&#8217;t be included)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>active_time</code> <code>double precision`Time spent executing SQL statements in this database, in milliseconds (this corresponds to the states `active</code> and <code>fastpath function call</code> in <a href="https://www.postgresql.org/docs/current/monitoring-stats.html#MONITORING-PG-STAT-ACTIVITY-VIEW"><code>pg_stat_activity</code></a>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>idle_in_transaction_time</code> <code>double precision`Time spent idling while in a transaction in this database, in milliseconds (this corresponds to the states `idle in transaction</code> and <code>idle in transaction (aborted)</code> in <a href="https://www.postgresql.org/docs/current/monitoring-stats.html#MONITORING-PG-STAT-ACTIVITY-VIEW"><code>pg_stat_activity</code></a>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sessions</code> `bigint`Total number of sessions established to this database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sessions_abandoned</code> `bigint`Number of database sessions to this database that were terminated because connection to the client was lost</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sessions_fatal</code> `bigint`Number of database sessions to this database that were terminated by fatal errors</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sessions_killed</code> `bigint`Number of database sessions to this database that were terminated by operator intervention</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stats_reset</code> `timestamp with time zone`Time at which these statistics were last reset</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="pg_stat_database_conflicts"><a class="anchor" href="#pg_stat_database_conflicts"></a>1.2.16. <code>pg_stat_database_conflicts</code></h4>
<div class="paragraph">
<p>The <code>pg_stat_database_conflicts</code> view will contain one row per database, showing database-wide statistics about query cancels occurring due to conflicts with recovery on standby servers. This view will only contain information on standby servers, since conflicts do not occur on primary servers.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_database_conflicts</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datid</code> `oid`OID of a database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datname</code> `name`Name of this database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>confl_tablespace</code> `bigint`Number of queries in this database that have been canceled due to dropped tablespaces</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>confl_lock</code> `bigint`Number of queries in this database that have been canceled due to lock timeouts</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>confl_snapshot</code> `bigint`Number of queries in this database that have been canceled due to old snapshots</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>confl_bufferpin</code> `bigint`Number of queries in this database that have been canceled due to pinned buffers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>confl_deadlock</code> `bigint`Number of queries in this database that have been canceled due to deadlocks</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="pg_stat_all_tables"><a class="anchor" href="#pg_stat_all_tables"></a>1.2.17. <code>pg_stat_all_tables</code></h4>
<div class="paragraph">
<p>The <code>pg_stat_all_tables</code> view will contain one row for each table in the current database (including TOAST tables), showing statistics about accesses to that specific table. The <code>pg_stat_user_tables</code> and <code>pg_stat_sys_tables</code> views contain the same information, but filtered to only show user and system tables respectively.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_all_tables</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relid</code> `oid`OID of a table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>schemaname</code> `name`Name of the schema that this table is in</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relname</code> `name`Name of this table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>seq_scan</code> `bigint`Number of sequential scans initiated on this table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>seq_tup_read</code> `bigint`Number of live rows fetched by sequential scans</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>idx_scan</code> `bigint`Number of index scans initiated on this table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>idx_tup_fetch</code> `bigint`Number of live rows fetched by index scans</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>n_tup_ins</code> `bigint`Number of rows inserted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>n_tup_upd</code> `bigint`Number of rows updated (includes <a href="https://www.postgresql.org/docs/current/storage-hot.html">HOT updated rows</a>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>n_tup_del</code> `bigint`Number of rows deleted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>n_tup_hot_upd</code> `bigint`Number of rows HOT updated (i.e., with no separate index update required)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>n_live_tup</code> `bigint`Estimated number of live rows</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>n_dead_tup</code> `bigint`Estimated number of dead rows</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>n_mod_since_analyze</code> `bigint`Estimated number of rows modified since this table was last analyzed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>n_ins_since_vacuum</code> `bigint`Estimated number of rows inserted since this table was last vacuumed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>last_vacuum</code> <code>timestamp with time zone`Last time at which this table was manually vacuumed (not counting `VACUUM FULL</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>last_autovacuum</code> `timestamp with time zone`Last time at which this table was vacuumed by the autovacuum daemon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>last_analyze</code> `timestamp with time zone`Last time at which this table was manually analyzed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>last_autoanalyze</code> `timestamp with time zone`Last time at which this table was analyzed by the autovacuum daemon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vacuum_count</code> <code>bigint`Number of times this table has been manually vacuumed (not counting `VACUUM FULL</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>autovacuum_count</code> `bigint`Number of times this table has been vacuumed by the autovacuum daemon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>analyze_count</code> `bigint`Number of times this table has been manually analyzed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>autoanalyze_count</code> `bigint`Number of times this table has been analyzed by the autovacuum daemon</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="pg_stat_all_indexes"><a class="anchor" href="#pg_stat_all_indexes"></a>1.2.18. <code>pg_stat_all_indexes</code></h4>
<div class="paragraph">
<p>The <code>pg_stat_all_indexes</code> view will contain one row for each index in the current database, showing statistics about accesses to that specific index. The <code>pg_stat_user_indexes</code> and <code>pg_stat_sys_indexes</code> views contain the same information, but filtered to only show user and system indexes respectively.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_all_indexes</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relid</code> `oid`OID of the table for this index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>indexrelid</code> `oid`OID of this index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>schemaname</code> `name`Name of the schema this index is in</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relname</code> `name`Name of the table for this index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>indexrelname</code> `name`Name of this index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>idx_scan</code> `bigint`Number of index scans initiated on this index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>idx_tup_read</code> `bigint`Number of index entries returned by scans on this index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>idx_tup_fetch</code> `bigint`Number of live table rows fetched by simple index scans using this index</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Indexes can be used by simple index scans, “bitmap” index scans, and the optimizer. In a bitmap scan the output of several indexes can be combined via AND or OR rules, so it is difficult to associate individual heap row fetches with specific indexes when a bitmap scan is used. Therefore, a bitmap scan increments the <code>pg_stat_all_indexes</code>.<code>idx_tup_read</code> count(s) for the index(es) it uses, and it increments the <code>pg_stat_all_tables</code>.<code>idx_tup_fetch</code> count for the table, but it does not affect <code>pg_stat_all_indexes</code>.<code>idx_tup_fetch</code>. The optimizer also accesses indexes to check for supplied constants whose values are outside the recorded range of the optimizer statistics because the optimizer statistics might be stale.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The <code>idx_tup_read</code> and <code>idx_tup_fetch</code> counts can be different even without any use of bitmap scans, because <code>idx_tup_read</code> counts index entries retrieved from the index while <code>idx_tup_fetch</code> counts live rows fetched from the table. The latter will be less if any dead or not-yet-committed rows are fetched using the index, or if any heap fetches are avoided by means of an index-only scan.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="pg_statio_all_tables"><a class="anchor" href="#pg_statio_all_tables"></a>1.2.19. <code>pg_statio_all_tables</code></h4>
<div class="paragraph">
<p>The <code>pg_statio_all_tables</code> view will contain one row for each table in the current database (including TOAST tables), showing statistics about I/O on that specific table. The <code>pg_statio_user_tables</code> and <code>pg_statio_sys_tables</code> views contain the same information, but filtered to only show user and system tables respectively.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_statio_all_tables</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relid</code> `oid`OID of a table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>schemaname</code> `name`Name of the schema that this table is in</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relname</code> `name`Name of this table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>heap_blks_read</code> `bigint`Number of disk blocks read from this table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>heap_blks_hit</code> `bigint`Number of buffer hits in this table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>idx_blks_read</code> `bigint`Number of disk blocks read from all indexes on this table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>idx_blks_hit</code> `bigint`Number of buffer hits in all indexes on this table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>toast_blks_read</code> `bigint`Number of disk blocks read from this table&#8217;s TOAST table (if any)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>toast_blks_hit</code> `bigint`Number of buffer hits in this table&#8217;s TOAST table (if any)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tidx_blks_read</code> `bigint`Number of disk blocks read from this table&#8217;s TOAST table indexes (if any)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tidx_blks_hit</code> `bigint`Number of buffer hits in this table&#8217;s TOAST table indexes (if any)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="pg_statio_all_indexes"><a class="anchor" href="#pg_statio_all_indexes"></a>1.2.20. <code>pg_statio_all_indexes</code></h4>
<div class="paragraph">
<p>The <code>pg_statio_all_indexes</code> view will contain one row for each index in the current database, showing statistics about I/O on that specific index. The <code>pg_statio_user_indexes</code> and <code>pg_statio_sys_indexes</code> views contain the same information, but filtered to only show user and system indexes respectively.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_statio_all_indexes</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relid</code> `oid`OID of the table for this index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>indexrelid</code> `oid`OID of this index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>schemaname</code> `name`Name of the schema this index is in</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relname</code> `name`Name of the table for this index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>indexrelname</code> `name`Name of this index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>idx_blks_read</code> `bigint`Number of disk blocks read from this index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>idx_blks_hit</code> `bigint`Number of buffer hits in this index</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="pg_statio_all_sequences"><a class="anchor" href="#pg_statio_all_sequences"></a>1.2.21. <code>pg_statio_all_sequences</code></h4>
<div class="paragraph">
<p>The <code>pg_statio_all_sequences</code> view will contain one row for each sequence in the current database, showing statistics about I/O on that specific sequence.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_statio_all_sequences</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relid</code> `oid`OID of a sequence</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>schemaname</code> `name`Name of the schema this sequence is in</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relname</code> `name`Name of this sequence</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>blks_read</code> `bigint`Number of disk blocks read from this sequence</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>blks_hit</code> `bigint`Number of buffer hits in this sequence</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="pg_stat_user_functions"><a class="anchor" href="#pg_stat_user_functions"></a>1.2.22. <code>pg_stat_user_functions</code></h4>
<div class="paragraph">
<p>The <code>pg_stat_user_functions</code> view will contain one row for each tracked function, showing statistics about executions of that function. The <a href="https://www.postgresql.org/docs/current/runtime-config-statistics.html#GUC-TRACK-FUNCTIONS">track_functions</a> parameter controls exactly which functions are tracked.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_user_functions</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>funcid</code> `oid`OID of a function</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>schemaname</code> `name`Name of the schema this function is in</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>funcname</code> `name`Name of this function</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>calls</code> `bigint`Number of times this function has been called</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>total_time</code> `double precision`Total time spent in this function and all other functions called by it, in milliseconds</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>self_time</code> `double precision`Total time spent in this function itself, not including other functions called by it, in milliseconds</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="pg_stat_slru"><a class="anchor" href="#pg_stat_slru"></a>1.2.23. <code>pg_stat_slru</code></h4>
<div class="paragraph">
<p>IvorySQL accesses certain on-disk information via <strong>SLRU</strong> (simple least-recently-used) caches. The <code>pg_stat_slru</code> view will contain one row for each tracked SLRU cache, showing statistics about access to cached pages.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_slru</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code> `text`Name of the SLRU</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>blks_zeroed</code> `bigint`Number of blocks zeroed during initializations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>blks_hit</code> `bigint`Number of times disk blocks were found already in the SLRU, so that a read was not necessary (this only includes hits in the SLRU, not the operating system&#8217;s file system cache)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>blks_read</code> `bigint`Number of disk blocks read for this SLRU</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>blks_written</code> `bigint`Number of disk blocks written for this SLRU</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>blks_exists</code> `bigint`Number of blocks checked for existence for this SLRU</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>flushes</code> `bigint`Number of flushes of dirty data for this SLRU</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>truncates</code> `bigint`Number of truncates for this SLRU</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stats_reset</code> `timestamp with time zone`Time at which these statistics were last reset</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="statistics-functions"><a class="anchor" href="#statistics-functions"></a>1.2.24. Statistics Functions</h4>
<div class="paragraph">
<p>Other ways of looking at the statistics can be set up by writing queries that use the same underlying statistics access functions used by the standard views shown above. For details such as the functions' names, consult the definitions of the standard views. (For example, in psql you could issue <code>\d+ pg_stat_activity</code>.) The access functions for per-database statistics take a database OID as an argument to identify which database to report on. The per-table and per-index functions take a table or index OID. The functions for per-function statistics take a function OID. Note that only tables, indexes, and functions in the current database can be seen with these functions.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Additional Statistics Functions</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FunctionDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_backend_pid</code> () → `integer`Returns the process ID of the server process attached to the current session.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_get_activity</code> ( <code>integer</code> ) → <code>setof record`Returns a record of information about the backend with the specified process ID, or one record for each active backend in the system if `NULL</code> is specified. The fields returned are a subset of those in the <code>pg_stat_activity</code> view.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_get_snapshot_timestamp</code> () → <code>timestamp with time zone`Returns the timestamp of the current statistics snapshot, or NULL if no statistics snapshot has been taken. A snapshot is taken the first time cumulative statistics are accessed in a transaction if `stats_fetch_consistency</code> is set to <code>snapshot</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_clear_snapshot</code> () → `void`Discards the current statistics snapshot or cached information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_reset</code> () → `void`Resets all statistics counters for the current database to zero.This function is restricted to superusers by default, but other users can be granted EXECUTE to run the function.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_reset_shared</code> ( <code>text</code> ) → <code>void`Resets some cluster-wide statistics counters to zero, depending on the argument. The argument can be `bgwriter</code> to reset all the counters shown in the <code>pg_stat_bgwriter</code> view, <code>archiver</code> to reset all the counters shown in the <code>pg_stat_archiver</code> view, <code>wal</code> to reset all the counters shown in the <code>pg_stat_wal</code> view or <code>recovery_prefetch</code> to reset all the counters shown in the <code>pg_stat_recovery_prefetch</code> view.This function is restricted to superusers by default, but other users can be granted EXECUTE to run the function.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_reset_single_table_counters</code> ( <code>oid</code> ) → `void`Resets statistics for a single table or index in the current database or shared across all databases in the cluster to zero.This function is restricted to superusers by default, but other users can be granted EXECUTE to run the function.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_reset_single_function_counters</code> ( <code>oid</code> ) → `void`Resets statistics for a single function in the current database to zero.This function is restricted to superusers by default, but other users can be granted EXECUTE to run the function.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_reset_slru</code> ( <code>text</code> ) → <code>void`Resets statistics to zero for a single SLRU cache, or for all SLRUs in the cluster. If the argument is NULL, all counters shown in the `pg_stat_slru</code> view for all SLRU caches are reset. The argument can be one of <code>CommitTs</code>, <code>MultiXactMember</code>, <code>MultiXactOffset</code>, <code>Notify</code>, <code>Serial</code>, <code>Subtrans</code>, or <code>Xact</code> to reset the counters for only that entry. If the argument is <code>other</code> (or indeed, any unrecognized name), then the counters for all other SLRU caches, such as extension-defined caches, are reset.This function is restricted to superusers by default, but other users can be granted EXECUTE to run the function.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_reset_replication_slot</code> ( <code>text</code> ) → <code>void`Resets statistics of the replication slot defined by the argument. If the argument is `NULL</code>, resets statistics for all the replication slots.This function is restricted to superusers by default, but other users can be granted EXECUTE to run the function.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_reset_subscription_stats</code> ( <code>oid</code> ) → <code>void`Resets statistics for a single subscription shown in the `pg_stat_subscription_stats</code> view to zero. If the argument is <code>NULL</code>, reset statistics for all subscriptions.This function is restricted to superusers by default, but other users can be granted EXECUTE to run the function.</p></td>
</tr>
</tbody>
</table>
<div class="sidebarblock">
<div class="content">
<div class="title">Warning</div>
<div class="paragraph">
<p>Using <code>pg_stat_reset()</code> also resets counters that autovacuum uses to determine when to trigger a vacuum or an analyze. Resetting these counters can cause autovacuum to not perform necessary work, which can cause problems such as table bloat or out-dated table statistics. A database-wide <code>ANALYZE</code> is recommended after the statistics have been reset.</p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>pg_stat_get_activity</code>, the underlying function of the <code>pg_stat_activity</code> view, returns a set of records containing all the available information about each backend process. Sometimes it may be more convenient to obtain just a subset of this information. In such cases, an older set of per-backend statistics access functions can be used; These access functions use a backend ID number, which ranges from one to the number of currently active backends. The function <code>pg_stat_get_backend_idset</code> provides a convenient way to generate one row for each active backend for invoking these functions. For example, to show the PIDs and current queries of all backends:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">SELECT pg_stat_get_backend_pid(s.backendid) AS pid,
       pg_stat_get_backend_activity(s.backendid) AS query
    FROM (SELECT pg_stat_get_backend_idset() AS backendid) AS s;</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Per-Backend Statistics Functions</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FunctionDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_get_backend_idset</code> () → `setof integer`Returns the set of currently active backend ID numbers (from 1 to the number of active backends).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_get_backend_activity</code> ( <code>integer</code> ) → `text`Returns the text of this backend&#8217;s most recent query.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_get_backend_activity_start</code> ( <code>integer</code> ) → `timestamp with time zone`Returns the time when the backend&#8217;s most recent query was started.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_get_backend_client_addr</code> ( <code>integer</code> ) → `inet`Returns the IP address of the client connected to this backend.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_get_backend_client_port</code> ( <code>integer</code> ) → `integer`Returns the TCP port number that the client is using for communication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_get_backend_dbid</code> ( <code>integer</code> ) → `oid`Returns the OID of the database this backend is connected to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_get_backend_pid</code> ( <code>integer</code> ) → `integer`Returns the process ID of this backend.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_get_backend_start</code> ( <code>integer</code> ) → `timestamp with time zone`Returns the time when this process was started.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_get_backend_userid</code> ( <code>integer</code> ) → `oid`Returns the OID of the user logged into this backend.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_get_backend_wait_event_type</code> ( <code>integer</code> ) → `text`Returns the wait event type name if this backend is currently waiting, otherwise NULL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_get_backend_wait_event</code> ( <code>integer</code> ) → `text`Returns the wait event name if this backend is currently waiting, otherwise NULL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pg_stat_get_backend_xact_start</code> ( <code>integer</code> ) → `timestamp with time zone`Returns the time when the backend&#8217;s current transaction was started.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="view-locks"><a class="anchor" href="#view-locks"></a>1.3. View Locks</h3>
<div class="ulist">
<ul>
<li>
<p>Another useful tool for monitoring database activity is the <code>pg_locks</code> system table. It allows the database administrator to view information about the outstanding locks in the lock manager. For example, this capability can be used to:</p>
<div class="ulist">
<ul>
<li>
<p>View all the locks currently outstanding, all the locks on relations in a particular database, all the locks on a particular relation, or all the locks held by a particular IvorySQL session.</p>
</li>
<li>
<p>Determine the relation in the current database with the most ungranted locks (which might be a source of contention among database clients).</p>
</li>
<li>
<p>Determine the effect of lock contention on overall database performance, as well as the extent to which contention varies with overall database traffic.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="progress-reporting"><a class="anchor" href="#progress-reporting"></a>1.4. Progress Reporting</h3>
<div class="paragraph">
<p>IvorySQL has the ability to report the progress of certain commands during command execution. Currently, the only commands which support progress reporting are <code>ANALYZE</code>, <code>CLUSTER</code>, <code>CREATE INDEX</code>, <code>VACUUM</code>, <code>COPY</code>, and <a href="https://www.postgresql.org/docs/current/protocol-replication.html#PROTOCOL-REPLICATION-BASE-BACKUP">BASE_BACKUP</a> (i.e., replication command that <a href="https://www.postgresql.org/docs/current/app-pgbasebackup.html">pg_basebackup</a> issues to take a base backup). This may be expanded in the future.</p>
</div>
<div class="sect3">
<h4 id="analyze-progress-reporting"><a class="anchor" href="#analyze-progress-reporting"></a>1.4.1. ANALYZE Progress Reporting</h4>
<div class="paragraph">
<p>Whenever <code>ANALYZE</code> is running, the <code>pg_stat_progress_analyze</code> view will contain a row for each backend that is currently running that command. The tables below describe the information that will be reported and provide information about how to interpret it.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_progress_analyze</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pid</code> `integer`Process ID of backend.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datid</code> `oid`OID of the database to which this backend is connected.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datname</code> `name`Name of the database to which this backend is connected.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relid</code> `oid`OID of the table being analyzed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>phase</code> `text`Current processing phase. See <a href="https://www.postgresql.org/docs/current/progress-reporting.html#ANALYZE-PHASES">Table 1.37</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sample_blks_total</code> `bigint`Total number of heap blocks that will be sampled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sample_blks_scanned</code> `bigint`Number of heap blocks scanned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ext_stats_total</code> `bigint`Number of extended statistics.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ext_stats_computed</code> <code>bigint`Number of extended statistics computed. This counter only advances when the phase is `computing extended statistics</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>child_tables_total</code> `bigint`Number of child tables.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>child_tables_done</code> <code>bigint`Number of child tables scanned. This counter only advances when the phase is `acquiring inherited sample rows</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>current_child_table_relid</code> <code>oid`OID of the child table currently being scanned. This field is only valid when the phase is `acquiring inherited sample rows</code>.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>ANALYZE Phases</strong></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Phase</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>initializing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command is preparing to begin scanning the heap. This phase is expected to be very brief.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>acquiring sample rows</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command is currently scanning the table given by <code>relid</code> to obtain sample rows.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>acquiring inherited sample rows</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command is currently scanning child tables to obtain sample rows. Columns <code>child_tables_total</code>, <code>child_tables_done</code>, and <code>current_child_table_relid</code> contain the progress information for this phase.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>computing statistics</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command is computing statistics from the sample rows obtained during the table scan.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>computing extended statistics</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command is computing extended statistics from the sample rows obtained during the table scan.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>finalizing analyze</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command is updating <code>pg_class</code>. When this phase is completed, <code>ANALYZE</code> will end.</p></td>
</tr>
</tbody>
</table>
<div class="sidebarblock">
<div class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Note that when <code>ANALYZE</code> is run on a partitioned table, all of its partitions are also recursively analyzed. In that case, <code>ANALYZE</code> progress is reported first for the parent table, whereby its inheritance statistics are collected, followed by that for each partition.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="create-index-progress-reporting"><a class="anchor" href="#create-index-progress-reporting"></a>1.4.2. CREATE INDEX Progress Reporting</h4>
<div class="paragraph">
<p>Whenever <code>CREATE INDEX</code> or <code>REINDEX</code> is running, the <code>pg_stat_progress_create_index</code> view will contain one row for each backend that is currently creating indexes. The tables below describe the information that will be reported and provide information about how to interpret it.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_progress_create_index</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pid</code> `integer`Process ID of backend.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datid</code> `oid`OID of the database to which this backend is connected.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datname</code> `name`Name of the database to which this backend is connected.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relid</code> `oid`OID of the table on which the index is being created.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>index_relid</code> <code>oid`OID of the index being created or reindexed. During a non-concurrent `CREATE INDEX</code>, this is 0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>command</code> <code>text`The command that is running: `CREATE INDEX</code>, <code>CREATE INDEX CONCURRENTLY</code>, <code>REINDEX</code>, or <code>REINDEX CONCURRENTLY</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>phase</code> `text`Current processing phase of index creation. See <a href="https://www.postgresql.org/docs/current/progress-reporting.html#CREATE-INDEX-PHASES">Table 1.39</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lockers_total</code> `bigint`Total number of lockers to wait for, when applicable.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lockers_done</code> `bigint`Number of lockers already waited for.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>current_locker_pid</code> `bigint`Process ID of the locker currently being waited for.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>blocks_total</code> `bigint`Total number of blocks to be processed in the current phase.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>blocks_done</code> `bigint`Number of blocks already processed in the current phase.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuples_total</code> `bigint`Total number of tuples to be processed in the current phase.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuples_done</code> `bigint`Number of tuples already processed in the current phase.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>partitions_total</code> <code>bigint`When creating an index on a partitioned table, this column is set to the total number of partitions on which the index is to be created. This field is `0</code> during a <code>REINDEX</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>partitions_done</code> <code>bigint`When creating an index on a partitioned table, this column is set to the number of partitions on which the index has been created. This field is `0</code> during a <code>REINDEX</code>.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>CREATE INDEX Phases</strong></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Phase</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>initializing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CREATE INDEX</code> or <code>REINDEX</code> is preparing to create the index. This phase is expected to be very brief.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>waiting for writers before build</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CREATE INDEX CONCURRENTLY</code> or <code>REINDEX CONCURRENTLY</code> is waiting for transactions with write locks that can potentially see the table to finish. This phase is skipped when not in concurrent mode. Columns <code>lockers_total</code>, <code>lockers_done</code> and <code>current_locker_pid</code> contain the progress information for this phase.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>building index</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The index is being built by the access method-specific code. In this phase, access methods that support progress reporting fill in their own progress data, and the subphase is indicated in this column. Typically, <code>blocks_total</code> and <code>blocks_done</code> will contain progress data, as well as potentially <code>tuples_total</code> and <code>tuples_done</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>waiting for writers before validation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CREATE INDEX CONCURRENTLY</code> or <code>REINDEX CONCURRENTLY</code> is waiting for transactions with write locks that can potentially write into the table to finish. This phase is skipped when not in concurrent mode. Columns <code>lockers_total</code>, <code>lockers_done</code> and <code>current_locker_pid</code> contain the progress information for this phase.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>index validation: scanning index</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CREATE INDEX CONCURRENTLY</code> is scanning the index searching for tuples that need to be validated. This phase is skipped when not in concurrent mode. Columns <code>blocks_total</code> (set to the total size of the index) and <code>blocks_done</code> contain the progress information for this phase.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>index validation: sorting tuples</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CREATE INDEX CONCURRENTLY</code> is sorting the output of the index scanning phase.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>index validation: scanning table</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CREATE INDEX CONCURRENTLY</code> is scanning the table to validate the index tuples collected in the previous two phases. This phase is skipped when not in concurrent mode. Columns <code>blocks_total</code> (set to the total size of the table) and <code>blocks_done</code> contain the progress information for this phase.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>waiting for old snapshots</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CREATE INDEX CONCURRENTLY</code> or <code>REINDEX CONCURRENTLY</code> is waiting for transactions that can potentially see the table to release their snapshots. This phase is skipped when not in concurrent mode. Columns <code>lockers_total</code>, <code>lockers_done</code> and <code>current_locker_pid</code> contain the progress information for this phase.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>waiting for readers before marking dead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REINDEX CONCURRENTLY</code> is waiting for transactions with read locks on the table to finish, before marking the old index dead. This phase is skipped when not in concurrent mode. Columns <code>lockers_total</code>, <code>lockers_done</code> and <code>current_locker_pid</code> contain the progress information for this phase.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>waiting for readers before dropping</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REINDEX CONCURRENTLY</code> is waiting for transactions with read locks on the table to finish, before dropping the old index. This phase is skipped when not in concurrent mode. Columns <code>lockers_total</code>, <code>lockers_done</code> and <code>current_locker_pid</code> contain the progress information for this phase.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="vacuum-progress-reporting"><a class="anchor" href="#vacuum-progress-reporting"></a>1.4.3. VACUUM Progress Reporting</h4>
<div class="paragraph">
<p>Whenever <code>VACUUM</code> is running, the <code>pg_stat_progress_vacuum</code> view will contain one row for each backend (including autovacuum worker processes) that is currently vacuuming. The tables below describe the information that will be reported and provide information about how to interpret it. Progress for <code>VACUUM FULL</code> commands is reported via <code>pg_stat_progress_cluster</code> because both <code>VACUUM FULL</code> and <code>CLUSTER</code> rewrite the table, while regular <code>VACUUM</code> only modifies it in place.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_progress_vacuum</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pid</code> `integer`Process ID of backend.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datid</code> `oid`OID of the database to which this backend is connected.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datname</code> `name`Name of the database to which this backend is connected.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relid</code> `oid`OID of the table being vacuumed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>phase</code> `text`Current processing phase of vacuum.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>heap_blks_total</code> <code>bigint`Total number of heap blocks in the table. This number is reported as of the beginning of the scan; blocks added later will not be (and need not be) visited by this `VACUUM</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>heap_blks_scanned</code> <code>bigint`Number of heap blocks scanned. Because the <a href="https://www.postgresql.org/docs/current/storage-vm.html">visibility map</a> is used to optimize scans, some blocks will be skipped without inspection; skipped blocks are included in this total, so that this number will eventually become equal to `heap_blks_total</code> when the vacuum is complete. This counter only advances when the phase is <code>scanning heap</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>heap_blks_vacuumed</code> <code>bigint`Number of heap blocks vacuumed. Unless the table has no indexes, this counter only advances when the phase is `vacuuming heap</code>. Blocks that contain no dead tuples are skipped, so the counter may sometimes skip forward in large increments.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>index_vacuum_count</code> `bigint`Number of completed index vacuum cycles.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_dead_tuples</code> `bigint`Number of dead tuples that we can store before needing to perform an index vacuum cycle, based on <a href="https://www.postgresql.org/docs/current/runtime-config-resource.html#GUC-MAINTENANCE-WORK-MEM">maintenance_work_mem</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>num_dead_tuples</code> `bigint`Number of dead tuples collected since the last index vacuum cycle.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>VACUUM Phases</strong></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Phase</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>initializing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VACUUM</code> is preparing to begin scanning the heap. This phase is expected to be very brief.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanning heap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VACUUM</code> is currently scanning the heap. It will prune and defragment each page if required, and possibly perform freezing activity. The <code>heap_blks_scanned</code> column can be used to monitor the progress of the scan.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vacuuming indexes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VACUUM</code> is currently vacuuming the indexes. If a table has any indexes, this will happen at least once per vacuum, after the heap has been completely scanned. It may happen multiple times per vacuum if <a href="https://www.postgresql.org/docs/current/runtime-config-resource.html#GUC-MAINTENANCE-WORK-MEM">maintenance_work_mem</a> (or, in the case of autovacuum, <a href="https://www.postgresql.org/docs/current/runtime-config-resource.html#GUC-AUTOVACUUM-WORK-MEM">autovacuum_work_mem</a> if set) is insufficient to store the number of dead tuples found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vacuuming heap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VACUUM</code> is currently vacuuming the heap. Vacuuming the heap is distinct from scanning the heap, and occurs after each instance of vacuuming indexes. If <code>heap_blks_scanned</code> is less than <code>heap_blks_total</code>, the system will return to scanning the heap after this phase is completed; otherwise, it will begin cleaning up indexes after this phase is completed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cleaning up indexes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VACUUM</code> is currently cleaning up indexes. This occurs after the heap has been completely scanned and all vacuuming of the indexes and the heap has been completed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>truncating heap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VACUUM</code> is currently truncating the heap so as to return empty pages at the end of the relation to the operating system. This occurs after cleaning up indexes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>performing final cleanup</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VACUUM</code> is performing final cleanup. During this phase, <code>VACUUM</code> will vacuum the free space map, update statistics in <code>pg_class</code>, and report statistics to the cumulative statistics system. When this phase is completed, <code>VACUUM</code> will end.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="cluster-progress-reporting"><a class="anchor" href="#cluster-progress-reporting"></a>1.4.4. CLUSTER Progress Reporting</h4>
<div class="paragraph">
<p>Whenever <code>CLUSTER</code> or <code>VACUUM FULL</code> is running, the <code>pg_stat_progress_cluster</code> view will contain a row for each backend that is currently running either command. The tables below describe the information that will be reported and provide information about how to interpret it.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_progress_cluster</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescriptio</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pid</code> `integer`Process ID of backend.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datid</code> `oid`OID of the database to which this backend is connected.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datname</code> `name`Name of the database to which this backend is connected.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relid</code> `oid`OID of the table being clustered.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>command</code> <code>text`The command that is running. Either `CLUSTER</code> or <code>VACUUM FULL</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>phase</code> `text`Current processing phase. See <a href="https://www.postgresql.org/docs/current/progress-reporting.html#CLUSTER-PHASES">Table 1.43</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cluster_index_relid</code> `oid`If the table is being scanned using an index, this is the OID of the index being used; otherwise, it is zero.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>heap_tuples_scanned</code> <code>bigint`Number of heap tuples scanned. This counter only advances when the phase is `seq scanning heap</code>, <code>index scanning heap</code> or <code>writing new heap</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>heap_tuples_written</code> <code>bigint`Number of heap tuples written. This counter only advances when the phase is `seq scanning heap</code>, <code>index scanning heap</code> or <code>writing new heap</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>heap_blks_total</code> <code>bigint`Total number of heap blocks in the table. This number is reported as of the beginning of `seq scanning heap</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>heap_blks_scanned</code> <code>bigint`Number of heap blocks scanned. This counter only advances when the phase is `seq scanning heap</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>index_rebuild_count</code> <code>bigint`Number of indexes rebuilt. This counter only advances when the phase is `rebuilding index</code>.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>CLUSTER and VACUUM FULL Phases</strong></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Phase</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>initializing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command is preparing to begin scanning the heap. This phase is expected to be very brief.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>seq scanning heap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command is currently scanning the table using a sequential scan.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>index scanning heap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CLUSTER</code> is currently scanning the table using an index scan.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sorting tuples</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CLUSTER</code> is currently sorting tuples.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>writing new heap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CLUSTER</code> is currently writing the new heap.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>swapping relation files</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command is currently swapping newly-built files into place.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rebuilding index</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command is currently rebuilding an index.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>performing final cleanup</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command is performing final cleanup. When this phase is completed, <code>CLUSTER</code> or <code>VACUUM FULL</code> will end.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="base-backup-progress-reporting"><a class="anchor" href="#base-backup-progress-reporting"></a>1.4.5. Base Backup Progress Reporting</h4>
<div class="paragraph">
<p>Whenever an application like pg_basebackup is taking a base backup, the <code>pg_stat_progress_basebackup</code> view will contain a row for each WAL sender process that is currently running the <code>BASE_BACKUP</code> replication command and streaming the backup. The tables below describe the information that will be reported and provide information about how to interpret it.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_progress_basebackup</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pid</code> `integer`Process ID of a WAL sender process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>phase</code> `text`Current processing phase.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backup_total</code> <code>bigint`Total amount of data that will be streamed. This is estimated and reported as of the beginning of `streaming database files</code> phase. Note that this is only an approximation since the database may change during <code>streaming database files</code> phase and WAL log may be included in the backup later. This is always the same value as <code>backup_streamed</code> once the amount of data streamed exceeds the estimated total size. If the estimation is disabled in pg_basebackup (i.e., <code>--no-estimate-size</code> option is specified), this is <code>NULL</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backup_streamed</code> <code>bigint`Amount of data streamed. This counter only advances when the phase is `streaming database files</code> or <code>transferring wal files</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tablespaces_total</code> `bigint`Total number of tablespaces that will be streamed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tablespaces_streamed</code> <code>bigint`Number of tablespaces streamed. This counter only advances when the phase is `streaming database files</code>.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Base Backup Phases</strong></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Phase</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>initializing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The WAL sender process is preparing to begin the backup. This phase is expected to be very brief.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>waiting for checkpoint to finish</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The WAL sender process is currently performing <code>pg_backup_start</code> to prepare to take a base backup, and waiting for the start-of-backup checkpoint to finish.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>estimating backup size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The WAL sender process is currently estimating the total amount of database files that will be streamed as a base backup.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streaming database files</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The WAL sender process is currently streaming database files as a base backup.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>waiting for wal archiving to finish</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The WAL sender process is currently performing <code>pg_backup_stop</code> to finish the backup, and waiting for all the WAL files required for the base backup to be successfully archived. If either <code>--wal-method=none</code> or <code>--wal-method=stream</code> is specified in pg_basebackup, the backup will end when this phase is completed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transferring wal files</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The WAL sender process is currently transferring all WAL logs generated during the backup. This phase occurs after <code>waiting for wal archiving to finish</code> phase if <code>--wal-method=fetch</code> is specified in pg_basebackup. The backup will end when this phase is completed.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="copy-progress-reporting"><a class="anchor" href="#copy-progress-reporting"></a>1.4.6. COPY Progress Reporting</h4>
<div class="paragraph">
<p>Whenever <code>COPY</code> is running, the <code>pg_stat_progress_copy</code> view will contain one row for each backend that is currently running a <code>COPY</code> command. The table below describes the information that will be reported and provides information about how to interpret it.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong><code>pg_stat_progress_copy</code> View</strong></caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column TypeDescription</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pid</code> `integer`Process ID of backend.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datid</code> `oid`OID of the database to which this backend is connected.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datname</code> `name`Name of the database to which this backend is connected.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relid</code> <code>oid`OID of the table on which the `COPY</code> command is executed. It is set to <code>0</code> if copying from a <code>SELECT</code> query.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>command</code> <code>text`The command that is running: `COPY FROM</code>, or <code>COPY TO</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code> <code>text`The io type that the data is read from or written to: `FILE</code>, <code>PROGRAM</code>, <code>PIPE</code> (for <code>COPY FROM STDIN</code> and <code>COPY TO STDOUT</code>), or <code>CALLBACK</code> (used for example during the initial table synchronization in logical replication).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bytes_processed</code> <code>bigint`Number of bytes already processed by `COPY</code> command.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bytes_total</code> <code>bigint`Size of source file for `COPY FROM</code> command in bytes. It is set to <code>0</code> if not available.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuples_processed</code> <code>bigint`Number of tuples already processed by `COPY</code> command.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuples_excluded</code> <code>bigint`Number of tuples not processed because they were excluded by the `WHERE</code> clause of the <code>COPY</code> command.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="dynamic-tracing"><a class="anchor" href="#dynamic-tracing"></a>1.5. Dynamic Tracing</h3>
<div class="paragraph">
<p>IvorySQL provides facilities to support dynamic tracing of the database server. This allows an external utility to be called at specific points in the code and thereby trace execution.</p>
</div>
<div class="paragraph">
<p>A number of probes or trace points are already inserted into the source code. These probes are intended to be used by database developers and administrators. By default the probes are not compiled into IvorySQL; the user needs to explicitly tell the configure script to make the probes available.</p>
</div>
<div class="paragraph">
<p>Currently, the <a href="https://en.wikipedia.org/wiki/DTrace">DTrace</a> utility is supported, which, at the time of this writing, is available on Solaris, macOS, FreeBSD, NetBSD, and Oracle Linux. The <a href="https://sourceware.org/systemtap/">SystemTap</a> project for Linux provides a DTrace equivalent and can also be used. Supporting other dynamic tracing utilities is theoretically possible by changing the definitions for the macros in <code>src/include/utils/probes.h</code>.</p>
</div>
<div class="sect3">
<h4 id="compiling-for-dynamic-tracing"><a class="anchor" href="#compiling-for-dynamic-tracing"></a>1.5.1. Compiling for Dynamic Tracing</h4>
<div class="paragraph">
<p>By default, probes are not available, so you will need to explicitly tell the configure script to make the probes available in IvorySQL. To include DTrace support specify <code>--enable-dtrace</code> to configure.</p>
</div>
</div>
<div class="sect3">
<h4 id="built-in-probes"><a class="anchor" href="#built-in-probes"></a>1.5.2. Built-in Probes</h4>
<div class="paragraph">
<p>A number of standard probes are provided in the source code,  More probes can certainly be added to enhance IvorySQL&#8217;s observability.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Built-in DTrace Probes</strong></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transaction-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(LocalTransactionId)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires at the start of a new transaction. arg0 is the transaction ID.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transaction-commit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(LocalTransactionId)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a transaction completes successfully. arg0 is the transaction ID.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transaction-abort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(LocalTransactionId)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a transaction completes unsuccessfully. arg0 is the transaction ID.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>query-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(const char *)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when the processing of a query is started. arg0 is the query string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>query-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(const char *)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when the processing of a query is complete. arg0 is the query string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>query-parse-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(const char *)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when the parsing of a query is started. arg0 is the query string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>query-parse-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(const char *)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when the parsing of a query is complete. arg0 is the query string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>query-rewrite-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(const char *)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when the rewriting of a query is started. arg0 is the query string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>query-rewrite-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(const char *)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when the rewriting of a query is complete. arg0 is the query string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>query-plan-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when the planning of a query is started.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>query-plan-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when the planning of a query is complete.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>query-execute-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when the execution of a query is started.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>query-execute-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when the execution of a query is complete.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>statement-status</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(const char *)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires anytime the server process updates its <code>pg_stat_activity</code>.<code>status</code>. arg0 is the new status string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checkpoint-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(int)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a checkpoint is started. arg0 holds the bitwise flags used to distinguish different checkpoint types, such as shutdown, immediate or force.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checkpoint-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(int, int, int, int, int)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a checkpoint is complete. (The probes listed next fire in sequence during checkpoint processing.) arg0 is the number of buffers written. arg1 is the total number of buffers. arg2, arg3 and arg4 contain the number of WAL files added, removed and recycled respectively.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clog-checkpoint-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(bool)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when the CLOG portion of a checkpoint is started. arg0 is true for normal checkpoint, false for shutdown checkpoint.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clog-checkpoint-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(bool)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when the CLOG portion of a checkpoint is complete. arg0 has the same meaning as for <code>clog-checkpoint-start</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>subtrans-checkpoint-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(bool)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when the SUBTRANS portion of a checkpoint is started. arg0 is true for normal checkpoint, false for shutdown checkpoint.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>subtrans-checkpoint-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(bool)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when the SUBTRANS portion of a checkpoint is complete. arg0 has the same meaning as for <code>subtrans-checkpoint-start</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>multixact-checkpoint-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(bool)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when the MultiXact portion of a checkpoint is started. arg0 is true for normal checkpoint, false for shutdown checkpoint.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>multixact-checkpoint-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(bool)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when the MultiXact portion of a checkpoint is complete. arg0 has the same meaning as for <code>multixact-checkpoint-start</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buffer-checkpoint-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(int)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when the buffer-writing portion of a checkpoint is started. arg0 holds the bitwise flags used to distinguish different checkpoint types, such as shutdown, immediate or force.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buffer-sync-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(int, int)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when we begin to write dirty buffers during checkpoint (after identifying which buffers must be written). arg0 is the total number of buffers. arg1 is the number that are currently dirty and need to be written.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buffer-sync-written</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(int)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires after each buffer is written during checkpoint. arg0 is the ID number of the buffer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buffer-sync-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(int, int, int)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when all dirty buffers have been written. arg0 is the total number of buffers. arg1 is the number of buffers actually written by the checkpoint process. arg2 is the number that were expected to be written (arg1 of <code>buffer-sync-start</code>); any difference reflects other processes flushing buffers during the checkpoint.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buffer-checkpoint-sync-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires after dirty buffers have been written to the kernel, and before starting to issue fsync requests.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buffer-checkpoint-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when syncing of buffers to disk is complete.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>twophase-checkpoint-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when the two-phase portion of a checkpoint is started.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>twophase-checkpoint-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when the two-phase portion of a checkpoint is complete.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buffer-read-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(ForkNumber, BlockNumber, Oid, Oid, Oid, int, bool)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a buffer read is started. arg0 and arg1 contain the fork and block numbers of the page (but arg1 will be -1 if this is a relation extension request). arg2, arg3, and arg4 contain the tablespace, database, and relation OIDs identifying the relation. arg5 is the ID of the backend which created the temporary relation for a local buffer, or <code>InvalidBackendId</code> (-1) for a shared buffer. arg6 is true for a relation extension request, false for normal read.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buffer-read-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(ForkNumber, BlockNumber, Oid, Oid, Oid, int, bool, bool)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a buffer read is complete. arg0 and arg1 contain the fork and block numbers of the page (if this is a relation extension request, arg1 now contains the block number of the newly added block). arg2, arg3, and arg4 contain the tablespace, database, and relation OIDs identifying the relation. arg5 is the ID of the backend which created the temporary relation for a local buffer, or <code>InvalidBackendId</code> (-1) for a shared buffer. arg6 is true for a relation extension request, false for normal read. arg7 is true if the buffer was found in the pool, false if not.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buffer-flush-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(ForkNumber, BlockNumber, Oid, Oid, Oid)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires before issuing any write request for a shared buffer. arg0 and arg1 contain the fork and block numbers of the page. arg2, arg3, and arg4 contain the tablespace, database, and relation OIDs identifying the relation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buffer-flush-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(ForkNumber, BlockNumber, Oid, Oid, Oid)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a write request is complete. (Note that this just reflects the time to pass the data to the kernel; it&#8217;s typically not actually been written to disk yet.) The arguments are the same as for <code>buffer-flush-start</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buffer-write-dirty-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(ForkNumber, BlockNumber, Oid, Oid, Oid)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a server process begins to write a dirty buffer. (If this happens often, it implies that <a href="https://www.postgresql.org/docs/current/runtime-config-resource.html#GUC-SHARED-BUFFERS">shared_buffers</a> is too small or the background writer control parameters need adjustment.) arg0 and arg1 contain the fork and block numbers of the page. arg2, arg3, and arg4 contain the tablespace, database, and relation OIDs identifying the relation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buffer-write-dirty-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(ForkNumber, BlockNumber, Oid, Oid, Oid)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a dirty-buffer write is complete. The arguments are the same as for <code>buffer-write-dirty-start</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wal-buffer-write-dirty-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a server process begins to write a dirty WAL buffer because no more WAL buffer space is available. (If this happens often, it implies that <a href="https://www.postgresql.org/docs/current/runtime-config-wal.html#GUC-WAL-BUFFERS">wal_buffers</a> is too small.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wal-buffer-write-dirty-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a dirty WAL buffer write is complete.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wal-insert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(unsigned char, unsigned char)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a WAL record is inserted. arg0 is the resource manager (rmid) for the record. arg1 contains the info flags.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wal-switch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a WAL segment switch is requested.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>smgr-md-read-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(ForkNumber, BlockNumber, Oid, Oid, Oid, int)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when beginning to read a block from a relation. arg0 and arg1 contain the fork and block numbers of the page. arg2, arg3, and arg4 contain the tablespace, database, and relation OIDs identifying the relation. arg5 is the ID of the backend which created the temporary relation for a local buffer, or <code>InvalidBackendId</code> (-1) for a shared buffer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>smgr-md-read-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(ForkNumber, BlockNumber, Oid, Oid, Oid, int, int, int)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a block read is complete. arg0 and arg1 contain the fork and block numbers of the page. arg2, arg3, and arg4 contain the tablespace, database, and relation OIDs identifying the relation. arg5 is the ID of the backend which created the temporary relation for a local buffer, or <code>InvalidBackendId</code> (-1) for a shared buffer. arg6 is the number of bytes actually read, while arg7 is the number requested (if these are different it indicates trouble).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>smgr-md-write-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(ForkNumber, BlockNumber, Oid, Oid, Oid, int)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when beginning to write a block to a relation. arg0 and arg1 contain the fork and block numbers of the page. arg2, arg3, and arg4 contain the tablespace, database, and relation OIDs identifying the relation. arg5 is the ID of the backend which created the temporary relation for a local buffer, or <code>InvalidBackendId</code> (-1) for a shared buffer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>smgr-md-write-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(ForkNumber, BlockNumber, Oid, Oid, Oid, int, int, int)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a block write is complete. arg0 and arg1 contain the fork and block numbers of the page. arg2, arg3, and arg4 contain the tablespace, database, and relation OIDs identifying the relation. arg5 is the ID of the backend which created the temporary relation for a local buffer, or <code>InvalidBackendId</code> (-1) for a shared buffer. arg6 is the number of bytes actually written, while arg7 is the number requested (if these are different it indicates trouble).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sort-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(int, bool, int, int, bool, int)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a sort operation is started. arg0 indicates heap, index or datum sort. arg1 is true for unique-value enforcement. arg2 is the number of key columns. arg3 is the number of kilobytes of work memory allowed. arg4 is true if random access to the sort result is required. arg5 indicates serial when <code>0</code>, parallel worker when <code>1</code>, or parallel leader when <code>2</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sort-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(bool, long)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a sort is complete. arg0 is true for external sort, false for internal sort. arg1 is the number of disk blocks used for an external sort, or kilobytes of memory used for an internal sort.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lwlock-acquire</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(char *, LWLockMode)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when an LWLock has been acquired. arg0 is the LWLock&#8217;s tranche. arg1 is the requested lock mode, either exclusive or shared.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lwlock-release</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(char *)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when an LWLock has been released (but note that any released waiters have not yet been awakened). arg0 is the LWLock&#8217;s tranche.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lwlock-wait-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(char *, LWLockMode)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when an LWLock was not immediately available and a server process has begun to wait for the lock to become available. arg0 is the LWLock&#8217;s tranche. arg1 is the requested lock mode, either exclusive or shared.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lwlock-wait-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(char *, LWLockMode)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a server process has been released from its wait for an LWLock (it does not actually have the lock yet). arg0 is the LWLock&#8217;s tranche. arg1 is the requested lock mode, either exclusive or shared.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lwlock-condacquire</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(char *, LWLockMode)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when an LWLock was successfully acquired when the caller specified no waiting. arg0 is the LWLock&#8217;s tranche. arg1 is the requested lock mode, either exclusive or shared.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lwlock-condacquire-fail</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(char *, LWLockMode)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when an LWLock was not successfully acquired when the caller specified no waiting. arg0 is the LWLock&#8217;s tranche. arg1 is the requested lock mode, either exclusive or shared.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lock-wait-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(unsigned int, unsigned int, unsigned int, unsigned int, unsigned int, LOCKMODE)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a request for a heavyweight lock (lmgr lock) has begun to wait because the lock is not available. arg0 through arg3 are the tag fields identifying the object being locked. arg4 indicates the type of object being locked. arg5 indicates the lock type being requested.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lock-wait-done</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(unsigned int, unsigned int, unsigned int, unsigned int, unsigned int, LOCKMODE)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a request for a heavyweight lock (lmgr lock) has finished waiting (i.e., has acquired the lock). The arguments are the same as for <code>lock-wait-start</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deadlock-found</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Probe that fires when a deadlock is found by the deadlock detector.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Defined Types Used in Probe Parameters</strong></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LocalTransactionId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>unsigned int</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LWLockMode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LOCKMODE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BlockNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>unsigned int</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Oid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>unsigned int</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ForkNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>unsigned char</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="using-probes"><a class="anchor" href="#using-probes"></a>1.5.3. Using Probes</h4>
<div class="paragraph">
<p>The example below shows a DTrace script for analyzing transaction counts in the system, as an alternative to snapshotting <code>pg_stat_database</code> before and after a performance test:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">#!/usr/sbin/dtrace -qs

postgresql$1:::transaction-start
{
      @start["Start"] = count();
      self-&gt;ts  = timestamp;
}

postgresql$1:::transaction-abort
{
      @abort["Abort"] = count();
}

postgresql$1:::transaction-commit
/self-&gt;ts/
{
      @commit["Commit"] = count();
      @time["Total time (ns)"] = sum(timestamp - self-&gt;ts);
      self-&gt;ts=0;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When executed, the example D script gives output such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc"># ./txn_count.d `pgrep -n postgres` or ./txn_count.d &lt;PID&gt;
^C

Start                                          71
Commit                                         70
Total time (ns)                        2312105013</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>SystemTap uses a different notation for trace scripts than DTrace does, even though the underlying trace points are compatible. One point worth noting is that at this writing, SystemTap scripts must reference probe names using double underscores in place of hyphens. This is expected to be fixed in future SystemTap releases.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="defining-new-probes"><a class="anchor" href="#defining-new-probes"></a>1.5.4. Defining New Probes</h4>
<div class="paragraph">
<p>New probes can be defined within the code wherever the developer desires, though this will require a recompilation. Below are the steps for inserting new probes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Decide on probe names and data to be made available through the probes</p>
</li>
<li>
<p>Add the probe definitions to <code>src/backend/utils/probes.d</code></p>
</li>
<li>
<p>Include <code>pg_trace.h</code> if it is not already present in the module(s) containing the probe points, and insert <code>TRACE_POSTGRESQL</code> probe macros at the desired locations in the source code</p>
</li>
<li>
<p>Recompile and verify that the new probes are available</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Example:</strong> Here is an example of how you would add a probe to trace all new transactions by transaction ID.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Decide that the probe will be named <code>transaction-start</code> and requires a parameter of type <code>LocalTransactionId</code></p>
</li>
<li>
<p>Add the probe definition to <code>src/backend/utils/probes.d</code>:</p>
<div class="literalblock">
<div class="content">
<pre>```
probe transaction__start(LocalTransactionId);
```</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Note the use of the double underline in the probe name. In a DTrace script using the probe, the double underline needs to be replaced with a hyphen, so `transaction-start` is the name to document for users.</pre>
</div>
</div>
</li>
<li>
<p>At compile time, <code>transaction__start</code> is converted to a macro called <code>TRACE_POSTGRESQL_TRANSACTION_START</code> (notice the underscores are single here), which is available by including <code>pg_trace.h</code>. Add the macro call to the appropriate location in the source code. In this case, it looks like the following:</p>
<div class="literalblock">
<div class="content">
<pre>```
TRACE_POSTGRESQL_TRANSACTION_START(vxid.localTransactionId);
```</pre>
</div>
</div>
</li>
<li>
<p>After recompiling and running the new binary, check that your newly added probe is available by executing the following DTrace command. You should see similar output:</p>
<div class="literalblock">
<div class="content">
<pre>```
# dtrace -ln transaction-start
   ID    PROVIDER          MODULE           FUNCTION NAME
18705 postgresql49878     postgres     StartTransactionCommand transaction-start
18755 postgresql49877     postgres     StartTransactionCommand transaction-start
18805 postgresql49876     postgres     StartTransactionCommand transaction-start
18855 postgresql49875     postgres     StartTransactionCommand transaction-start
18986 postgresql49873     postgres     StartTransactionCommand transaction-start
```</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>There are a few things to be careful about when adding trace macros to the C code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You should take care that the data types specified for a probe&#8217;s parameters match the data types of the variables used in the macro. Otherwise, you will get compilation errors.</p>
</li>
<li>
<p>On most platforms, if IvorySQL is built with <code>--enable-dtrace</code>, the arguments to a trace macro will be evaluated whenever control passes through the macro, <strong>even if no tracing is being done</strong>. This is usually not worth worrying about if you are just reporting the values of a few local variables. But beware of putting expensive function calls into the arguments. If you need to do that, consider protecting the macro with a check to see if the trace is actually enabled:</p>
<div class="literalblock">
<div class="content">
<pre>```
if (TRACE_POSTGRESQL_TRANSACTION_START_ENABLED())
    TRACE_POSTGRESQL_TRANSACTION_START(some_function(...));
```</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each trace macro has a corresponding <code>ENABLED</code> macro.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="monitoring-disk-usage"><a class="anchor" href="#monitoring-disk-usage"></a>2. Monitoring Disk Usage</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="determining-disk-usage"><a class="anchor" href="#determining-disk-usage"></a>2.1. Determining Disk Usage</h3>
<div class="paragraph">
<p>Each table has a primary heap disk file where most of the data is stored. If the table has any columns with potentially-wide values, there also might be a TOAST file associated with the table, which is used to store values too wide to fit comfortably in the main table . There will be one valid index on the TOAST table, if present. There also might be indexes associated with the base table. Each table and index is stored in a separate disk file — possibly more than one file, if the file would exceed one gigabyte.</p>
</div>
<div class="paragraph">
<p>You can monitor disk space in three ways: using the SQL functions, using the <a href="https://www.postgresql.org/docs/current/oid2name.html">oid2name</a> module, or using manual inspection of the system catalogs. The SQL functions are the easiest to use and are generally recommended. The remainder of this section shows how to do it by inspection of the system catalogs.</p>
</div>
<div class="paragraph">
<p>Using psql on a recently vacuumed or analyzed database, you can issue queries to see the disk usage of any table:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">SELECT pg_relation_filepath(oid), relpages FROM pg_class WHERE relname = 'customer';

 pg_relation_filepath | relpages
----------------------+----------
 base/16384/16806     |       60
(1 row)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each page is typically 8 kilobytes. (Remember, <code>relpages</code> is only updated by <code>VACUUM</code>, <code>ANALYZE</code>, and a few DDL commands such as <code>CREATE INDEX</code>.) The file path name is of interest if you want to examine the table&#8217;s disk file directly.</p>
</div>
<div class="paragraph">
<p>To show the space used by TOAST tables, use a query like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">SELECT relname, relpages
FROM pg_class,
     (SELECT reltoastrelid
      FROM pg_class
      WHERE relname = 'customer') AS ss
WHERE oid = ss.reltoastrelid OR
      oid = (SELECT indexrelid
             FROM pg_index
             WHERE indrelid = ss.reltoastrelid)
ORDER BY relname;

       relname        | relpages
----------------------+----------
 pg_toast_16806       |        0
 pg_toast_16806_index |        1</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can easily display index sizes, too:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">SELECT c2.relname, c2.relpages
FROM pg_class c, pg_class c2, pg_index i
WHERE c.relname = 'customer' AND
      c.oid = i.indrelid AND
      c2.oid = i.indexrelid
ORDER BY c2.relname;

      relname      | relpages
-------------------+----------
 customer_id_index |       26</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is easy to find your largest tables and indexes using this information:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">SELECT relname, relpages
FROM pg_class
ORDER BY relpages DESC;

       relname        | relpages
----------------------+----------
 bigtable             |     3290
 customer             |     3144</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="disk-full-failure"><a class="anchor" href="#disk-full-failure"></a>2.2. Disk Full Failure</h3>
<div class="paragraph">
<p>The most important disk monitoring task of a database administrator is to make sure the disk doesn&#8217;t become full. A filled data disk will not result in data corruption, but it might prevent useful activity from occurring. If the disk holding the WAL files grows full, database server panic and consequent shutdown might occur.</p>
</div>
<div class="paragraph">
<p>If you cannot free up additional space on the disk by deleting other things, you can move some of the database files to other file systems by making use of tablespaces.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Tip</div>
<div class="paragraph">
<p>Some file systems perform badly when they are almost full, so do not wait until the disk is completely full to take action.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>If your system supports per-user disk quotas, then the database will naturally be subject to whatever quota is placed on the user the server runs as. Exceeding the quota will have the same bad effects as running out of disk space entirely.</p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="3.html">Getting Started</a></span>
  <span class="next"><a href="5.html">Operating personnel</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">

</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
