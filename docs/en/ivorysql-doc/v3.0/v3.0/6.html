<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Installation Deployment :: IvorySQL Document Site</title>
    <link rel="canonical" href="https://docs.ivorysql.org/ivorysql-doc/v3.0/v3.0/6.html">
    <link rel="prev" href="5.html">
    <link rel="next" href="7.html">
    <meta name="generator" content="Antora 3.1.7">
    <link rel="stylesheet" href="../../../_/css/site.css">
<link rel="stylesheet" href="../../../_/css/search.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.ivorysql.org">IvorySQL Document Site</a>
        <div class="navbar-item">
          <input id="search-input" type="text" placeholder="Search docs">
        </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ivorysql-doc" data-version="v3.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="welcome.html">IvorySQL</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="welcome.html">Welcome</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1.html">Release</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="2.html">About</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started with IvorySQL</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="3.html">User manual</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="4.html">Administrator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="5.html">Operating personnel</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="6.html">Installation Deployment</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="7.html">Developer</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="8.html">Operation Management</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="9.html">Migration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="10.html">Community contribution</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="11.html">Tool Reference</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="12.html">FAQ</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">List of features</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="14.html">1、Ivorysql frame design</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="15.html">2、GUC Framework</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="16.html">3、Case conversion</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="17.html">4、Dual-mode design</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="18.html">5、Compatible with oracle like</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="19.html">6、Compatible with oracle anonymous block</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="20.html">7、Compatible with Oracle functions and stored procedures</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="21.html">8、Built-in data types and built-in functions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="22.html">9、Added Oracle compatibility mode ports and IP</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">IvorySQL</span>
    <span class="version">v3.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../v3.1/v3.1/welcome.html">IvorySQL</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../v3.1/v3.1/welcome.html">v3.1</a>
        </li>
        <li class="version is-current">
          <a href="welcome.html">v3.0</a>
        </li>
        <li class="version">
          <a href="../../v2.3/v2.3/welcome.html">v2.3</a>
        </li>
        <li class="version">
          <a href="../../v2.2/v2.2/welcome.html">v2.2</a>
        </li>
        <li class="version">
          <a href="../../v2.1/v2.1/welcome.html">v2.1</a>
        </li>
        <li class="version">
          <a href="../../v1.5/v1.5/welcome.html">v1.5</a>
        </li>
        <li class="version">
          <a href="../../v1.4/v1.4/welcome.html">v1.4</a>
        </li>
        <li class="version">
          <a href="../../v1.3/v1.3/welcome.html">v1.3</a>
        </li>
        <li class="version">
          <a href="../../v1.2/v1.2/welcome.html">v1.2</a>
        </li>
        <li class="version">
          <a href="../../v1.1/v1.1/welcome.html">v1.1</a>
        </li>
        <li class="version">
          <a href="../../v1.0/v1.0/welcome.html">v1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="welcome.html">IvorySQL</a></li>
    <li><a href="6.html">Installation Deployment</a></li>
  </ul>
</nav>
  <div class="page-versions">
  <button class="version-menu-toggle" title="switch to Chinese">EN</button>
  <div class="version-menu">
    <a class="version is-current" href="">EN</a>
    <a class="version" href="../../../../cn/ivorysql-doc/v3.0/v3.0/6.html">CN</a>
  </div>
  </div>
  <div class="edit-this-page"><a href="https://github.com/IvorySQL/ivorysql_docs/edit/v3.0/EN/modules/ROOT/pages/v3.0/6.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page"><strong>Installation Deployment</strong></h1>
<div class="sect1">
<h2 id="installation-overview"><a class="anchor" href="#installation-overview"></a>1. Installation overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This article introduces the installation process and precautions of Ivorysql on Linux platform. This article mainly demonstrates the yum source installation steps, rpm package installation steps, and source code installation steps of the database under the Centos 7 environment.</p>
</div>
<div class="sect2">
<h3 id="software-and-hardware-requirements"><a class="anchor" href="#software-and-hardware-requirements"></a>1.1. Software and hardware requirements</h3>
<div class="sect3">
<h4 id="introduction-to-software-resources"><a class="anchor" href="#introduction-to-software-resources"></a>1.1.1. Introduction to software resources</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">operating system</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yum source download address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CentOS 7、CentOS 8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://yum.highgo.ca/ivorysql.html" class="bare">https://yum.highgo.ca/ivorysql.html</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="hardware-resource-preparation"><a class="anchor" href="#hardware-resource-preparation"></a>1.1.2. Hardware resource preparation</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuration parameters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Minimum configuration</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Recommended configuration</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CPU</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 cores</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16 cores</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Memory</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Storage</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">800MB，mechanical hard disk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Above 5GB，SSD or NvMe</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Network</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gigabit lan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Gigabit network</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="environment-and-configuration-check"><a class="anchor" href="#environment-and-configuration-check"></a>1.2. Environment and configuration check</h3>
<div class="paragraph">
<p>Before deploying the IvorySQL database, you need to check the system environment and configuration</p>
</div>
<div class="sect3">
<h4 id="view-resources"><a class="anchor" href="#view-resources"></a>1.2.1. View resources</h4>
<div class="paragraph">
<p>The IvorySQL database supports CentOS 7. X, 8. X operating systems. For details, refer to <a href="#_software_and_hardware_requirements">[_software_and_hardware_requirements]</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="view-the-operating-system"><a class="anchor" href="#view-the-operating-system"></a>1.2.2. View the operating system</h4>
<div class="paragraph">
<p>Run the following command to view the operating system information：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">cat /etc/redhat-release</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="view-kernel-parameters"><a class="anchor" href="#view-kernel-parameters"></a>1.2.3. View kernel parameters</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">uname -r</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="view-memory-and-clear-cache"><a class="anchor" href="#view-memory-and-clear-cache"></a>1.2.4. View memory and clear cache</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">free -g

echo 3 &gt; /proc/sys/vm/drop_caches</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="get-installation-package"><a class="anchor" href="#get-installation-package"></a>1.3. Get installation package</h3>
<div class="paragraph">
<p>You can install the IvorySql database or RPM package through the source code.</p>
</div>
<div class="sect3">
<h4 id="use-source-code-to-build-ivorysql-database"><a class="anchor" href="#use-source-code-to-build-ivorysql-database"></a>1.3.1. Use source code to build IvorySQL database</h4>
<div class="paragraph">
<p>1.Get the source code: Run the following command to clone the source code of the IvorySQL database to your build machine:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">git clone https://github.com/IvorySQL/IvorySQL.git</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Note: To clone code, you need to install and configure Git first. For details, refer to <a href="https://git-scm.com/doc">Git doc</a>.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>2.Install dependent packages: To compile IvorySQL from source code, you must ensure that prerequisite packages are available on the system. Execute the following command to install related packages：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">sudo yum install -y bison-devel readline-devel zlib-devel openssl-devel wget
sudo yum groupinstall -y 'Development Tools'</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Note: "Development Tools" includes gcc, make, flex, bison.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>3.Self-compilation and installation: The source code obtained previously is in the folder IvorySQL. Next, we will enter this folder for operation.</p>
</div>
<div class="paragraph">
<p>Configuration: Root users execute the following commands to configure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">./configure --prefix=/usr/local/ivorysql/ivorysql-3</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Note: Because&#8201;&#8212;&#8201;prefix is not provided, it is installed in/usr/local/pgsql by default, so you need to specify the path</p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Note: We should remember the specified directory, because the system cannot find out where the compiled and installed programs are. More configure parameters can be viewed through "./configure&#8201;&#8212;&#8201;help". You can also view the PostgreSQL manual</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Compile and install: After the configuration is completed, execute make to compile:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">make</code></pre>
</div>
</div>
<div class="paragraph">
<p>Perform a regression test before installing the newly compiled service (the following commands can be used):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">make check
make all-check-world</code></pre>
</div>
</div>
<div class="paragraph">
<p>Installation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">make install</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="install-the-ivorysql-database-using-the-rpm-package"><a class="anchor" href="#install-the-ivorysql-database-using-the-rpm-package"></a>1.3.2. Install the IvorySql database using the RPM package</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the following command to download the IvorySQL installation package.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">wget https://github.com/IvorySQL/IvorySQL/releases/tag/Ivorysql_3.0_Beta/ivorysql3-3.0-1.rhel7.x86_64.rpm

wget https://github.com/IvorySQL/IvorySQL/releases/tag/Ivorysql_3.0_Beta/ivorysql3-contrib-3.0-1.rhel7.x86_64.rpm

wget https://github.com/IvorySQL/IvorySQL/releases/tag/Ivorysql_3.0_Beta/ivorysql3-libs-3.0-1.rhel7.x86_64.rpm

wget https://github.com/IvorySQL/IvorySQL/releases/tag/Ivorysql_3.0_Beta/ivorysql3-server-3.0-1.rhel7.x86_64.rpm</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Note: The installation package in the example may not be the latest version. It is recommended that you download the latest installation package.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>2.Run the following command to install IvorySQL.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">yum install -y libicu libxslt python3                   --Install dependencies first
rpm -ivh ivorysql3-libs-3.0-1.rhel7.x86_64.rpm
rpm -ivh ivorysql3-3.0-1.rhel7.x86_64.rpm
rpm -ivh ivorysql3-contrib-3.0-1.rhel7.x86_64.rpm --nodeps
rpm -ivh ivorysql3-server-3.0-1.rhel7.x86_64.rpm</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="initialize-database-service"><a class="anchor" href="#initialize-database-service"></a>1.4. Initialize database service</h3>
<div class="sect3">
<h4 id="initialize-database"><a class="anchor" href="#initialize-database"></a>1.4.1. Initialize database</h4>
<div class="paragraph">
<p>1.Create an operating system user: under the user root session, create a new user ivorysql:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">/usr/sbin/groupadd ivorysql
/usr/sbin/useradd -g ivorysql ivorysql -c "IvorySQL3.0 Server"
passwd ivorysql</code></pre>
</div>
</div>
<div class="paragraph">
<p>2.Create a data directory and modify permissions: Execute the following command in the root session:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">chown -R ivorysql.ivorysql /var/lib/ivorysql/ivorysql-3</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Note: The data directory is not placed in "/var/lib/ivorysql/ivorysql-3/data" according to RPM installation.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>3.Environment variable: switch to user ivorysql, modify the file "/home/ivorysql/. bash_profile", and configure the environment variable：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">umask 022
export LD_LIBRARY_PATH=/usr/local/ivorysql/ivorysql-3/lib:$LD_LIBRARY_PATH
export PATH=/usr/local/ivorysql/ivorysql-3/bin:$PATH
export PGDATA=/var/lib/ivorysql/ivorysql-3/data</code></pre>
</div>
</div>
<div class="paragraph">
<p>Make the environment variable effective in the current ivorysql user session:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">source .bash_profile</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also log in again or open a new user ivorysql session.</p>
</div>
<div class="paragraph">
<p>4.Set the firewall: If the firewall is enabled, port 5333 needs to be opened:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">firewall-cmd --zone=public --add-port=5333/tcp --permanent
firewall-cmd --reload</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Note: The default port is 5333. If the port is not opened, the external client will fail to connect via IP.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>5.Initialization: Under user ivorysql, simply execute initdb to complete initialization:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">initdb</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Note: The initdb operation is the same as PostgreSQL. It can be initialized according to the habits of PG.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>6.Start database: use pg_ Ctl starts the database service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">pg_ctl start</code></pre>
</div>
</div>
<div class="paragraph">
<p>View the status and start successfully:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">pg_ctl status</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configure-service"><a class="anchor" href="#configure-service"></a>1.5. Configure service</h3>
<div class="paragraph">
<p>1.Client authentication: modify/ivorysql/1.2/data/pg_ Hba.conf, add the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">host    all             all             0.0.0.0/0               trust</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Note: This is trust, which means that you can log in without password.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Execute the following command to load the configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">pg_ctl reload</code></pre>
</div>
</div>
<div class="paragraph">
<p>2.Basic parameters</p>
</div>
<div class="paragraph">
<p>Connect to the database through psql:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">psql</code></pre>
</div>
</div>
<div class="paragraph">
<p>Modify listening address</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">alter system set listen_addresses = '*';</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Note: The default is listening at 127.0.0.1. The service cannot be connected outside the host.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>3.Guard service</p>
</div>
<div class="paragraph">
<p>Create a service file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">touch /usr/lib/systemd/system/ivorysql.service</code></pre>
</div>
</div>
<div class="paragraph">
<p>The editing contents are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">[Unit]
Description=IvorySQL 3.0 database server
Documentation=https://www.ivorysql.org
Requires=network.target local-fs.target
After=network.target local-fs.target

[Service]
Type=forking

User=ivorysql
Group=ivorysql

Environment=PGDATA=/ivorysql/1.2/data/

OOMScoreAdjust=-1000

ExecStart=/usr/local/ivorysql/bin/pg_ctl start -D ${PGDATA}
ExecStop=/usr/local/ivorysql/bin/pg_ctl stop -D ${PGDATA}
ExecReload=/usr/local/ivorysql/bin/pg_ctl reload -D ${PGDATA}
A}

TimeoutSec=0

[Install]
WantedBy=multi-user.target</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Note: There are many ways to write a service. Be careful when using it in a production environment. Please repeat the test several times.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Stop pg_ The database service started by ctl enables the systemd service and starts:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">systemctl enable --now ivorysql.service</code></pre>
</div>
</div>
<div class="paragraph">
<p>IvorSQL database service operation command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">systemctl start ivorysql.service
systemctl stop ivorysql.service
systemctl restart ivorysql.service
systemctl status ivorysql.service
systemctl reload ivorysql.service</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="installation"><a class="anchor" href="#installation"></a>1.6. installation</h3>
<div class="sect3">
<h4 id="yum-source"><a class="anchor" href="#yum-source"></a>1.6.1. Yum source</h4>
<div class="paragraph">
<p>1.Download YUM source: use wget to download on Centos7</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">wget https://yum.highgo.ca/dists/ivorysql-rpms/repo/ivorysql-release-1.0-1.noarch.rpm</code></pre>
</div>
</div>
<div class="paragraph">
<p>Install ivorysql-release-1.0-1.noarch.rpm：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">rpm -ivh ivorysql-release-1.0-1.noarch.rpm</code></pre>
</div>
</div>
<div class="paragraph">
<p>After installation, the YUM source profile will be created：/etc/yum.repos.d/ivorysql.repo。</p>
</div>
<div class="paragraph">
<p>Search to view relevant installation packages：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">yum search ivorysql</code></pre>
</div>
</div>
<div class="paragraph">
<p>Table 1 for the description of search results：</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">YUM source description</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>serial number</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Package name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://yum.highgo.ca/dists/ivorysql-rpms/1/redhat/rhel-7-x86_64/ivorysql1-1.2-1.rhel7.x86_64.rpm">ivorysql1.x86_64</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IvorySQL client program and library files</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://yum.highgo.ca/dists/ivorysql-rpms/1/redhat/rhel-7-x86_64/ivorysql1-contrib-1.2-1.rhel7.x86_64.rpm">ivorysql1-contrib.x86_64</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contributed source code and binaries released with IvorySQL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ivorysql1-devel.x86_64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IvorySQL develops header files and libraries</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ivorysql1-docs.x86_64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additional documentation for IvorySQL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://yum.highgo.ca/dists/ivorysql-rpms/1/redhat/rhel-7-x86_64/ivorysql1-libs-1.2-1.rhel7.x86_64.rpm">ivorysql1-libs.x86_64</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shared libraries required by all IvorySQL clients</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ivorysql1-llvmjit.x86_64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Just-in-time compilation support for IvorySQL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ivorysql1-plperl.x86_64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perl, the procedural language used for IvorySQL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ivorysql1-plpython3.x86_64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Python3, the procedural language for IvorySQL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ivorysql1-pltcl.x86_64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tcl, the procedural language used for IvorySQL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://yum.highgo.ca/dists/ivorysql-rpms/1/redhat/rhel-7-x86_64/ivorysql1-server-1.2-1.rhel7.x86_64.rpm">ivorysql1-server.x86_64</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The programs required to create and run the IvorySQL server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ivorysql1-test.x86_64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test suite released with IvorySQL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">vorysql-release.noarch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Yum source configuration RPM package of Hanco Basic Software Co., Ltd</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>2.Install IvorySQL
To install the database service, you need to install ivorysql1-server. Execute the following command in the user root session:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">yum install -y ivorysql1-server</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Installation list:：</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql1-server.x86_64 0:1.2-1.rhel7</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Dependencies Installation: </strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">ivorysql1.x86_64 0:1.2-1.rhel7 ivorysql1-contrib.x86_64 0:1.2-1.rhel7
ivorysql1-libs.x86_64 0:1.2-1.rhel7 libicu.x86_64 0:50.2-4.el7_7
libtirpc.x86_64 0:0.2.4-0.16.el7 libxslt.x86_64 0:1.1.28-6.el7
python3.x86_64 0:3.6.8-18.el7 python3-libs.x86_64 0:3.6.8-18.el7
python3-pip.noarch 0:9.0.3-8.el7 python3-setuptools.noarch 0:39.2.0-10.el7</code></pre>
</div>
</div>
<div class="paragraph">
<p>3.Installed directory
Table 2 describes the file directories generated during YUM installation.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Description of installation directory file</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>serial number</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>File path</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usr/local/ivorysql/ivorysql-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software installation directory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/var/lib/ivorysql/ivorysql-1/data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data directory (default)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usr/bin/ivorysql-1-setup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Helps system administrators with basic database cluster management</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/usr/lib/systemd/system/ivorysql-1.service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Guardian services</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="deb-pckage"><a class="anchor" href="#deb-pckage"></a>1.6.2. deb pckage</h4>
<div class="paragraph">
<p>Verification environment: Linux 20.04.1-Ubuntu</p>
</div>
<div class="paragraph">
<p>1、Get deb from the official website</p>
</div>
<div class="paragraph">
<p>explain：ivorysql.deb is not currently available</p>
</div>
<div class="paragraph">
<p>2、Install deb package</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">dpkg -i ivorysql.deb</code></pre>
</div>
</div>
<div class="paragraph">
<p>3、Configure environment variables</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">vi ~/.bashrc
    export PATH=/xxx/ivorysql/bin:$PATH
    export LD_LIBRARY_PATH=/xxx/ivorysql/lib

source .bashrc</code></pre>
</div>
</div>
<div class="paragraph">
<p>4、Uninstall deb package</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">dpkg -r ivorysql</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="uninstall-the-ivorysql-database"><a class="anchor" href="#uninstall-the-ivorysql-database"></a>1.7. Uninstall the IvorySQL database</h3>
<div class="sect3">
<h4 id="compile-uninstall"><a class="anchor" href="#compile-uninstall"></a>1.7.1. Compile Uninstall</h4>
<div class="paragraph">
<p>1.Backup data: The data directory is under "/ivorysql/1.2/data", so we can protect the directory. It is better to stop the database service and make a backup.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">systemctl stop ivorysql-1.service</code></pre>
</div>
</div>
<div class="paragraph">
<p>2.Compile and uninstall: switch the root session to the source directory and execute the following commands respectively:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">make uninstall
make clean</code></pre>
</div>
</div>
<div class="paragraph">
<p>3.Delete residual directories and files:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">systemctl disable ivorysql.servicemake                  --disable Service
mv /usr/lib/systemd/system/ivorysql.service /tmp/       --the service file can be moved                                                             to/tmp or deleted
rm -fr /usr/local/ivorysql/ivorysql-3                                --remove residual installation                                                             directory</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Note: There are also user ivorysql and corresponding environment variables, which can be cleaned according to the situation. The rest is the data directory "/var/lib/ivorysql/ivorysql-3/data". Please make sure to make a backup before processing. There are also installed dependent packages, which can be uninstalled according to the situation.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="yum-uninstall"><a class="anchor" href="#yum-uninstall"></a>1.7.2. YUM Uninstall</h4>
<div class="paragraph">
<p>1.Stop database service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">systemctl stop ivorysql-1.service</code></pre>
</div>
</div>
<div class="paragraph">
<p>First use "yum history list" to determine the transaction ID of yum installation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">[root@Node02 ~]# yum history list
Loaded plugins: fastestmirror
ID     | Login user               | Date and time    | Action(s)      | Altered
-------------------------------------------------------------------------------
     5 | root &lt;root&gt;              | 2022-04-27 12:38 | Install        |   11  &lt;
     4 | root &lt;root&gt;              | 2022-03-26 16:08 | Install        |   35 &gt;
     3 | root &lt;root&gt;              | 2022-03-26 16:07 | I, U           |   19
     2 | root &lt;root&gt;              | 2022-03-26 16:07 | I, U           |   73
     1 | System &lt;unset&gt;           | 2022-03-26 15:59 | Install        |  299
history list</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can see that the transaction with ID 5 is to execute the installation. Execute the command to uninstall (replace XX with "5"):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">yum history undo XX</code></pre>
</div>
</div>
<div class="paragraph">
<p>2.unload：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">yum remove ivorysql-server</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, this command is not completely uninstalled. Only 2 dependencies have been uninstalled, and 8 dependencies have not been uninstalled. You can decide whether to uninstall in this way based on whether to retain these dependencies.</p>
</div>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="5.html">Operating personnel</a></span>
  <span class="next"><a href="7.html">Developer</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">

</footer>
<script src="../../../_/js/site.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/vendor/search.js" id="search-script" data-base-path="../../.." data-page-path="/ivorysql-doc/v3.0/v3.0/6.html"></script>
<script async src="../../../_/../search-index.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
